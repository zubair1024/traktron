/*! Caesar v1.131.0 */
if(!function(a){"function"==typeof define&&define.amd?define(["./kendo.core"],a):a()}(function(){!function(a,b){kendo.cultures.en={name:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"",abbr:"",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM d, yyyy",F:"dddd, MMMM d, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM yyyy",Y:"MMMM yyyy"},"/":"/",":":":",firstDay:0}}}}(this)}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,d){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap='#"+f+"']")[0],!!g&&c(g)):!1):(/^(input|select|textarea|button|object)$/.test(h)?!b.disabled:"a"===h?b.href||d:d)&&c(b)}function c(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(c){return b(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var d=a.attr(c,"tabindex"),e=isNaN(d);return(e||d>=0)&&b(c,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function d(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e="Width"===c?["Left","Right"]:["Top","Bottom"],f=c.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){return void 0===b?g["inner"+c].call(this):this.each(function(){a(this).css(f,d(this,b)+"px")})},a.fn["outer"+c]=function(b,e){return"number"!=typeof b?g["outer"+c].call(this,b):this.each(function(){a(this).css(f,d(this,b,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(b){if(void 0!==b)return this.css("zIndex",b);if(this.length)for(var c,d,e=a(this[0]);e.length&&e[0]!==document;){if(c=e.css("position"),("absolute"===c||"relative"===c||"fixed"===c)&&(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d))return d;e=e.parent()}return 0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;e<f.length;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}};var d=0,e=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var c,d,f=e.call(arguments,1),g=0,h=f.length;h>g;g++)for(c in f[g])d=f[g][c],f[g].hasOwnProperty(c)&&void 0!==d&&(a.isPlainObject(d)?b[c]=a.isPlainObject(b[c])?a.widget.extend({},b[c],d):a.widget.extend({},d):b[c]=d);return b},a.widget.bridge=function(b,c){var d=c.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=e.call(arguments,1),i=this;return g?this.each(function(){var c,e=a.data(this,d);return"instance"===f?(i=e,!1):e?a.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,d);b?(b.option(f||{}),b._init&&b._init()):a.data(this,d,new c(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=a(c.style?c.ownerDocument:c.document||c),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});var f=(a.widget,!1);a(document).mouseup(function(){f=!1});a.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!f){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,d=1===b.which,e="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return d&&!e&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),f=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),f=!1,!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),a.widget("ui.sortable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),a.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-this.document.scrollTop()<g.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)),b.pageX-this.document.scrollLeft()<g.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(a){var b="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),c="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),d=b&&c,e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return d?this.floating?f&&"right"===f||"down"===e?2:1:e&&("down"===e?2:1):!1},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d],this.document[0]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;c<b.length;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c],this.document[0]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){c&&!d.forcePlaceholderSize||(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"clientX":"clientY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),Math.abs(b[l]-i)<e&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),d[0].style.width&&!c.forceHelperSize||d.width(this.currentItem.width()),d[0].style.height&&!c.forceHelperSize||d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)
}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),"document"!==e.containment&&"window"!==e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)"auto"!==this._storedCSS[d]&&"static"!==this._storedCSS[d]||(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;d<e.length;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b)["offsetParent"in a.fn?"offsetParent":"parent"]();return c.length||(c=a("body")),parseInt(c.css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(){"use strict";function a(a){return a.split("").reverse().join("")}function b(a,b){return a.substring(0,b.length)===b}function c(a,b){return a.slice(-1*b.length)===b}function d(a,b,c){if((a[b]||a[c])&&a[b]===a[c])throw new Error(b)}function e(a){return"number"==typeof a&&isFinite(a)}function f(a,b){var c=Math.pow(10,b);return(Math.round(a*c)/c).toFixed(b)}function g(b,c,d,g,h,i,j,k,l,m,n,o){var p,q,r,s=o,t="",u="";return i&&(o=i(o)),e(o)?(b!==!1&&0===parseFloat(o.toFixed(b))&&(o=0),0>o&&(p=!0,o=Math.abs(o)),b!==!1&&(o=f(o,b)),o=o.toString(),-1!==o.indexOf(".")?(q=o.split("."),r=q[0],d&&(t=d+q[1])):r=o,c&&(r=a(r).match(/.{1,3}/g),r=a(r.join(a(c)))),p&&k&&(u+=k),g&&(u+=g),p&&l&&(u+=l),u+=r,u+=t,h&&(u+=h),m&&(u=m(u,s)),u):!1}function h(a,d,f,g,h,i,j,k,l,m,n,o){var p,q="";return n&&(o=n(o)),o&&"string"==typeof o?(k&&b(o,k)&&(o=o.replace(k,""),p=!0),g&&b(o,g)&&(o=o.replace(g,"")),l&&b(o,l)&&(o=o.replace(l,""),p=!0),h&&c(o,h)&&(o=o.slice(0,-1*h.length)),d&&(o=o.split(d).join("")),f&&(o=o.replace(f,".")),p&&(q+="-"),q+=o,q=q.replace(/[^0-9\.\-.]/g,""),""===q?!1:(q=Number(q),j&&(q=j(q)),e(q)?q:!1)):!1}function i(a){var b,c,e,f={};for(b=0;b<l.length;b+=1)if(c=l[b],e=a[c],void 0===e)"negative"!==c||f.negativeBefore?"mark"===c&&"."!==f.thousand?f[c]=".":f[c]=!1:f[c]="-";else if("decimals"===c){if(!(e>=0&&8>e))throw new Error(c);f[c]=e}else if("encoder"===c||"decoder"===c||"edit"===c||"undo"===c){if("function"!=typeof e)throw new Error(c);f[c]=e}else{if("string"!=typeof e)throw new Error(c);f[c]=e}return d(f,"mark","thousand"),d(f,"prefix","negative"),d(f,"prefix","negativeBefore"),f}function j(a,b,c){var d,e=[];for(d=0;d<l.length;d+=1)e.push(a[l[d]]);return e.push(c),b.apply("",e)}function k(a){return this instanceof k?void("object"==typeof a&&(a=i(a),this.to=function(b){return j(a,g,b)},this.from=function(b){return j(a,h,b)})):new k(a)}var l=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=k}(),function(a){"use strict";function b(b){return b instanceof a||a.zepto&&a.zepto.isZ(b)}function c(b,c){return"string"==typeof b&&0===b.indexOf("-inline-")?(this.method=c||"html",this.target=this.el=a(b.replace("-inline-","")||"<div/>"),!0):void 0}function d(b){if("string"==typeof b&&0!==b.indexOf("-")){this.method="val";var c=document.createElement("input");return c.name=b,c.type="hidden",this.target=this.el=a(c),!0}}function e(a){return"function"==typeof a?(this.target=!1,this.method=a,!0):void 0}function f(a,c){return b(a)&&!c?(a.is("input, select, textarea")?(this.method="val",this.target=a.on("change.liblink",this.changeHandler)):(this.target=a,this.method="html"),!0):void 0}function g(a,c){return b(a)&&("function"==typeof c||"string"==typeof c&&a[c])?(this.method=c,this.target=a,!0):void 0}function h(b,c,d){var e=this,f=!1;if(this.changeHandler=function(b){var c=e.formatInstance.from(a(this).val());return c===!1||isNaN(c)?(a(this).val(e.lastSetValue),!1):void e.changeHandlerMethod.call("",b,c)},this.el=!1,this.formatInstance=d,a.each(k,function(a,d){return f=d.call(e,b,c),!f}),!f)throw new RangeError("(Link) Invalid Link.")}function i(a){this.items=[],this.elements=[],this.origin=a}function j(b,c,d,e){0===b&&(b=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[b]||(this.linkAPI[b]=new i(this));var f=new h(c,d,e||this.LinkDefaultFormatter);f.target||(f.target=a(this)),f.changeHandlerMethod=this.LinkConfirm(b,f.el),this.linkAPI[b].push(f,f.el),this.LinkUpdate(b)}var k=[c,d,e,f,g];h.prototype.set=function(a){var b=Array.prototype.slice.call(arguments),c=b.slice(1);this.lastSetValue=this.formatInstance.to(a),c.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,c)},i.prototype.push=function(a,b){this.items.push(a),b&&this.elements.push(b)},i.prototype.reconfirm=function(a){var b;for(b=0;b<this.elements.length;b+=1)this.origin.LinkConfirm(a,this.elements[b])},i.prototype.remove=function(a){var b;for(b=0;b<this.items.length;b+=1)this.items[b].target.off(".liblink");for(b=0;b<this.elements.length;b+=1)this.elements[b].remove()},i.prototype.change=function(a){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var b,c=Array.prototype.slice.call(arguments,1);for(c.unshift(a),b=0;b<this.items.length;b+=1)this.items[b].set.apply(this.items[b],c);this.origin.LinkIsEmitting=!1},a.fn.Link=function(b){var c=this;if(b===!1)return c.each(function(){this.linkAPI&&(a.map(this.linkAPI,function(a){a.remove()}),delete this.linkAPI)});if(void 0===b)b=0;else if("string"!=typeof b)throw new Error("Flag must be string.");return{to:function(a,d,e){return c.each(function(){j.call(this,b,a,d,e)})}}}}(window.jQuery||window.Zepto),function(a){"use strict";function b(b){return a.grep(b,function(c,d){return d===a.inArray(c,b)})}function c(a,b){return Math.round(a/b)*b}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){a.addClass(b),setTimeout(function(){a.removeClass(b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(b){return a.isArray(b)?b:[b]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function j(a,b){return 100/(b-a)}function k(a,b){return 100*b/(a[1]-a[0])}function l(a,b){return k(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function m(a,b){return b*(a[1]-a[0])/100+a[0]}function n(a,b){for(var c=1;a>=b[c];)c+=1;return c}function o(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=n(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+l([d,e],c)/j(f,g)}function p(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=n(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],m([d,e],(c-f)*j(f,g))}function q(a,b,d,e){if(100===e)return e;var f,g,h=n(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):b[h-1]?a[h-1]+c(e-a[h-1],b[h-1]):e}function r(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function s(a,b,c){return b?void(c.xSteps[a]=k([c.xVal[a],c.xVal[a+1]],b)/j(c.xPct[a],c.xPct[a+1])):!0}function t(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)r(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)s(e,this.xNumSteps[e],this)}function u(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function v(b,c){if("object"!=typeof c||a.isArray(c))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===c.min||void 0===c.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");b.spectrum=new t(c,b.snap,b.dir,b.singleStep)}function w(b,c){if(c=h(c),!a.isArray(c)||!c.length||c.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");b.handles=c.length,b.start=c}function x(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function y(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function z(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function A(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function B(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function C(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function D(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function E(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function F(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function G(b){var c,d={margin:0,limit:0,animate:!0,format:Z};return c={step:{r:!1,t:u},start:{r:!0,t:w},connect:{r:!0,t:z},direction:{r:!0,t:D},snap:{r:!1,t:x},animate:{r:!1,t:y},range:{r:!0,t:v},orientation:{r:!1,t:A},margin:{r:!1,t:B},limit:{r:!1,t:C},behaviour:{r:!0,t:E},format:{r:!1,t:F}},b=a.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},b),a.each(c,function(a,c){if(void 0===b[a]){if(c.r)throw new Error("noUiSlider: '"+a+"' is required.");return!0}c.t(d,b[a])}),d.style=d.ort?"top":"left",d}function H(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function I(a){a.preventDefault();var b,c,d=0===a.type.indexOf("touch"),e=0===a.type.indexOf("mouse"),f=0===a.type.indexOf("pointer"),g=a;return 0===a.type.indexOf("MSPointer")&&(f=!0),a.originalEvent&&(a=a.originalEvent),d&&(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),(e||f)&&(f||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),b=a.clientX+window.pageXOffset,c=a.clientY+window.pageYOffset),g.points=[b,c],g.cursor=e,g}function J(b,c){var d=a("<div><div/></div>").addClass(Y[2]),e=["-lower","-upper"];return b&&e.reverse(),d.children().addClass(Y[3]+" "+Y[3]+e[c]),d}function K(a,b,c){switch(a){case 1:b.addClass(Y[7]),c[0].addClass(Y[6]);break;case 3:c[1].addClass(Y[6]);case 2:c[0].addClass(Y[7]);case 0:b.addClass(Y[6])}}function L(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(J(b,d).appendTo(c));return e}function M(b,c,d){return d.addClass([Y[0],Y[8+b],Y[4+c]].join(" ")),a("<div/>").appendTo(d).addClass(Y[1])}function N(b,c,d){function e(){return C[["width","height"][c.ort]]()}function j(a){var b,c=[E.val()];for(b=0;b<a.length;b+=1)E.trigger(a[b],c)}function k(a){return 1===a.length?a[0]:c.dir?a.reverse():a}function l(a){return function(b,c){E.val([a?null:c,a?c:null],!0)}}function m(b){var c=a.inArray(b,N);E[0].linkAPI&&E[0].linkAPI[b]&&E[0].linkAPI[b].change(J[c],D[c].children(),E)}function n(b,d){var e=a.inArray(b,N);return d&&d.appendTo(D[e].children()),c.dir&&c.handles>1&&(e=1===e?0:1),l(e)}function o(){var a,b;for(a=0;a<N.length;a+=1)this.linkAPI&&this.linkAPI[b=N[a]]&&this.linkAPI[b].reconfirm(b)}function p(a,b,d,e){return a=a.replace(/\s/g,W+" ")+W,b.on(a,function(a){return E.attr("disabled")?!1:E.hasClass(Y[14])?!1:(a=I(a),a.calcPoint=a.points[c.ort],void d(a,e))})}function q(a,b){var c,d=b.handles||D,f=!1,g=100*(a.calcPoint-b.start)/e(),h=d[0][0]!==D[0][0]?1:0;c=H(g,b.positions,d.length>1),f=v(d[0],c[h],1===d.length),d.length>1&&(f=v(d[1],c[h?0:1],!1)||f),f&&j(["slide"])}function r(b){a("."+Y[15]).removeClass(Y[15]),b.cursor&&a("body").css("cursor","").off(W),U.off(W),E.removeClass(Y[12]),j(["set","change"])}function s(b,c){1===c.handles.length&&c.handles[0].children().addClass(Y[15]),b.stopPropagation(),p(X.move,U,q,{start:b.calcPoint,handles:c.handles,positions:[F[0],F[D.length-1]]}),p(X.end,U,r,null),b.cursor&&(a("body").css("cursor",a(b.target).css("cursor")),D.length>1&&E.addClass(Y[12]),a("body").on("selectstart"+W,!1))}function t(b){var d,g=b.calcPoint,h=0;b.stopPropagation(),a.each(D,function(){h+=this.offset()[c.style]}),h=h/2>g||1===D.length?0:1,g-=C.offset()[c.style],d=100*g/e(),c.events.snap||f(E,Y[14],300),v(D[h],d),j(["slide","set","change"]),c.events.snap&&s(b,{handles:[D[h]]})}function u(a){var b,c;if(!a.fixed)for(b=0;b<D.length;b+=1)p(X.start,D[b].children(),s,{handles:[D[b]]});a.tap&&p(X.start,C,t,{handles:D}),a.drag&&(c=C.find("."+Y[7]).addClass(Y[10]),a.fixed&&(c=c.add(C.children().not(c).children())),p(X.start,c,s,{handles:D}))}function v(a,b,d){var e=a[0]!==D[0][0]?1:0,f=F[0]+c.margin,h=F[1]-c.margin,i=F[0]+c.limit,j=F[1]-c.limit;return D.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),d!==!1&&c.limit&&D.length>1&&(b=e?Math.min(b,i):Math.max(b,j)),b=G.getStep(b),b=g(parseFloat(b.toFixed(7))),b===F[e]?!1:(a.css(c.style,b+"%"),a.is(":first-child")&&a.toggleClass(Y[17],b>50),F[e]=b,J[e]=G.fromStepping(b),m(N[e]),!0)}function w(a,b){var d,e,f;for(c.limit&&(a+=1),d=0;a>d;d+=1)e=d%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=c.format.from(f),(f===!1||isNaN(f)||v(D[e],G.toStepping(f),d===3-c.dir)===!1)&&m(N[e]))}function x(a){if(E[0].LinkIsEmitting)return this;var b,d=h(a);return c.dir&&c.handles>1&&d.reverse(),c.animate&&-1!==F[0]&&f(E,Y[14],300),b=D.length>1?3:1,1===d.length&&(b=1),w(b,d),j(["set"]),this}function y(){var a,b=[];for(a=0;a<c.handles;a+=1)b[a]=c.format.to(J[a]);return k(b)}function z(){return a(this).off(W).removeClass(Y.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,d}function A(){var b=a.map(F,function(a,b){var c=G.getApplicableStep(a),d=i(String(c[2])),e=J[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[[h,f]]});return k(b)}function B(){return d}var C,D,E=a(b),F=[-1,-1],G=c.spectrum,J=[],N=["lower","upper"].slice(0,c.handles);if(c.dir&&N.reverse(),b.LinkUpdate=m,b.LinkConfirm=n,b.LinkDefaultFormatter=c.format,b.LinkDefaultFlag="lower",b.reappend=o,E.hasClass(Y[0]))throw new Error("Slider was already initialized.");C=M(c.dir,c.ort,E),D=L(c.handles,c.dir,C),K(c.connect,E,D),u(c.events),b.vSet=x,b.vGet=y,b.destroy=z,b.getCurrentStep=A,b.getOriginalOptions=B,b.getInfo=function(){return[G,c.style,c.ort]},E.val(c.start)}function O(a){var b=G(a,this);return this.each(function(){N(this,b,a)})}function P(b){return this.each(function(){if(!this.destroy)return void a(this).noUiSlider(b);var c=a(this).val(),d=this.destroy(),e=a.extend({},d,b);a(this).noUiSlider(e),this.reappend(),d.start===e.start&&a(this).val(c)})}function Q(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function R(b,c,d,e){if("range"===c||"steps"===c)return b.xVal;if("count"===c){var f,g=100/(d-1),h=0;for(d=[];(f=h++*g)<=100;)d.push(f);c="positions"}return"positions"===c?a.map(d,function(a){return b.fromStepping(e?b.getStep(a):a)}):"values"===c?e?a.map(d,function(a){return b.fromStepping(b.getStep(b.toStepping(a)))}):d:void 0}function S(c,d,e,f){var g=c.direction,h={},i=c.xVal[0],j=c.xVal[c.xVal.length-1],k=!1,l=!1,m=0;return c.direction=0,f=b(f.slice().sort(function(a,b){return a-b})),f[0]!==i&&(f.unshift(i),k=!0),f[f.length-1]!==j&&(f.push(j),l=!0),a.each(f,function(b){var g,i,j,n,o,p,q,r,s,t,u=f[b],v=f[b+1];if("steps"===e&&(g=c.xNumSteps[b]),g||(g=v-u),u!==!1&&void 0!==v)for(i=u;v>=i;i+=g){for(n=c.toStepping(i),o=n-m,r=o/d,s=Math.round(r),t=o/s,j=1;s>=j;j+=1)p=m+j*t,h[p.toFixed(5)]=["x",0];q=a.inArray(i,f)>-1?1:"steps"===e?2:0,!b&&k&&(q=0),i===v&&l||(h[n.toFixed(5)]=[i,q]),m=n}}),c.direction=g,h}function T(b,c,d,e,f,g){function h(a,b){return["-normal","-large","-sub"][a]}function i(a,c,d){return'class="'+c+" "+c+"-"+k+" "+c+h(d[1],d[0])+'" style="'+b+": "+a+'%"'}function j(a,b){d&&(a=100-a),b[1]=b[1]&&f?f(b[0],b[1]):b[1],l.append("<div "+i(a,"noUi-marker",b)+"></div>"),b[1]&&l.append("<div "+i(a,"noUi-value",b)+">"+g.to(b[0])+"</div>")}var k=["horizontal","vertical"][c],l=a("<div/>");return l.addClass("noUi-pips noUi-pips-"+k),a.each(e,j),l}var U=a(document),V=a.fn.val,W=".nui",X=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Y=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];t.prototype.getMargin=function(a){return 2===this.xPct.length?k(this.xVal,a):!1},t.prototype.toStepping=function(a){return a=o(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},t.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(p(this.xVal,this.xPct,a))},t.prototype.getStep=function(a){return this.direction&&(a=100-a),a=q(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},t.prototype.getApplicableStep=function(a){var b=n(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},t.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var Z={to:function(a){return a.toFixed(2)},from:Number};a.fn.val=function(b){function c(a){return a.hasClass(Y[0])?Q:V}if(!arguments.length){var d=a(this[0]);return c(d).call(d)}var e=a.isFunction(b);return this.each(function(d){var f=b,g=a(this);e&&(f=b.call(this,d,g.val())),c(g).call(g,f)})},a.fn.noUiSlider=function(a,b){switch(a){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(b?P:O).call(this,a)},a.fn.noUiSlider_pips=function(b){var c=b.mode,d=b.density||1,e=b.filter||!1,f=b.values||!1,g=b.format||{to:Math.round},h=b.stepped||!1;return this.each(function(){var b=this.getInfo(),i=R(b[0],c,f,h),j=S(b[0],d,c,i);return a(this).append(T(b[1],b[2],b[0].direction,j,e,g))})}}(window.jQuery||window.Zepto),function(a){var b={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},c={duration:"fast",direction:"both"},d=/^(?:html)$/i,e=function(b,c){c=c||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(b,null):b.currentStyle);var d=!(!document.defaultView||!document.defaultView.getComputedStyle),e={top:parseFloat(d?c.borderTopWidth:a.css(b,"borderTopWidth"))||0,left:parseFloat(d?c.borderLeftWidth:a.css(b,"borderLeftWidth"))||0,bottom:parseFloat(d?c.borderBottomWidth:a.css(b,"borderBottomWidth"))||0,right:parseFloat(d?c.borderRightWidth:a.css(b,"borderRightWidth"))||0};return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,vertical:e.top+e.bottom,horizontal:e.left+e.right}},f=function(b){var c=a(window),f=d.test(b[0].nodeName);return{border:f?{top:0,left:0,bottom:0,right:0}:e(b[0]),scroll:{top:(f?c:b).scrollTop(),left:(f?c:b).scrollLeft()},scrollbar:{right:f?0:b.innerWidth()-b[0].clientWidth,bottom:f?0:b.innerHeight()-b[0].clientHeight},rect:function(){var a=b[0].getBoundingClientRect();return{top:f?0:a.top,left:f?0:a.left,bottom:f?b[0].clientHeight:a.bottom,right:f?b[0].clientWidth:a.right}}()}};a.fn.extend({scrollintoview:function(e){e=a.extend({},c,e),e.direction=b["string"==typeof e.direction&&e.direction.toLowerCase()]||b.both;var g="";e.direction.x===!0&&(g="horizontal"),e.direction.y===!0&&(g=g?"both":"vertical");var h=this.eq(0),i=h.closest(":scrollable("+g+")");if(i.length>0){i=i.eq(0);var j={e:f(h),s:f(i)},k={top:j.e.rect.top-(j.s.rect.top+j.s.border.top),bottom:j.s.rect.bottom-j.s.border.bottom-j.s.scrollbar.bottom-j.e.rect.bottom,left:j.e.rect.left-(j.s.rect.left+j.s.border.left),right:j.s.rect.right-j.s.border.right-j.s.scrollbar.right-j.e.rect.right},l={};e.direction.y===!0&&(k.top<0?l.scrollTop=j.s.scroll.top+k.top:k.top>0&&k.bottom<0&&(l.scrollTop=j.s.scroll.top+Math.min(k.top,-k.bottom))),e.direction.x===!0&&(k.left<0?l.scrollLeft=j.s.scroll.left+k.left:k.left>0&&k.right<0&&(l.scrollLeft=j.s.scroll.left+Math.min(k.left,-k.right))),a.isEmptyObject(l)?a.isFunction(e.complete)&&e.complete.call(i[0]):(d.test(i[0].nodeName)&&(i=a("html,body")),i.animate(l,e.duration).eq(0).queue(function(b){a.isFunction(e.complete)&&e.complete.call(i[0]),b()}))}return this}});var g={auto:!0,scroll:!0,visible:!1,hidden:!1};a.extend(a.expr[":"],{scrollable:function(a,c,e,f){var h=b["string"==typeof e[3]&&e[3].toLowerCase()]||b.both,i=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle,j={x:g[i.overflowX.toLowerCase()]||!1,y:g[i.overflowY.toLowerCase()]||!1,isRoot:d.test(a.nodeName)};if(!j.x&&!j.y&&!j.isRoot)return!1;var k={height:{scroll:a.scrollHeight,client:a.clientHeight},width:{scroll:a.scrollWidth,client:a.clientWidth},scrollableX:function(){return(j.x||j.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(j.y||j.isRoot)&&this.height.scroll>this.height.client}};return h.y&&k.scrollableY()||h.x&&k.scrollableX()}})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");
if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.5",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.5",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),a(c.target).is('input[type="radio"]')||a(c.target).is('input[type="checkbox"]')||c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.5",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.5",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.5",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.5",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.5",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");
};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.5",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.5",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a,b){var c=window.kendo.ui.Menu.renderItem;a.extend(window.kendo.ui.Menu,{renderItem:function(a){var b=c(a),d="";if(a.item.data&&(d=" data-data='"+JSON.stringify(a.item.data)+"'"),d.length>0){var e=/(<li)([^>]*>.*)/,f=e.exec(b);b=f[1]+d+f[2]}return b}});var d=window.kendo.ui.Menu.extend({target:{},item:{},hiding:!1,showing:!1,enableScreenDetection:!0,options:{name:"MenuEx",delay:1e3,event:"contextmenu",orientation:"vertical",selector:"",offsetY:0,offsetX:0},init:function(b,c){var d=this;window.kendo.ui.Menu.fn.init.call(d,b,c),d.element.addClass("k-context-menu"),c.anchor&&a(this.element).on("mouseleave",function(){delay=c.delay||d.options.delay,setTimeout(function(){d.hide()},delay)}),a(document).click(a.proxy(d._documentClick,d));var e=d.element.children(".k-item");this.setClickHandler(c.dataSource,e)},setClickHandler:function(b,c){var d=this;a.each(b,function(b,e){if(e.click&&jQuery(c[b]).click(function(b){d.item=a(b.target).parents("li"),e.click.call(d,b)}),e.items){var f=a(c[b]).find(".k-group > .k-item");d.setClickHandler(e.items,f)}})},hide:function(){if(this.showing){this.hiding=!0;var b=a(this.target);b.hasClass("k-item")&&b.find(".k-in").removeClass("k-state-focused"),this.element.fadeOut(a.proxy(function(){this.hiding=!1,this.showing=!1},this))}},show:function(b,c){if(0==this.hiding){this.target=c.currentTarget;var d=a(this.element).height(),e=a(this.element).width(),f=c.pageX+this.options.offsetX,g=c.pageY+this.options.offsetY,h=a(b).offset();g-=h.top,this.enableScreenDetection&&(e+f>window.innerWidth+window.scrollX||d+g>window.innerHeight+window.scrollY)&&(e+f>window.innerWidth+window.scrollX&&(f=window.innerWidth+window.scrollX-e-3),d+g>window.innerHeight+window.scrollY&&(g=window.innerHeight+window.scrollY-d-3)),this.element.css({top:g,left:f}),this.element.fadeIn(a.proxy(function(){this.showing=!0},this))}},_documentClick:function(a){var b=this;b.hide()}});window.kendo.ui.plugin(d)}(jQuery);var App={widget:{},component:{},ui:{"static":{prefix:"roam",lastDomId:0,getNewId:function(){return App.ui["static"].prefix+ ++App.ui["static"].lastDomId}}},maps:{ui:{}},router:null,current:{objectId:null,objectType:null,objectName:null,idPath:[],treeRefreshNode:null},updateCurrent:function(a,b){"use strict";b?this.current=$.extend({},a):$.extend(this.current,a)},init:function(a){"use strict";var b=this;if(b.view={menuBar:null,alarmBar:null,navigationArea:null,navigationTree:null,favoritesTree:null,mainArea:null,sideBar:null,toast:null,menu:null,wizardAdmin:null,wizardReport:null,wizardWidget:null,widgets:[]},a&&($.each(a,function(a,c){null!==c&&"undefined"!=typeof c&&(b.config[a]=c)}),a=null),b.router&&b.router.init(),b.config.theme&&"default"!==b.config.theme?b.util.setTheme(b.config.theme):b.config.theme="default",App.config.isSmallDevice=window.matchMedia("only screen and (max-width: 767px)").matches,b.user.checkLogin())$(document).ajaxComplete(function(a,b){switch(b.status){case 200:case 304:}}),$(document).ajaxError(function(a,c,d,e){switch(c.status){case 200:App.log.checkJsonResponse(c,e,d);break;case 401:b.log.sessionExpired();break;case 500:case 503:b.config.errorLevel>0&&b.log.error("Internal server error.",d,!0);break;case 0:break;default:var f="";if(d.url===b.config.serviceUrl+"caesarVfs/delete"&&400===c.status)return!1;if(c.responseText)if(0===c.responseText.indexOf('{"messages"')){var g=$.parseJSON(c.responseText);f+=g.messages.join("<br>")}else f+=c.responseText;else f+=c.statusText;b.log.error(f,d,!0)}}),$.ajaxPrefilter(function(a,c){b.user.checkLogin()&&(c.data||(c.data={}),c.data[b.config.sessionName]=b.config.sessionId,a.data=$.param(c.data))}),$.ajaxSetup({type:b.config.ajaxType,dataType:b.config.ajaxDataType,timeout:b.config.ajaxTimeout}),b.user.getSettings(function(){b.i18n?(b.config.language=b.config.language||b.config.user.language,b.i18n.load(b.config.language,function(){b.start()})):b.log.error("i18n namespace not included.",b.config,!0)});else if(b.router){b.router.start();var c=b.router.getCurrentRoute();c===b.config.routeLogin||0===c.indexOf(b.config.routeLogin+"?")||(""!==c?b.router.navigate(b.config.routeLogin+"?r="+c):b.router.navigate(b.config.routeLogin))}},start:function(){"use strict";var a=this,b=[a.util.widget.syncWithDefault(),a.user.getWidgetTypes(),a.user.getDomainObjectTypes(),a.user.getDomainDataViews(),a.user.getAvailableMapProjects()];$.when.apply($,b).always(function(){if(a.router.isHeadless()){var b=$("body");b.empty(),App.view.mainArea=$("<div>",{id:"mainArea","data-location":App.config.locationMainArea}).appendTo(b),a.router.start(),a.startPoller(),a.application.installHandlers(),a.view.toast=new a.ui.Toast({}),a.i18n.update(a.config.user.culture)}else a.view.menuBar=$("#menuBar"),a.view.alarmBar=$("#alarmBar"),a.view.navigationArea=$("#navigationArea"),a.view.mainArea=$("#mainArea"),a.view.sideBar=$("#sideBar"),a.view.elContent=$("#content-wrap"),a.view.elFooter=$("#footer"),a.application.show(),a.view.toast=$(".toast-container:first"),a.view.toast.length||(a.view.toast=new a.ui.Toast({parentEl:a.view.menuBar})),a.i18n.update(a.config.user.culture,function(){a.config.lastTreeRefresh=new Date,a.loadNavigationTreeView(),a.view.Alarm=new a.ui.Alarm(a.config),a.view.Notification=new a.ui.Notification({})})})},loadNavigationTreeView:function(){"use strict";var a=this;a.view.navigationTree&&a.view.navigationTree.destroy();var b=$("#navigation-tree");b.empty(),a.view.navigationTree=b.kendoNavigationTreeView({loadOnDemand:!0,dataSource:new kendo.data.HierarchicalDataSource({transport:{read:{url:a.config.serviceUrl+"caesarOrganizationStructure/structure3",dataType:"json"}},schema:{model:{id:"domainObjectTypeId",fields:{id:{type:"number"},domainObjectType:{type:"string"}},children:{transport:{read:function(b){if(b.data.domainObjectTypeId){var c=b.data.domainObjectTypeId.split(a.config.idDivider);$.ajax({url:a.config.serviceUrl+"caesarOrganizationStructure/structure3",data:{domainObjectType:c[0],domainObjectId:c[1]},success:b.success})}}},schema:{model:{id:"domainObjectTypeId",fields:{domainObjectId:{type:"number"},domainObjectType:{type:"string"}},hasChildren:"hasChildren"}}},hasChildren:"hasChildren"}}}),dataBound:function(b){a.view.navigationTree.onDataBound(b),"undefined"==typeof b.node&&(a.config.lastTreeRefresh=new Date,a.router.destroy(),a.router.start(),a.current.routing||a.cmd.show(a.current.objectType,a.current.objectId,a.current.objectName),a.current.idPath.length&&$.ajax({url:a.config.serviceUrl+"caesarAssetAlarm/isJustificationRequired",data:{domainObjectType:a.current.idPath[0].objectType,domainObjectId:a.current.idPath[0].objectId},success:function(b){a.config.alertJustificationRequired=b.JustificationRequired}}))}}).data("kendoNavigationTreeView")},startPoller:function(){"use strict";var a=this,b=function(){$.ajax({url:a.config.serviceUrl+"ping/ping",timeout:a.config.ajaxPingTimeout,global:!1,success:function(c,d,e){if(!a.user.checkLogin())return a.log.sessionExpired(),!1;if(c&&c.success){var f=[],g=Date.now();g-=a.config.pollInterval/2,a.view.Alarm&&f.push(a.view.Alarm.refresh()),a.view.Notification&&f.push(a.view.Notification.refresh()),a.view.navigationTree&&f.push(a.checkChangedNavigationObjects(!0));for(var h=0,i=a.view.widgets.length;i>h;h++)a.view.widgets[h].item&&(a.view.widgets[h].item.isRefreshing||a.view.widgets[h].item.lastRefresh&&!(a.view.widgets[h].item.lastRefresh<g)||f.push(a.view.widgets[h].refresh()));$.when.apply($,f).always(function(){a.config.pollingId=window.setTimeout(b,a.config.pollInterval)})}else a.log.timeout(e)&&(a.config.pollingId=window.setTimeout(b,a.config.pollInterval))},error:function(c,d,e){switch(c.status){case 401:a.log.sessionExpired();break;case 200:App.log.checkJsonResponse(c,e,d);break;default:a.log.timeout(c)&&(a.config.pollingId=window.setTimeout(b,a.config.pollInterval))}}})};b()},stopPoller:function(){"use strict";window.clearInterval(this.config.pollingId)},checkChangedNavigationObjects:function(a){"use strict";var b=this,c=b.config.lastTreeRefresh,d=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds());return $.ajax({url:b.config.serviceUrl+"domainObjectChangeService/changes",data:{start:kendo.toString(d,b.config.dateTimeFormat)},success:function(c){c.length&&(b.config.lastTreeRefresh=new Date,$.each(c,function(c,d){var e=d.domainObjectTypeId.split(b.config.idDivider);$.ajax({url:b.config.serviceUrl+"caesarOrganizationStructure/objectHierarchy",data:{domainObjectId:e[1],domainObjectType:d.domainObjectType},success:function(c){c.reverse(),$.each(c,function(d,e){var f=b.view.navigationTree.treeview,g=f.dataSource.get(e.domainObjectType+b.config.idDivider+e.id);if(g&&d===c.length-1&&g.loaded()){var h=f.dataItem(f.select());f.dataSource.bind("change",function i(b){var c=b.node&&b.node.id;c&&(f.dataSource.unbind("change",i),c===e.domainObjectTypeId&&a&&h&&f.dataSource.get(h.id).set("selected",!0))}),g.loaded(!1),g.load()}})}})}))}})},translate:function(a,b){"use strict";var c=null,d=a;if(a&&(this.i18n&&this.i18n.phrases[a]&&(c=this.i18n.phrases[a]),null===c?this.config.debug_i18n&&this.i18n&&(-1===this.i18n.debug.nok.indexOf(a)&&this.i18n.debug.nok.push(a),d=kendo.format(this.i18n.debugFormatNOK,a)):(d=c,this.config.debug_i18n&&(-1===this.i18n.debug.ok.indexOf(a)&&this.i18n.debug.ok.push(a),d=kendo.format(this.i18n.debugFormatOK,d)))),b){var e=Array.prototype.slice.call(arguments,1);e.unshift(d),d=kendo.format.apply(null,e)}return d}};$(document).easteregg({sequence:_.map("73,78,86,69,82,84,69,68,80,89,82,65,77,73,68".split(","),_.parseInt),callback:function(){cornify_add(),$(document).keydown(cornify_add)}}),"console"in window||!function(){var a=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var b=0,c=a.length;c>b;b++)window.console[a[b]]=$.noop}(),App.dialog={template:'<div id="{0}" class="extDialog"><div class="row"><div class="col-sm-3 dialogIcon"><span class="glyphicon {1}"></span></div><div class="col-sm-9">{2}</div></div></div>',defaults:{width:303,height:150,modal:!0,visible:!1,icon:null,title:"",message:null},justification:512,iconError:"glyphicon-remove-sign",iconInfo:"glyphicon-info-sign",iconExclamation:"glyphicon-exclamation-sign",iconQuestion:"glyphicon-question-sign",idAlert:"#extAlertDialog",idOkCancel:"#extOkCancelDialog",idInput:"#extInputDialog",close:function(a){$(a).length&&$(a).data("kendoExtDialog").close()},alert:function(a){return new $.Deferred(function(b){var c=null;$(App.dialog.idAlert).length>0&&$(App.dialog.idAlert).parent().remove(),a.labelOK=a.labelOK||App.translate("OK"),a=$.extend({},App.dialog.defaults,{buttons:[{name:a.labelOK,click:function(){c.close(),b.resolve({button:"OK"})}}],icon:App.dialog.iconError,title:App.translate("Error")},a),$(document.body).append(kendo.format(App.dialog.template,App.dialog.idAlert.substr(1),a.icon,a.message));var d=$(App.dialog.idAlert);c=d.kendoExtDialog(a).data("kendoExtDialog"),d.parent().find("div.k-window-titlebar div.k-window-actions").empty(),c.center().open()})},okCancel:function(a){return new $.Deferred(function(b){var c=null;$(App.dialog.idOkCancel).length>0&&$(App.dialog.idOkCancel).parent().remove(),a.labelCancel=a.labelCancel||App.translate("Cancel"),a.labelOK=a.labelOK||App.translate("OK"),a=$.extend({},App.dialog.defaults,{buttons:[{name:a.labelCancel,click:function(){c.close(),b.resolve({button:"Cancel"})}},{name:a.labelOK,click:function(){c.close(),b.resolve({button:"OK"})}}],icon:App.dialog.iconInfo},a),$(document.body).append(kendo.format(App.dialog.template,App.dialog.idOkCancel.substr(1),a.icon,a.message));var d=$(App.dialog.idOkCancel);c=d.kendoExtDialog(a).data("kendoExtDialog"),d.parent().find("div.k-window-titlebar div.k-window-actions").empty(),d.data("kendoExtDialog").center().open()})},input:function(a){return new $.Deferred(function(b){var c=null,d=null;$(App.dialog.idInput).length>0&&$(App.dialog.idInput).parent().remove(),a.labelCancel=a.labelCancel||App.translate("Cancel"),a.labelOK=a.labelOK||App.translate("OK"),a=$.extend({},App.dialog.defaults,{buttons:[{name:a.labelCancel,click:function(){c.close(),b.resolve({button:"Cancel"})}},{name:a.labelOK,click:function(){var a=$(App.dialog.idInput+" .k-ext-input-dialog-input"),e=a.val().replace(/[^a-z0-9]/gi,"");if(c.options.required&&(0===e.length||a.val().length>App.dialog.justification)){a.addClass(c.options.requiredCss);var f="This field is required.";d&&a.parent().find(".k-tooltip").remove(),a.val().length>App.dialog.justification&&(f="Maximum limit of "+App.dialog.justification+" characters allowed. Current length is "+a.val().length+" characters."),d=a.after('<span class="k-widget k-tooltip k-tooltip-validation k-invalid-msg" data-for="name" role="alert"><span class="k-icon k-warning"> </span>'+f+"</span>")}else c.close(),b.resolve({button:"OK",input:a.val()})}}],value:"",required:!1,requiredCss:"k-ext-required",height:200,width:350},a),$(document.body).append(kendo.format('<div id="{0}" class="extDialog" style="position:relative;"><div style="display:block;margin: 15px;">{1}</div><div style="display:block;margin: 15px;"><input type="text" value="{2}" class="k-textbox k-ext-input-dialog-input" style="width:100%;"/></div></div>',App.dialog.idInput.substr(1),a.message,a.value));var e=$(App.dialog.idInput);c=e.kendoExtDialog(a).data("kendoExtDialog"),e.parent().find("div.k-window-titlebar div.k-window-actions").empty(),c.center().open()})}},kendo.ui.plugin(kendo.ui.Window.extend({buttonBarHeight:68,_buttonTemplate:kendo.template('<div class="k-ext-dialog-buttons"><div># $.each (buttons, function (idx, button) { #<button class="btn btn-default">#= button.name #</button># }) # </div></div>'),_contentTemplate:kendo.template('<div class="k-ext-dialog-content" style="height:#= parseInt(height) - buttonBarHeight #px; width:#= parseInt(width) #px;">'),init:function(a,b){function c(){var a=this.wrapper,b=this.element;a.find("a[role='button']  > .k-i-close").length>0&&(a.find("a[role='button']  > .k-i-close").text(""),a.find("a[role='button']  > .k-i-close").parent().prop("tabindex",0)),$(document).on("keyup.kendoWindow",function(c){var d=$(document.activeElement);c.keyCode!=kendo.keys.ENTER&&c.keyCode!=kendo.keys.SPACEBAR||!d.is(b)||e.close(),c.keyCode==kendo.keys.TAB&&c.shiftKey&&(a.find("a[role='button'] > .k-i-close").length>0?d.is(a.find("a[role='button'] > .k-i-close").parent())&&a.find(":input:enabled:last").focus():d.is(b)&&a.find(":input:enabled:last").focus())}),$(document).on("keydown.kendoWindow",function(c){var d=$(document.activeElement);c.keyCode==kendo.keys.TAB&&(a.find("a[role='button']  > .k-i-close").length>0?!c.shiftKey&&d.is(a.find(":input:enabled:last"))&&a.find("a[role='button']  > .k-i-close").parent().focus():(!c.shiftKey&&d.is(a.find(":input:enabled:last"))&&b.focus(),c.shiftKey&&d.is(b)&&a.find(":input:enabled:last").focus()))})}function d(){$(document).off("keyup.kendoWindow"),$(document).off("keydown.kendoWindow")}var e=this;b.visible=b.visible||!1,b.buttonBarHeight=b.buttonBarHeight||this.buttonBarHeight,b.open=function(){var a=this.wrapper.find("div.k-window-titlebar"),b=a.outerHeight();this.wrapper.css("padding-top",b),a.css("margin-top",-b)},b.activate=c,b.close=d,$.isArray(b.actions)||(b.actions=["Close glyphicon glyphicon glyphicon-remove"]),kendo.ui.Window.fn.init.call(e,a,b),e.wrapper.addClass("k-ext-dialog"),$(e.wrapper.find(".k-window-action")).removeAttr("href");var f=$(a).html();$(a).html(e._contentTemplate(b)),$(a).find("div.k-ext-dialog-content").append(f),$(a).after(e._buttonTemplate(b)),$.each(b.buttons,function(b,c){var d=$($(a).parent().find(".k-ext-dialog-buttons .btn")[b]);c.click&&d.on("click",{handler:c.click},function(a){a.data.handler({button:this,dialog:e})}),c.action&&d.attr("data-action",c.action),c.loadingText&&d.attr("data-loading-text",c.loadingText)}),e.bind("resize",function(){e.resizeDialog()})},resizeDialog:function(){var a=this,b=$(a.element),c=b.width(),d=b.height();b.parent().find(".k-ext-dialog-content").width(c).height(d-a.buttonBarHeight)},options:{name:"ExtDialog"}})),App.application={handlersInstalled:!1,alarmBarAnimDuration:200,alarmBarVisible:!0,resizeHandler:$.noop,show:function(){"use strict";App.view.elFooter.find("#copyrights-text").html(App.translate(App.config.copyrights)),App.view.elContent.show(),App.view.elFooter.show(),this.handlersInstalled||this.installHandlers()},hide:function(){"use strict";App.view&&App.view.elContent&&App.view.elContent.hide(),App.view&&App.view.elFooter&&App.view.elFooter.hide()},toggleAlarmBar:function(a){"use strict";var b=$(".alerts");this.alarmBarVisible=a,a?(b.slideDown(this.alarmBarAnimDuration,this.resizeHandler),$(".alarmbar-collapse-button .icon-collapse").css("background-position","top left")):(b.slideUp(this.alarmBarAnimDuration,this.resizeHandler),$(".alarmbar-collapse-button .icon-collapse").css("background-position","bottom left"))},installHandlers:function(){"use strict";var a=this;this.resizeHandler=function(){var b=App.view;if(b.alarmBar&&(a.alarmBarVisible?$("#content-wrap > .container").css({"padding-top":b.menuBar.outerHeight()+b.alarmBar.outerHeight()+1}):$("#content-wrap > .container").css({"padding-top":b.menuBar.outerHeight()+24})),b.navigationTree){var c=b.navigationTree.element.closest(".widget-content"),d=0;b.favoritesTree&&(d=b.favoritesTree.element.closest(".widget").height());var e=$("body").innerHeight()-b.navigationArea.position().top-d-112;c.css("max-height",e)}},$(window).resize(this.resizeHandler),$(window).on("offline",function(){App.log.add("Browser is offline.")}),$(window).on("online",function(){App.log.add("Browser is online.")}),$(".alarmbar-collapse").on("click",function(){a.toggleAlarmBar(!$(".alerts").is(":visible"))});var b=$("#menu-layout > .dropdown-menu div.menu-column-header-icon");b.length&&b.on("click",function(){b.removeClass("selected"),$(this).addClass("selected");var c=App.view;switch($(this).data("layout")){case 1:a.toggleAlarmBar(!0),c.navigationArea.removeClass("hidden"),c.sideBar.removeClass("hidden"),c.mainArea.removeClass("col-sm-9 col-sm-10 col-sm-12").addClass("col-sm-7 col-sm-offset-2");break;case 2:a.toggleAlarmBar(!0),c.navigationArea.removeClass("hidden"),c.sideBar.addClass("hidden"),c.mainArea.removeClass("col-sm-7 col-sm-9 col-sm-12").addClass("col-sm-10 col-sm-offset-2");break;case 3:a.toggleAlarmBar(!0),c.navigationArea.addClass("hidden"),c.sideBar.removeClass("hidden"),c.mainArea.removeClass("col-sm-7 col-sm-10 col-sm-12 col-sm-offset-2").addClass("col-sm-9");break;case 4:a.toggleAlarmBar(!0),c.navigationArea.addClass("hidden"),c.sideBar.addClass("hidden"),c.mainArea.removeClass("col-sm-7 col-sm-9 col-sm-10 col-sm-offset-2").addClass("col-sm-12");break;case 5:a.toggleAlarmBar(!1),c.navigationArea.removeClass("hidden"),c.sideBar.removeClass("hidden"),c.mainArea.removeClass("col-sm-9 col-sm-10 col-sm-12").addClass("col-sm-7 col-sm-offset-2");break;case 6:a.toggleAlarmBar(!1),c.navigationArea.addClass("hidden"),c.sideBar.addClass("hidden"),c.mainArea.removeClass("col-sm-7 col-sm-9 col-sm-10 col-sm-offset-2").addClass("col-sm-12")}c.mainArea.find(".widget:visible").each(a.widgetIterator),c.sideBar.find(".widget:visible").each(a.widgetIterator)}),$(".themes a").on("click",function(a){a.preventDefault(),App.util.setTheme($(this).data("theme"))}),$('[data-action="widget-catalog"]').on("click",function(a){return a.preventDefault(),App.router.navigate("/widgetcatalog"),!1}),$('[data-action="main-legal-notice"]').on("click",function(){return App.router.navigate("/about"),!1}),App.config.user.loginName&&$("#userName").text(App.config.user.loginName),$('[data-action="user-settings"]').on("click",function(a){a.preventDefault(),App.cmd.edit("user",App.config.user.id,"account")}),$('[data-action="logout"]').on("click",function(a){a.preventDefault(),App.user.logout()}),$('[data-action="home"]').on("click",function(a){return a.preventDefault(),App.router.routeHome(),!1}),$.fn.tooltip.Constructor.DEFAULTS.placement="auto",$("body").on("click contextmenu",'[data-action="refmenu"]',function(b){b.preventDefault();var c=$(this),d={id:c.data("objecttype")+App.config.idDivider+c.data("id"),domainObjectType:c.data("objecttype"),name:c.data("label"),parentNode:null},e=$("#context-menu");return 0===e.length&&(e=$("<div>",{id:"context-menu"}).appendTo("body")),$.ajax({url:App.config.serviceUrl+"action/contextMenu",data:{object_type:c.data("objecttype"),object_id:c.data("id")},success:function(f){if(f.data.length){for(var g=[],h=0,i=f.data[0].items.length;i>h;h++){var j=null,k=f.data[0].items[h];if(k.items&&k.items.length>0){j=[];for(var l=0,m=k.items.length;m>l;l++)j.push(a.getMenuItem(k.items[l],null,d,c));g.push(a.getMenuItem(k,j,d,c))}else k.action&&g.push(a.getMenuItem(k,j,d,c))}var n=e.kendoMenuEx({dataSource:g,anchor:c,offsetY:b.pageY}).data("kendoMenuEx");n.show(c,b)}}}),!1}).on("click",'[data-action="widget-toggle-minimize"]',a.widgetToggleMinimize).on("click",'[data-action="widget-settings"]',a.widgetSettings).on("click",'[data-action="widget-new-window"]',a.widgetNewWindow).on("click",'[data-action="widget-print"]',a.widgetPrint).tooltip({selector:'[data-toggle="tooltip"],[data-toggle="dropdown"][title]',container:"body"}),App.view.navigationArea&&(App.view.navigationArea.tooltip({selector:'[data-toggle="tooltip-horizontal"]',container:"body",placement:"right"}),App.view.navigationArea.find(".widget-content").on("mousewheel",function(a,b){var c=$(this);b>0&&0===c.scrollTop()?a.preventDefault():0>b&&c.scrollTop()===c.get(0).scrollHeight-c.innerHeight()&&a.preventDefault()}));var c=$("#search-main");c.keyup(App.application.doFullsearch),c.keydown(App.application.doKeyNavigation),$(".search > .glyphicon-search").on("click",function(a){App.application.doFullsearch(a),_.eq($("#search-main").val().toLowerCase(),"do the harlem shake")&&doTheHarlemShake()}),$(".search > .glyphicon-remove").on("click",function(){$(".search-results").addClass("hidden"),$(this).hide(),c.val("")}),""===c.val()&&$(".search > .glyphicon-remove").hide(),$("#menu-menu").on("click",function(){App.view.menu&&App.view.menu.refreshActionsMenu()}),$("#mainArea, #sideBar").sortable({connectWith:".draggable",placeholder:"widget ui-state-highlight",handle:".widget-header",tolerance:"pointer",cursorAt:{left:50},start:function(a,b){var c=$(b.item);c.addClass("widget-drag"),c.css("width",241),c.find(".widget-content").hide()},stop:function(b,c){var d=$(c.item),e=d.data("widget");e&&(e.config.isTemporary?e.config.location=d.parent().attr("data-location"):d.parent().find(".widget:visible").each(function(){var a=$(this).data("widget");a&&(a.config.isTemporary||(a.update({location:$(this).parent().attr("data-location"),positionNumber:$(this).parent().children().not(":hidden").index($(this))+""}),App.config.widgets[a.config.objectType]=null))})),d.removeClass("widget-drag"),d.find(".widget-content").show(),e&&e.onDrop&&e.onDrop(),a.widgetIterator(null,d)}}),this.handlersInstalled=!0},getMenuItem:function(a,b,c,d){"use strict";var e=d||null,f=this,g=a.action?a.action.enabled:!0,h=a.action?a.action.oneclick:!0,i=a.action?a.action.description:"",j={enabled:g,text:kendo.format('<span data-toggle="tooltip" title="{0}">{1}</span>',i,App.translate(a.name)+(h?"":"&hellip;")),encoded:!1,action:a.action};return b&&(j.items=b),g&&(j.click=function(){var b=null,d=null,g=null;if(a.action){if(!a.action.enabled)return;a.action.id&&(b=a.action.id),a.action.service&&(d=a.action.service.replace("service/",App.config.serviceUrl)),"command"===a.category&&(b=a.category,g=a.action.id),"updateDomainObject"!==a.category&&"addDomainObject"!==a.category&&"deleteDomainObject"!==a.category&&"domainObjectBatchUpload"!==a.category||(b=a.category)}var h=c.id.split(App.config.idDivider),i=h[1];switch(b){case"open":App.cmd.show(c.domainObjectType,i,c.name);break;case"favorite_add":$.ajax({url:App.config.serviceUrl+"caesarUserFavoriteAssetService/createFavoriteForUser",data:{userId:App.config.user.id,domainObjectType:c.domainObjectType,domainObjectId:i},success:function(){}});break;case"favorite_delete":$.ajax({url:App.config.serviceUrl+"caesarUserFavoriteAssetService/deleteFavoriteForUser",data:{userId:App.config.user.id,domainObjectType:c.domainObjectType,domainObjectId:i},success:function(){}});break;case"command":var j={domainObjectType:c.domainObjectType,domainObjectId:i,commandId:g};a.action.requiresJustification?$.when(App.dialog.okCancel({title:App.translate("Execute Command"),height:180,minWidth:270,width:450,message:App.translate("Are you sure you want to execute {0}?",a.name),labelCancel:App.translate("No"),labelOK:App.translate("Execute"),icon:App.dialog.iconQuestion})).done(function(a){"OK"===a.button&&$.when(App.dialog.input({title:App.translate("Requires Justification"),message:App.translate("This Asset command requires a justification. Please enter a justification below"),required:!0})).done(function(a){"OK"===a.button&&(j.justification=a.input,f.onCommandSendClick(j))})}):a.action.requiresConfirmation?$.when(App.dialog.okCancel({title:App.translate("Execute Command"),height:180,minWidth:270,width:450,message:App.translate("Are you sure you want to execute {0}?",a.name),labelCancel:App.translate("No"),labelOK:App.translate("Execute"),icon:App.dialog.iconQuestion})).done(function(a){"OK"===a.button&&f.onCommandSendClick(j)}):f.onCommandSendClick(j);break;case"updateDomainObject":c.parentNode&&(App.current.treeRefreshNode=c.parentNode()),App.cmd.edit(c.domainObjectType,i,c.name);break;case"addDomainObject":App.current.treeRefreshNode=c,App.cmd.create(c.domainObjectType,i,a.action.parameters[0].value);break;case"deleteDomainObject":var k=null;c.parentNode&&(k=c.parentNode().id.split(App.config.idDivider)),App.cmd.destroy(c.domainObjectType,i,c.name,function(){k&&(App.view.navigationTree&&App.view.navigationTree.treeview.remove(e),App.cmd.show(c.parentNode().domainObjectType,k[1]))});break;case"domainObjectBatchUpload":App.router.navigate(kendo.format("/{0}/{1}/{2}/batchcreate",c.domainObjectType,i,a.action.parameters[0].value))}}),j},onCommandSendClick:function(a){"use strict";$.ajax({url:App.config.serviceUrl+"caesarAssetCommand/executeCommand",data:a,success:function(b){var c=b.success?App.translate("Asset Command sent."):App.translate("Asset Command not sent.");App.dialog.alert({title:App.translate("Command"),message:c,icon:b.success?App.dialog.iconInfo:App.dialog.iconExclamation}),App.log.add(c,a)}})},doKeyNavigation:function(a){var b,c=$(".search-results li"),d=c.filter(".selected");if("Down"===a.key||"Up"===a.key)if(0===d.length)b=c.first();else for(var e=0,f=c.length;f>e;e++){var g=$(c[e]);if(g.hasClass("selected")){g.removeClass("selected"),"Down"===a.key?b=$(c[e+1]):"Up"===a.key&&(b=0>e-1?c.last():$(c[e-1]));break}}else if("Enter"===a.key)return void(d.length>0&&(d.trigger("click"),$(".search-results").addClass("hidden")));b&&(b.addClass("selected"),b.scrollintoview({direction:"vertical",duration:1}))},doFullsearch:function(a){if(!a||"Down"!==a.key&&"Up"!==a.key&&"Enter"!==a.key){var b=$("#search-main").val().toLowerCase(),c=$(".search > .glyphicon-remove");0===b.length?(c.hide(),$(".search-results").addClass("hidden")):c.show(),a&&"Esc"===a.key?($(".search-results").addClass("hidden"),c.hide(),$(a.target).val("")):b.length>2&&$.ajax({url:App.config.serviceUrl+"caesarOrganizationStructure/find",data:{domainObjectName:b},success:function(a){var b="",c="";
if(a.length){$.each(a,function(a,d){b!==d.domainObjectType&&(""!==b&&(c+="</ul></td></tr>"),b=d.domainObjectType,c+="<tr>",c+='<td class="category">'+App.util.format.domainObjectType(b)+"</td>",c+='<td class="search-dropdown-items">',c+="<ul>"),c+=kendo.format('<li data-id="{0}" data-objectType="{1}">',d.id,b),c+=kendo.format('<span class="k-sprite ao-16px {0}"></span> ',App.util.format.domainObjectTypeIcon(b)),c+=d.name,c+="</li>"}),""!==c?c+="</ul></td></tr>":c='<tr><td class="search-dropdown-items">'+App.translate("No results.")+"</td></tr>";var d=$("#search-results");d.html(c),$(".search-results").removeClass("hidden"),d.css("max-height",$("body").innerHeight()-d[0].offsetTop-20),d.find(".search-dropdown-items li").click(function(a){var b=$(a.target);$(".search-results").addClass("hidden"),App.cmd.show(b.attr("data-objectType"),b.attr("data-id"),b.text())})}else $(".search-results").addClass("hidden")}})}},widgetIterator:function(a,b){"use strict";var c=$(b).data("widget");c&&c.item&&$.isFunction(c.item.resize)&&c.item.resize()},widgetPrint:function(){"use strict";var a=$(this),b=a.closest(".widget"),c=b.data("widget"),d=b.find(".widget-content"),e=a.closest(".widget-header").text();if("map"===c.config.widgetType)return void c.item.controller.onMapsPrintRequested();var f=window.open("","PrintWindow"),g="<html><head><title>"+e+'</title><link rel="stylesheet" href="css/bootstrap.min.css"><link rel="stylesheet" href="css/kendo/kendo.common.min.css"><link rel="stylesheet" href="dist/app.css"><link rel="stylesheet" href="dist/theme-'+App.config.theme+'.css"></head><body>'+$(d).html()+"</body></html>";f.document.write(g),f.document.close(),f.focus(),$(f.document).ready(function(){setTimeout(function(){f.print(),f.close()},30)})},widgetSettings:function(){"use strict";var a=$(this).closest(".widget").data("widget");a&&a.config&&(App.router&&App.router.navigate("/editwidget"),App.view.wizardWidget=new App.ui.WizardWidget({myId:a.config.id,data:a.config,domainObjectType:a.config.objectType,parentRef:null,routeOnClose:!1}),App.view.wizardWidget.show())},widgetNewWindow:function(){"use strict";var a=$(this).closest(".widget").data("widget");a&&a.config&&(a.config.ids?App.cmd.openAlarmMap(a.config.objectType,a.config.domainObjectId,a.config.ids,a.config.name):App.cmd.open(a.config.objectType,a.config.domainObjectId,a.config.objectName,a.config.id))},widgetToggleMinimize:function(){"use strict";var a=$(this),b=a.closest(".widget").find(".widget-content");b.slideToggle(400,function(){b.is(":hidden")?a.toggleClass("glyphicon-minus",!1).toggleClass("glyphicon-plus",!0).attr("title",App.translate("Restore widget")).tooltip("fixTitle"):a.toggleClass("glyphicon-minus",!0).toggleClass("glyphicon-plus",!1).attr("title",App.translate("Minimize widget")).tooltip("fixTitle")})}},App.cmd={show:function(a,b,c){"use strict";App.router&&(c?App.router.navigate(kendo.format("/{0}/{1}/show/{2}",a,b,App.router.encodeParam(c))):App.router.navigate(kendo.format("/{0}/{1}",a,b)))},open:function(a,b,c,d){"use strict";var e=window.location.search.length?"&":"?",f=window.open(document.location.pathname+document.location.search+e+kendo.format("fs=1#!/{0}/{1}/show/{2}/{3}",a,b,App.router.encodeParam(c),d),"_blank");return f?f.focus():App.log.error(App.translate("You need to enable popups for this site."),null,!0),f},openAlarmMap:function(a,b,c,d){"use strict";$.isArray(c)&&(c=c.join());var e=window.location.search.length?"&":"?",f=window.open(document.location.pathname+document.location.search+e+kendo.format("fs=1#!/{0}/{1}/alarmmap/{2}/{3}",a,b,c,App.router.encodeParam(d)),"_blank");return f?f.focus():App.log.error(App.translate("You need to enable popups for this site."),null,!0),f},edit:function(a,b,c){"use strict";App.router&&(c?App.router.navigate(kendo.format("/{0}/{1}/edit/{2}",a,b,App.router.encodeParam(c))):App.router.navigate(kendo.format("/{0}/{1}/edit",a,b)))},create:function(a,b,c){"use strict";App.router&&App.router.navigate(kendo.format("/{0}/{1}/{2}/create",a,b,c))},destroy:function(a,b,c,d){"use strict";$.isFunction(d)||(d=$.noop);var e=App.translate("Delete {0}",App.util.format.domainObjectType(a));$.when(App.dialog.okCancel({title:e,message:App.translate('Are you sure you want to delete "{0}"?',c),labelOK:e,minWidth:270,width:470,height:190,icon:App.dialog.iconQuestion})).done(function(c){"OK"===c.button&&$.ajax({url:App.config.serviceUrl+"generalAdmin/deleteObject",data:{objectType:a,objectId:b},success:d})})}},App.i18n={phrases:{},cultures:{ar:"Arabic",en:"English",fr:"French",es:"Spanish","ar-DZ":"Arabic - Algeria","ar-BH":"Arabic - Bahrain","ar-EG":"Arabic - Egypt","ar-IQ":"Arabic - Iraq","ar-JO":"Arabic - Jordan","ar-KW":"Arabic - Kuwait","ar-LB":"Arabic - Lebanon","ar-LY":"Arabic - Libya","ar-MA":"Arabic - Morocco","ar-OM":"Arabic - Oman","ar-QA":"Arabic - Qatar","ar-SA":"Arabic - Saudi Arabia","ar-SY":"Arabic - Syria","ar-TN":"Arabic - Tunisia","ar-AE":"Arabic - United Arab Emirates","ar-YE":"Arabic - Yemen","en-AU":"English - Australia","en-BZ":"English - Belize","en-CA":"English - Canada","en-HK":"English - Hong Kong","en-IE":"English - Ireland","en-IN":"English - India","en-JM":"English - Jamaica","en-MY":"English - Malaysia","en-NZ":"English - New Zealand","en-PH":"English - Philippines","en-SG":"English - Singapore","en-ZA":"English - South Africa","en-TT":"English - Trinidad and Tobago","en-GB":"English - United Kingdom","en-US":"English - United States","en-ZW":"English - Zimbabwe","fr-BE":"French - Belgium","fr-CM":"French - Cameroon","fr-CA":"French - Canada","fr-CD":"French - Congo","fr-FR":"French - France","fr-HT":"French - Haiti","fr-CI":"French - Ivory Coast","fr-LU":"French - Luxembourg","fr-ML":"French - Mali","fr-MA":"French - Morocco","fr-MC":"French - Principality of Monaco","fr-RE":"French - Réunion","fr-SN":"French - Senegal","fr-CH":"French - Switzerland","de-AT":"German - Austria","de-DE":"German - Germany","de-LI":"German - Liechtenstein","de-LU":"German - Luxembourg","de-CH":"German - Switzerland","es-AR":"Spanish - Argentina","es-BO":"Spanish - Bolivia","es-CL":"Spanish - Chile","es-CO":"Spanish - Colombia","es-CR":"Spanish - Costa Rica","es-DO":"Spanish - Dominican Republic","es-EC":"Spanish - Ecuador","es-SV":"Spanish - El Salvador","es-GT":"Spanish - Guatemala","es-HN":"Spanish - Honduras","es-MX":"Spanish - Mexico","es-NI":"Spanish - Nicaragua","es-PA":"Spanish - Panama","es-PY":"Spanish - Paraguay","es-PE":"Spanish - Peru","es-PR":"Spanish - Puerto Rico","es-ES":"Spanish - Spain","es-US":"Spanish - United States","es-UY":"Spanish - Uruguay","es-VE":"Spanish - Venezuela"},rtl:!1,debugFormatOK:"*{0}*",debugFormatNOK:"[[{0}]]",load:function(a,b){"use strict";var c=this,d="dist/locales/"+a+".min.json";$.ajax({dataType:"json",url:d,method:"GET",success:function(a){a.phrases&&(c.phrases=a.phrases),c.rtl="rtl"===a.direction,$.isFunction(b)&&b()}})},update:function(a,b){"use strict";var c=function(){kendo.culture(a),$("[data-phrase]").each(function(){$(this).text(App.translate($(this).attr("data-phrase")))}),$("[title]").each(function(){$(this).attr("title",App.translate($(this).attr("title")))}),$("[placeholder]").each(function(){$(this).data("placeholder")||$(this).data("placeholder",$(this).attr("placeholder"));var a=$(this).data("placeholder");$(this).attr("placeholder",App.translate(a))}),$("[validationMessage]").each(function(){$(this).data("validationMessage")||$(this).data("validationMessage",$(this).attr("validationMessage"));var a=$(this).data("validationMessage");$(this).attr("validationMessage",App.translate(a))}),$.each(App.util.forms.validator.messages,function(a,b){App.util.forms.validator.messages[a]=App.translate(b)}),App.i18n.rtl?($("body").addClass("k-rtl"),App.view.navigationArea.data("bs.tooltip")._options.placement="left",$("head").append('<link href="dist/rtl.css" rel="stylesheet" id="rtl">')):($("body").removeClass("k-rtl"),$("head link#rtl").prop("disabled",!0)),$.isFunction(b)&&b()};a&&!kendo.cultures.hasOwnProperty(a)?$.ajax({url:"js/lib/kendo/cultures/kendo.culture."+a+".min.js",complete:c,dataType:"script",type:"GET"}):c()},translateContent:function(a){"use strict";return a.find("[data-phrase]").each(function(){$(this).text(App.translate($(this).attr("data-phrase")))}),a.find("[title]").each(function(){$(this).attr("title",App.translate($(this).attr("title")))}),a.find("[placeholder]").each(function(){$(this).data("placeholder")||$(this).data("placeholder",$(this).attr("placeholder"));var a=$(this).data("placeholder");$(this).attr("placeholder",App.translate(a))}),a.find("[validationMessage]").each(function(){$(this).data("validationMessage")||$(this).data("validationMessage",$(this).attr("validationMessage"));var a=$(this).data("validationMessage");$(this).attr("validationMessage",App.translate(a))}),a},debug:{nok:[],ok:[],show:function(a){"use strict";var b=[],c="";switch(a){case"ok":c='"ok" - translations found',b=App.i18n.debug.ok;break;case"nok":c='"nok" - translations not found',b=App.i18n.debug.nok;break;default:case"all":c='"all" - translations used',b=App.i18n.debug.ok.concat(App.i18n.debug.nok)}b.sort();for(var d="<ul>",e=0,f=b.length;f>e;e++)d+="<li>"+b[e]+"</li>";d+="</ul>";var g=$("<div>",{id:"i18n-log",html:d}),h=g.kendoWindow({width:300,height:App.config.widgetHeight,title:c,visible:!1,actions:["Pin","Minimize","Maximize","Close"]}).data("kendoWindow");h.center().open()}},addControls:function(a){var b=!1;switch(a.id){case"culture":a.availableValues=[],$.each(this.cultures,function(b,c){a.availableValues.push({baseValue:b,displayValue:App.translate(c)})}),b=!0;break;case"measurementSystem":a.availableValues=[{baseValue:"metric",displayValue:App.translate("Metric")},{baseValue:"US",displayValue:App.translate("US")}],b=!0}return b},addPreview:function(a,b){for(var c={language:null,culture:null,measurementSystem:null,timeZone:null},d=0;d<b.length;d++){var e=b[d].config.id;c.hasOwnProperty(e)&&(c[e]={el:b[d].el,current:App.config.user[e],original:App.config.user[e]})}c.timeZone.current=App.config.user.timeZoneOffset,c.timeZone.original=App.config.user.timeZoneOffset;var f=new Date;App.util.dateToGMT(f);var g={date:{label:"Date",type:"date",value:kendo.toString(f,App.config.dateFormat)},dateTime:{label:"DateTime",type:"dateTime",value:kendo.toString(f,App.config.dateTimeFormat)},duration:{label:"Duration",type:"duration",value:7600},number:{label:"Number",type:"numeric",value:1234.567},decimal:{label:"Decimal",type:"decimal",value:1234.567},distance:{label:"Distance",unitType:"distance",type:"decimal",value:1234.567},temperature:{label:"Temperature",unitType:"temperature",type:"decimal",value:1234.567},volume:{label:"Volume",unitType:"volume",type:"decimal",value:1234.567}},h=$("<dl>",{"class":"dl-horizontal"}).appendTo(a);$.each(g,function(a,b){h.append("<dt>"+App.translate(b.label)+'</dt><dd data-id="i18n-'+a+'"></dd>')});var i=function(){$.each(c,function(a,b){"timeZone"===a?b.current=parseInt(b.el.element.dataItem().offset):$.isFunction(b.el.element.value)?b.current=b.el.element.value():b.current=b.el.element.value});var b=function(){kendo.culture(c.culture.current),App.config.user.measurementSystem=c.measurementSystem.current,App.config.user.timeZoneOffset=c.timeZone.current,$.each(g,function(b,c){a.find("[data-id=i18n-"+b+"]").html(App.util.format.item(c))}),kendo.culture(c.culture.original),App.config.user.measurementSystem=c.measurementSystem.original,App.config.user.timeZoneOffset=c.timeZone.original};c.culture.current&&!kendo.cultures.hasOwnProperty(c.culture.current)?$.ajax({url:"js/lib/kendo/cultures/kendo.culture."+c.culture.current+".min.js",complete:b,dataType:"script",type:"GET"}):b()};c.language.el.element.bind("change",i),c.culture.el.element.bind("change",i),c.measurementSystem.el.element.bind("change",i),c.timeZone.el.element.bind("change",i),i()}},App.log={data:[],add:function(a,b){"use strict";var c={ts:Date.now(),msg:a,route:App.router.getCurrentRoute()};b&&(c.data=b),App.log.data.push(c),App.config.errorLevel<=1&&App.log.send()},error:function(a,b,c){"use strict";c&&App.dialog.alert({message:a}),App.log.add(a,b)},timeout:function(a){"use strict";var b=!1;return App.config.errorLevel>1?App.log.emergencyEject(a):(App.log.add("Timeout",a),b=!0),b},checkJsonResponse:function(a,b,c){"use strict";App.config.errorLevel>0&&("SyntaxError"===b.name&&a.responseText.length?App.log.error(App.translate("Internal Server Error: The response contains invalid JSON code."),c,!0):App.log.emergencyEject(a))},sessionExpired:function(){"use strict";return App.log.add("sessionExpired"),App.ui.login.dialog&&App.ui.login.dialog.element.length>0?!1:void $.when(App.dialog.alert({message:App.translate("You are not logged in.")})).done(function(){var a=App.router.getCurrentRoute();App.user.removeSession(),App.application.hide(),""===a||0===a.indexOf(App.config.routeLogin)?App.router.navigate("/"):App.router.navigate(App.config.routeLogin+"?r="+a)})},emergencyEject:function(a){"use strict";App.log.add("emergencyEject",a),$.when(App.dialog.okCancel({title:App.translate("No connection"),message:App.translate('The server could not be reached. Please check your internet connection.<br>If the problem persists, please contact <a href="mailto:{0}">helpdesk</a>.',App.config.mailHelpdesk),height:240,labelCancel:App.translate("Try to continue"),labelOK:App.translate("Try to login")})).done(function(a){if("OK"===a.button){var b=App.router.getUrlParams();App.user.removeSession(),window.location=window.location.pathname+"?"+$.param(b)}else window.location.reload(!0)})},send:function(){"use strict";var a,b={userId:App.config.user.id,sessionId:App.config.sessionId,items:[]},c=this,d=[],e=null,f=Date.now();for(a=0;a<c.data.length;a++)c.data[a].sent||(c.data[a].sent=f,d.push(a));if(d.length){for(a=0;a<d.length;a++)e=c.data[d[a]],b.items.push({ts:new Date(e.ts).toISOString(),msg:e.msg,data:e.data,route:e.route});b.items=JSON.stringify(b.items),$.ajax({url:App.config.logUrl,global:!1,data:b,success:function(){},error:function(a){if(200!==a.status&&"OK"!==a.statusText)for(var b=0,e=d.length;e>b;b++)delete c.data[d[b]].sent}})}}},App.router={jqXHRs:[],lastRoute:"__no_route__",currentRoute:"",init:function(){"use strict";var a=(new Date).getTime(),b=new kendo.Router({hashBang:!0}),c=!1;$(window).on("hashchange."+a,function(){var a=App.router.getCurrentRoute();a&&"#"!==a&&"#!"!==a&&"#!/"!==a||(a=kendo.format("/{0}/{1}/show/{2}",App.current.objectType,App.current.objectId,App.router.encodeParam(App.current.objectName))),a!=App.router.currentRoute&&(App.router.lastRoute=App.router.currentRoute,App.router.currentRoute=a)}),b.route("/home",this.routeHome),b.route(App.config.routeLogin,this.routeLogin),b.route("/logout",App.user.doLogout),b.route("/widgetcatalog",this.routeWidgetCatalog),b.route("/about",this.routeAbout),b.route("/jobcard/:objectId(/lon/:longitude/lat/:latitude)",this.routeJobCard),b.route("/:parentObjectType/:parentObjectId/:objectType/create",this.routeCreateObject),b.route("/:parentObjectType/:parentObjectId/:objectType/batchcreate",this.routeBatchCreateObject),b.route("/:objectType/:objectId/report/:reportId",this.routeReport),b.route("/:objectType/:objectId/edit(/:objectName)",this.routeEditObject),b.route("/:objectType/:objectId/show/:objectName(/:widgetId)",this.routeContent),b.route("/:objectType/:objectId/alarmmap/:ids/:objectName",this.routeAlarmMap),b.route("/:objectType/:objectId",this.routeContent),b.route("/",this.routeDummy),this.navigate=function(a){c&&b.navigate(a)},this.start=function(){c||(b.start(),c=!0)},this.destroy=function(){b.destroy(),c=!1},this.closeOpenWizardsAndDialogs=function(){App.view.wizardAdmin&&(App.view.wizardAdmin.destroy(),App.view.wizardAdmin=null),App.view.widgetCatalog&&(App.view.widgetCatalog.destroy(),App.view.widgetCatalog=null),App.view.BatchUpload&&(App.view.BatchUpload.destroy(),App.view.BatchUpload=null),App.view.wizardReport&&(App.view.wizardReport.destroy(),App.view.wizardReport=null),App.view.aboutWindow&&(App.view.aboutWindow.dialog.destroy(),App.view.aboutWindow=null),App.view.wizardWidget&&(App.view.wizardWidget.destroy(),App.view.wizardWidget=null)}},ajaxClear:function(){this.jqXHRs.length&&(this.jqXHRs.map(function(a){a&&4!==a.readyState&&0!==a.readyState&&(a.abort(),a=null)}),this.jqXHRs=[])},isHeadless:function(){return"1"===App.router.getUrlParameterByName("fs")||0===document.location.hash.indexOf("#!/jobcard")},getCurrentRoute:function(){return window.location.hash.slice(2)},checkRoute:function(){return App.router.currentRoute!=App.router.lastRoute},getUrlParams:function(){"use strict";var a={};if(window.location.search.length)for(var b,c=window.location.search.slice(1).split("&"),d=0,e=c.length;e>d;d++)b=c[d].split("="),b.length>1&&(a[b[0]]=decodeURIComponent(b[1]));return a},getUrlParameterByName:function(a){"use strict";var b=new RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))},encodeParam:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},decodeParam:function(a){return"string"==typeof a?decodeURIComponent(a.replace(/\+/g," ")):a},routeDummy:function(){"use strict";App.router.closeOpenWizardsAndDialogs(),App.util.updateBreadcrumb("")},routeHome:function(){"use strict";App.router.closeOpenWizardsAndDialogs(),App.router.navigate("/"),window.location.reload()},routeCreateObject:function(a,b,c){"use strict";App.router.checkRoute()&&(App.router.closeOpenWizardsAndDialogs(),App.view.wizardAdmin=new App.ui.WizardAdmin({objectType:c,parentObjectType:a,parentObjectId:b}),App.view.wizardAdmin.show())},routeBatchCreateObject:function(a,b,c){"use strict";App.router.checkRoute()&&(App.router.closeOpenWizardsAndDialogs(),App.view.BatchUpload=new App.ui.BatchUpload({objectType:c,parentObjectType:a,parentObjectId:b}),App.view.BatchUpload.show())},routeEditObject:function(a,b,c){"use strict";App.router.checkRoute()&&(App.router.closeOpenWizardsAndDialogs(),c&&(c=App.router.decodeParam(c)),App.view.wizardAdmin=new App.ui.WizardAdmin({objectType:a,objectId:b,label:c||null}),App.view.wizardAdmin.show())},routeReport:function(a,b,c){"use strict";App.router.checkRoute()&&(App.router.closeOpenWizardsAndDialogs(),App.view.wizardReport=new App.ui.WizardReport({reportId:c,objectType:a,objectId:b}),App.view.wizardReport.show(),App.util.updateBreadcrumb(c))},routeWidgetCatalog:function(){"use strict";App.router.checkRoute()&&(App.router.closeOpenWizardsAndDialogs(),App.view.widgetCatalog=new App.ui.WidgetCatalog({}),App.view.widgetCatalog.show(),App.updateCurrent({objectName:null}),App.util.updateBreadcrumb(App.translate("Widget Catalog")))},routeAbout:function(){"use strict";App.router.closeOpenWizardsAndDialogs(),App.view.aboutWindow=new App.ui.AboutWindow({}),App.util.updateBreadcrumb(App.translate("About"))},routeJobCard:function(a,b,c){"use strict";if(App.router.checkRoute()){App.router.closeOpenWizardsAndDialogs(),App.current.routing=!0;var d=kendo.template('<div id="#=id#" class="panel panel-primary" style="#=style#"><div class="panel-heading"><h3 class="panel-title">#=title#</h3></div>#=content#</div>'),e=$("body");e.empty().css({height:"auto","font-size":"14px",margin:"15px 40px 15px 15px"}).html(d({id:"mobile-jobcard",style:"",title:"JobCard "+a,content:'<table class="table"></table><div class="panel-body"><div class="pull-right"><button type="button" class="btn btn-danger" data-action="job-action" data-actiontype="cancelJob">'+App.translate("Cancel Jobs")+'</button> <button type="button" class="btn btn-success" data-action="job-action" data-actiontype="completeJob">'+App.translate("Complete Jobs")+'</button></div></div><div class="panel-footer">'+App.translate("Your changes have not been saved yet.")+"</div>"})).show();var f=null;if($.isNumeric(b)&&$.isNumeric(c))if($(d({id:"mobile-assetmap",style:"height:300px",title:"Map",content:""})).appendTo("body"),!f&&navigator.geolocation)navigator.geolocation.getCurrentPosition(function(a){var d="js/roam/maps/viewers/heremaps/ext/route_display.html?"+$.param({lon0:a.coords.longitude,lat0:a.coords.latitude,lon1:b,lat1:c});$("#mobile-assetmap").append('<iframe src="'+d+'" style="width:100%;height:100%;border:0"></iframe>')},function(a){a?$("#mobile-assetmap").append('<div class="panel-body"><div class="alert alert-warning"><strong>Error!</strong> The Geolocation service failed.</div></div>'):$("#mobile-assetmap").append('<div class="panel-body"><div class="alert alert-warning"><strong>Error!</strong> Your browser does not support geolocation.</div></div>')});else{var g="js/roam/maps/viewers/heremaps/ext/route_display.html?"+$.param({lon0:f.longitude,lat0:f.latitude,lon1:b,lat1:c});$("#mobile-assetmap").append('<iframe src="'+g+'" style="width:100%;height:100%;border:0"></iframe>')}var h="jobcard",i=[{domainObjectValueId:"jobStatus",title:""},{domainObjectValueId:"jobCode",title:"Code"},{domainObjectValueId:"jobcardName",title:"Name"},{domainObjectValueId:"jobType",title:"Type"}],j=new App.widget.SimpleGrid({domainDataView:"maintenanceJobs",objectType:h,objectId:a,objectValues:'["jobCode","jobcardName","jobType","jobStatus"]',columns:i,renderTo:$("#mobile-jobcard .table")}),k=function(b,c){c.length&&(kendo.ui.progress(j.el,!0),$.ajax({url:App.config.serviceUrl+"caesarMaintenance/"+b,data:{domainObjectId:a,jobId:JSON.stringify(c)},error:function(){j.elTbody.empty(),j.renderTableData(),$(".panel-footer").text(App.translate("Status of selected jobs successfully changed.")),kendo.ui.progress(j.el,!1)}}))};$('[data-action="job-action"]').on("click",function(a){return k($(this).data("actiontype"),j.getSelectedIds()),a.preventDefault(),!1}),App.updateCurrent({objectType:h,objectId:a,objectName:"JobCard "+a}),App.util.updateBreadcrumb()}},routeLogin:function(a){"use strict";if(App.router.closeOpenWizardsAndDialogs(),!App.user.checkLogin()){App.util.updateBreadcrumb("Login");var b=a&&a.r&&a.r!==App.config.routeLogin?a.r:null;App.ui.login.show(b)}},routeAlarmMap:function(a,b,c,d){"use strict";if(App.router.checkRoute()){App.router.closeOpenWizardsAndDialogs(),d=d?App.router.decodeParam(d):null,App.current.routing=!0;for(var e=0;e<App.view.widgets.length;e++)App.view.widgets[e]&&(App.view.widgets[e].destroy(),App.view.widgets[e]=null);App.view.widgets=null,App.view.widgets=[],App.updateCurrent({objectId:b,objectType:a,objectName:d}),App.util.updateBreadcrumb(),App.view.mainArea?App.view.mainArea.empty():(App.view.mainArea=$("#mainArea"),App.view.mainArea.length||(App.view.mainArea=$("<div>",{id:"mainArea","data-location":App.config.locationMainArea}).appendTo("body")));var f=new App.ui.WidgetPanel({widgetType:"map",location:App.config.locationMainArea,isHeadless:App.router.isHeadless(),name:d,pictureName:App.util.widget.defaultIcon.alarmMap,id:"alarmMap",widgetData:{viewType:null},objectType:a,domainObjectId:b,ids:c.split(","),objectName:null});App.view.widgets.push(f),f.show()}},routeContent:function(a,b,c,d){"use strict";if(App.router.checkRoute()&&(App.router.closeOpenWizardsAndDialogs(),App.user.checkLogin())){App.ui.login.dialog&&App.ui.login.dialog.destroy(),3===arguments.length&&(c=null),c=c?App.router.decodeParam(c):null,d&&0===d.indexOf("/")&&(d=d.substr(1)),App.router.ajaxClear(),App.current.routing=!0;for(var e=0;e<App.view.widgets.length;e++)App.view.widgets[e]&&(App.view.widgets[e].destroy(),App.view.widgets[e]=null);if(App.view.widgets=null,App.view.widgets=[],App.view.navigationTree){var f=App.view.navigationTree.treeview.select(),g=null,h=[];f.length&&App.router.currentRoute&&!App.router.currentRoute.match("edit")&&(g=App.view.navigationTree.treeview.dataSource.getByUid($(f).data().uid),g&&(h=g.id.split(App.config.idDivider))),g&&g.domainObjectType===a&&h[1]===b?f.scrollintoview({direction:"vertical"}):App.router.jqXHRs.push($.ajax({url:App.config.serviceUrl+"caesarOrganizationStructure/objectHierarchy",data:{domainObjectType:a,domainObjectId:b},success:function(a){App.view.navigationTree.selectNodeByPath(a.reverse())}}))}App.updateCurrent({objectId:b,objectType:a,objectName:c}),App.util.updateBreadcrumb(),App.view.mainArea&&App.view.mainArea.empty(),App.view.sideBar&&App.view.sideBar.empty(),App.config.widgets[a]?App.router.addWidgets(App.config.widgets[a],b,c,d):App.router.jqXHRs.push($.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:a},success:function(e){var f,g=e.data,h=g.filter(function(a){return App.config.parentWidgetType===a.widgetType});for(f=0;f<h.length;f++){h[f].children=[];for(var i=0;i<g.length;i++)g[i].parent===h[f].id&&h[f].children.push(g[i]);h[f].children.sort(App.util.sortWidget)}for(f=0;f<g.length;f++)App.config.parentWidgetType!==g[f].widgetType&&""===g[f].parent&&h.push(g[f]);h.sort(App.util.sortWidget),App.config.widgets[a]=h,App.router.addWidgets(h,b,c,d)}}))}},refreshWidgetsCache:function(a){App.router.jqXHRs.push($.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:a},success:function(b){var c,d=b.data,e=d.filter(function(a){return App.config.parentWidgetType===a.widgetType});for(c=0;c<e.length;c++){e[c].children=[];for(var f=0;f<d.length;f++)d[f].parent===e[c].id&&e[c].children.push(d[f]);e[c].children.sort(App.util.sortWidget)}for(c=0;c<d.length;c++)App.config.parentWidgetType!==d[c].widgetType&&""===d[c].parent&&e.push(d[c]);e.sort(App.util.sortWidget),App.config.widgets[a]=e}}))},addWidgets:function(a,b,c,d){for(var e=0;e<a.length;e++){var f,g=$.extend(!0,{},a[e]);g.domainObjectId=b,g.objectName=c,d?g.id===d&&(g.location=App.config.locationMainArea,g.isHeadless=App.router.isHeadless(),f=App.config.parentWidgetType===g.widgetType?new App.ui.WidgetGroupPanel(g):new App.ui.WidgetPanel(g),g.isHeadless&&f.config&&(document.title=f.config.objectName+" ["+f.config.name+"]"),App.view.widgets.push(f),f.show()):g.location!==App.config.locationNone&&(f=App.config.parentWidgetType===g.widgetType?new App.ui.WidgetGroupPanel(g):new App.ui.WidgetPanel(g),App.view.widgets.push(f),f.show())}}},App.user={checkLogin:function(){return null!==App.config.sessionId},doLogin:function(a){"use strict";$.ajax({url:App.config.serviceUrl+"caesarAuthentication/logon",type:App.config.ajaxType,dataType:App.config.ajaxDataType,data:{username:a.username,password:a.password,applicationProviderId:a.appId},success:function(b){App.config.sessionId=b[App.config.sessionName],$.cookie(App.config.sessionName,App.config.sessionId,{path:"/"});var c="";a.returnRoute?c+=a.returnRoute:window.location.href.indexOf(App.config.routeLogin)<0&&(c=window.location.href),App.ui.login.dialog.destroy(),App.init({sessionId:$.cookie(App.config.sessionName),culture:App.router.getUrlParameterByName("lg"),theme:App.router.getUrlParameterByName("theme"),debug_i18n:"1"===App.router.getUrlParameterByName("debug_i18n")}),App.router.navigate(c)},error:a.error})},logout:function(){"use strict";$.when(App.dialog.okCancel({title:App.translate("Logout"),message:App.translate("Are you sure you want to log out?"),labelOK:App.translate("Logout"),icon:App.dialog.iconQuestion})).done(function(a){"OK"===a.button&&App.user.doLogout()})},doLogout:function(){"use strict";var a=this;App.application&&App.application.hide(),$.ajax({url:App.config.serviceUrl+"caesarAuthentication/logoff",success:function(){a.removeSession(),App.config.user={},App.config.widgets={},App.application.handlersInstalled=!1,App.current.routing=!1,App.router.navigate(App.config.routeLogin),App.stopPoller()},error:function(){App.application&&App.application.show(),App.log.error("Logout failed")}})},removeSession:function(){"use strict";$.removeCookie(App.config.sessionName,{path:"/"}),$.removeCookie(App.config.sessionName),App.config.sessionId=null},getSettings:function(a){"use strict";$.ajax({url:App.config.serviceUrl+"userSettings/current",success:function(b){$.extend(App.config.user,b.user),$.isFunction(a)&&a()}})},getWidgetTypes:function(){"use strict";return $.ajax({url:App.config.serviceUrl+"caesarWidgetType/widgetTypes3",success:function(a){$.each(a,function(a,b){b.items&&b.items.length&&App.config.domainObjectTypesTree.push(b)})}})},getDomainObjectTypes:function(){"use strict";return $.ajax({url:App.config.serviceUrl+"domainObjectTypes/availableDomainObjectTypes",success:function(a){for(var b=0,c=a.domainObjectTypes.length;c>b;b++){var d=a.domainObjectTypes[b];App.config.domainObjectTypes[d.id]={name:d.name}}}})},getDomainDataViews:function(){"use strict";return $.ajax({url:App.config.serviceUrl+"caesarObject/availableDomainDataViews",data:{domainObjectType:"customer"},success:function(a){a.domainDataViews&&(App.config.domainDataViews=a.domainDataViews)}})},getAvailableMapProjects:function(){"use strict";return $.ajax({url:App.config.serviceUrl+"userSettings/availableMapProjects",success:function(a){App.config.map.projects={};for(var b=0,c=a.length;c>b;b++){var d=a[b];App.config.map.projects[d.id]=d,d["default"]&&(App.config.map.defaultId=d.id)}}})}},App.util={sortWidget:function(a,b){"use strict";return parseInt(a.positionNumber)<parseInt(b.positionNumber)?-1:parseInt(a.positionNumber)>parseInt(b.positionNumber)?1:0},sortTreeItem:function(a,b){"use strict";return a.domainObjectType<b.domainObjectType?-1:a.domainObjectType>b.domainObjectType?1:0},loadStyles:function(a){for(var b=$.isArray(a)?a:[a],c=0,d=b.length;d>c;c++){var e=$("<link>",{href:b[c],rel:"stylesheet"});$("head").append(e)}},loadScript:function(a,b){var c=$("<script>",{src:a});$.isFunction(b)&&(c.get(0).onload=b),document.getElementsByTagName("head")[0].appendChild(c.get(0))},dateToGMT:function(a){return a.setMinutes(a.getMinutes()-App.config.user.timeZoneOffset),a},dateFromGMT:function(a){return a.setMinutes(a.getMinutes()+App.config.user.timeZoneOffset),a},format:{date:function(a,b){"use strict";return null!==a&&""!==a?(b=b||"d",a instanceof Date||(a=kendo.parseDate(a,App.config.dateFormat)),a instanceof Date&&App.util.dateFromGMT(a),kendo.toString(a,b)):App.config.blankSign},time:function(a,b){"use strict";return null!==a?(b=b||"t",App.util.dateFromGMT(a),kendo.format(a,b)):App.config.blankSign},dateTime:function(a,b){"use strict";var c=App.config.blankSign;return null===a?App.config.blankSign:(b=b||"G",a instanceof Date||(a=kendo.parseDate(a,App.config.dateTimeFormat)),a?(App.util.dateFromGMT(a),kendo.toString(a,b)):c)},hourMinute:function(a,b){var c=Math.floor(a/3600),d=0,e="";switch(b){case"HH:mm:ss":d=Math.floor((a-3600*c)/60),e=Math.round(a-3600*c-60*d);break;default:case"HH:mm":d=Math.round((a-3600*c)/60)}return 10>c&&(c="0"+c),10>d&&(d="0"+d),""!==e&&(e=10>e?":0"+e:":"+e),c+":"+d+e},duration:function(a){var b="",c="";if(a)if(0>a&&(c=App.translate("Delayed by "),a=-1*a),30>a)b=App.translate("{0} secs",a);else{var d=Math.floor(a/86400),e=Math.floor(a%86400/3600),f=Math.round(a%3600/60);d>0&&(b=1===d?App.translate("{0:n0} day",d):App.translate("{0:n0} days",d),e>0&&(b+=", ")),e>0&&(b+=App.translate("{0:n0} h",e),f>0&&(b+=" ")),f>0&&(b+=App.translate("{0:n0} min",f))}else b=App.config.blankSign;return c+b},fuzzyTime:function(a,b){"use strict";var c="";if(a){var d=new Date(a.replace(/-/g,"/").replace(/T/," ")),e=null;b?e=new Date(b.replace(/-/g,"/").replace(/T/," ")):(e=new Date,App.util.dateFromGMT(e));var f=e-d,g=Math.floor(f/864e5),h=Math.floor(f/36e5),i=Math.floor(f/6e4),j=Math.floor(f/1e3);60>j?c=App.translate("less than a minute ago"):1===i?c=App.translate("one minute ago"):60>i?c=App.translate("{0} mins ago",i):1===h?c=App.translate("one hour ago"):12>h?c=App.translate("{0} hours ago",h):(0===g&&(g=1),c=1===g?App.translate("{0} day ago",g):App.translate("{0} days ago",g))}return c},domainObjectType:function(a){"use strict";var b=a;return App.config.domainObjectTypes[b]&&(b=App.translate(App.config.domainObjectTypes[b].name)),b},domainObjectTypeIcon:function(a){"use strict";var b="";return b=App.config.domainObjectTypes[a]?"ao-"+a:a.indexOf("configuration")>-1?"ao-configuration":"ao-unknown"},icon:function(a){"use strict";return App.config.icons[a]?App.config.icons[a].url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
},domainObjectReference:function(a,b,c,d){return b?d?kendo.format('<a href="#!/{0}/{1}/show/{2}">{3}</a><span title="Click to see more actions" data-toggle="tooltip" class="ref-icon glyphicon glyphicon-pencil" data-action="refmenu" data-objecttype="{0}" data-id="{1}" data-label="{3}"></span>',a,b,App.router.encodeParam(c),c):c:""},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},routeSummary:function(a){var b=this.duration(a.duration),c=this.item({unitType:"distance",currentValues:[a.distance],type:"decimal"});return"undefined"!=typeof a.durationWithStopovers?kendo.format('<dl class="dl-horizontal"><dt>{0}</dt><dd>{1}</dd><dt>{2}</dt><dd>{3}</dd><dt>{4}</dt><dd>{5}</dd></dl>',App.translate("Duration"),b,App.translate("With Stopovers"),this.duration(a.durationWithStopovers),App.translate("Distance"),c):kendo.format('<dl class="dl-horizontal"><dt>{0}</dt><dd>{1}</dd><dt>{2}</dt><dd>{3}</dd></dl>',App.translate("Duration"),b,App.translate("Distance"),c)},item:function(a){"use strict";var b="",c=null,d="",e=App.config.blankSign,f={};if(a){if(a.currentValues&&a.currentValues.length?c=a.currentValues[0]:a.hasOwnProperty("value")&&(c=a.value),a.unitType){var g=1,h=0;switch(a.unitType){case"distance":switch(g=.001,d=App.translate(" km"),App.config.user.measurementSystem){case"US":g=.000621371192,d=App.translate(" mi")}break;case"temperature":switch(d=App.translate(" °C"),App.config.user.measurementSystem){case"US":g=1.8,h=32,d=App.translate(" °F")}break;case"volume":switch(d=App.translate(" l"),App.config.user.measurementSystem){case"US":g=.26417205235815,d=App.translate(" gal")}}$.isNumeric(c)&&(c=c*g+h)}switch(a.type){case"boolean":b=c?'<span class="glyphicon glyphicon-ok"></span>':'<span class="glyphicon glyphicon-remove"></span>';break;case"date":b=this.date(c);break;case"dateTime":b=this.dateTime(c);break;case"decimal":b=null!==c?kendo.toString(c,"n"):e;break;case"domainObjectReferenceType":b=null!==c?this.domainObjectReference(a.referenceType,c,a.displayValue,a.isDomainObjectAccessible):e;break;case"duration":b=this.duration(c);break;case"email":b=null!==c?'<a href="mailto:'+c+'">'+c+"</a>":e;break;case"hourMinute":b=this.hourMinute(c);break;case"numeric":b=null!==c?kendo.toString(c,"n0"):e;break;case"percentage":b=kendo.toString(c,"p");break;case"phoneNumber":b=null!==c?'<a href="tel:'+c+'">'+c+"</a>":e;break;case"stateType":var i=App.config.icons[c];b="undefined"!=typeof i&&""!==i.url?'<img src="'+i.url+'" alt="'+i.description+'" title="'+i.description+'" data-toggle="tooltip" class="widget-status-icon">':e;break;case"vfsAttachment":null!==c?(f={domainObjectType:a.domainObjectType,domainObjectId:a.domainObjectId,filename:c},f[App.config.sessionName]=App.config.sessionId,b='<a target="_blank" href="'+App.config.serviceUrl+"caesarVfsResource/get?"+$.param(f)+'">'+c+"</a>"):b=e;break;case"vfsImage":null!==c?(f={domainObjectType:a.domainObjectType,domainObjectId:a.domainObjectId,filename:c},f[App.config.sessionName]=App.config.sessionId,b=kendo.format('<img class="img-thumbnail" src="{0}" alt="{1}" title="{1}">',App.config.serviceUrl+"caesarVfsResource/get?"+$.param(f),c)):b=e;break;default:null!==c&&"&nbsp;"!==c?(a.currentValues.length>1&&(c=a.currentValues.join(", ")),b=c):b=e}}return b+d}},setTheme:function(a){$("head link#theme").attr("href","dist/theme-"+a+".css")},updateBreadcrumb:function(a){"use strict";var b=[];null!==App.current.objectName&&b.push(App.current.objectName),$.isArray(a)?b=b.concat(a):a&&b.push(a),document.title=b.join(App.config.breadcrumbSeparator)+" ["+App.config.name+"]"},forms:{validator:{rules:{phoneNumber:function(a){return a.is("[data-type=phoneNumber]")&&a.val().length>0?a.val().match(/^[+]\d+/):!0},passwordConfirm:function(a){if(a.is("[data-type=password_confirm]")){var b=a.closest("dl").find('input[data-type="password"]');return b.val()===a.val()}return!0},required:function(a){var b=!0,c=a.length&&a[0].attributes.required;if(c)if(a.filter("[type=checkbox]").length&&!a.is(":checked"))b=!1;else{var d=a.val(),e=a.data("role");switch(e){case"numerictextbox":a.parent()&&a.parent().is(":visible")&&(b=null!==a.data("kendoNumericTextBox").value());break;case"dropdownlist":a.data("kendoDropDownList").wrapper.is(":visible")&&(b=!(""===d||!d));break;default:a.is(":visible")&&(b=""!==$.trim(d))}}return b},dateTime:function(a){return"datetimepicker"==a.data("role")?null!==a.data("kendoDateTimePicker").value():!0},upload:function(a){return"file"===a[0].type&&$(a[0]).attr("ismandatory")?a.closest(".k-upload").find(".k-file").length>0:!0}},messages:{required:"This field is required",phoneNumber:"Enter phone number in this format: +1234567",passwordConfirm:"Password does not match",dateTime:"Incorrect date-time value"},validate:function(a){if(!a.valid){var b;for(var c in a.sender._errors){b=c;break}b&&$("#"+b).scrollintoview({direction:"vertical"})}}}},widget:{defaultIcon:{alarmMap:"Places-24",assetCommand:"Programing-16",assetMaintenance:"Setting-14",dashboard:"Business-75",detail:"Text-47",eventHistoryMap:"Places-24",grid:"Programing-17",map:"Places-24",overviewMap:"Places-30",widgetGroup:"Content-40"},syncWithDefault:function(){var a=$.ajax({url:App.config.serviceUrl+"caesarObject/domainDataViewModel"}),b=$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2"}),c=[];return $.when(a,b).done(function(a,b){$.each(b[0].data,function(b,d){var e=!1,f=!1,g=$.parseJSON(d.widgetData);g&&g.data&&g.data.length?$.each(a[0].domainDataViewModel,function(a,b){if(d.objectType===b.domainObjectTypeId&&g.viewType===b.id&&(f=!0,$.each(b.domainObjectValues,function(a,c){var f=!1;if($.each(g.data,function(a,b){return b.domainObjectValueId===c.domainObjectValueId?(f=!0,c.domainObjectValueName!==b.domainObjectValueName&&(b.domainObjectValueName=c.domainObjectValueName,e=!0),c.type!==b.domainObjectValueType&&(b.domainObjectValueType=c.type,e=!0),b.filterable!==c.filterable&&(b.filterable=c.filterable,e=!0),b.sortable!==c.sortable&&(b.sortable=c.sortable,c.sortable||g.sortAttribute!==c.domainObjectValueId||(g.sortAttribute=""),e=!0),b.hidden!==c.hidden&&(b.hidden=c.hidden,e=!0),b.discreetValues.length!==c.discreetValues.length&&(b.discreetValues=c.discreetValues,e=!0),!1):void 0}),!f){var h={discreetValues:c.discreetValues,domainObjectValueId:c.domainObjectValueId,domainObjectValueType:c.type,domainObjectValueName:c.domainObjectValueName,filterable:c.filterable,sortable:c.sortable,selected:!1,mini_widget:!1,positionNumber:g.data.length+1};"detail"===d.widgetType&&(h.section=c.section),g.data.push(h),e=!0}var i=[];if($.each(g.data,function(a,c){var d=!1;$.each(b.domainObjectValues,function(a,b){b.domainObjectValueId===c.domainObjectValueId&&(d=!0)}),d||(i.push(a),e=!0)}),i.length)for(var j=i.length-1;j>=0;j--)g.data.splice(i[j],1)}),e)){var h=JSON.stringify(g),i={id:d.id,name:d.name,user:App.config.user.id,description:d.description,widgetType:d.widgetType,widgetData:h,location:d.location,positionNumber:d.positionNumber,parent:d.parent,pictureName:d.pictureName,domainObjectType:d.objectType};c.push($.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:i,success:function(){}}))}}):f=!0,f||c.push($.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/deleteWidget",data:{id:d.id},success:function(){}}))})}),c},fixIcons:function(){"use strict";$.each(App.config.domainObjectTypesTree,function(a,b){$.each(b.items,function(a,b){$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:b.id},success:function(a){$.each(a.data,function(a,c){var d=App.util.widget.defaultIcon[c.widgetType]?App.util.widget.defaultIcon[c.widgetType]:c.pictureName;$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:{id:c.id,name:c.name,user:App.config.user.id,description:c.description,widgetType:c.widgetType,widgetData:c.widgetData,location:c.location,positionNumber:c.positionNumber,parent:c.parent,pictureName:d,domainObjectType:b.id},success:function(){}})})},error:function(a){}})})})},fixBoolValues:function(){"use strict";var a=this;$.each(App.config.domainObjectTypesTree,function(b,c){$.each(c.items,function(b,c){$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:c.id},success:function(b){$.each(b.data,function(b,d){if("null"!==d.widgetData){var e=$.parseJSON(d.widgetData);e.data.length&&($.each(e.data,function(b){a.boolCheck(e.data,b,"sortable"),a.boolCheck(e.data,b,"mini_widget"),a.boolCheck(e.data,b,"defaultSort"),a.boolCheck(e.data,b,"filterable")}),$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:{id:d.id,name:d.name,user:App.config.user.id,description:d.description,widgetType:d.widgetType,widgetData:JSON.stringify(e),location:d.location,positionNumber:d.positionNumber,parent:d.parent,pictureName:d.pictureName,domainObjectType:c.id},success:function(){}}))}})},error:function(a){}})})})},boolCheck:function(a,b,c){"false"===a[b][c]?a[b][c]=!1:"true"===a[b][c]&&(a[b][c]=!0)}}},App.component.config={inheritFont:{font:"inherit"},pdfOptions:{creator:"ROAMWORKS UI",paperSize:"A4",landscape:!0},rangeColors:{good:"#EFEFF1",fair:"#FDBC38",bad:"#FC6B20",dangerous:"#B20010"},tickThreshold:10,buildTooltip:function(a){var b,c="";return a&&a.length&&(c="",$.each(a,function(a,d){b=App.util.format.item(d).length?App.util.format.item(d):App.config.blankSign,c=c+"<li>"+d.title+": "+b+"</li>"})),c}},App.component.ChartBase=stampit().props({config:null,element:null}).methods({redraw:function(){this.element.redraw()},destroy:function(){this.config.el.remove()},show:function(){this.element.show()},hide:function(){this.element.hide()}}),App.component.Defaultchart=stampit.compose(App.component.ChartBase,stampit().props({config:null,element:null}).methods({formatData:function(a){"use strict";for(var b=[],c=[],d=null,e={majorUnit:1,labels:{font:"inherit"}},f=0;f<a.metadata.columns.length;f++){c=[];for(var g=0;g<a.tabledata.rows.length;g++)d=a.tabledata.rows[g],c.push(d[f]),d[f]>App.component.config.tickThreshold&&delete e.majorUnit;b.push({name:a.metadata.columns[f],data:c})}return{series:b,categoryAxis:{justified:!0,categories:a.metadata.rows,labels:{rotation:"bar"===a.chartType?0:-90,visible:!0},majorGridLines:{visible:!1}},valueAxis:e}},refresh:function(){var a=this.formatData(this.config);this.element.setOptions({categoryAxis:a.categoryAxis,valueAxis:a.valueAxis,series:a.series})}}).init(function(){var a=this.formatData(this.config);this.element=this.config.el.kendoChart({pdf:App.component.config.pdfOptions,transitions:!1,legend:{position:"top",labels:App.component.config.inheritFont,inactiveItems:{labels:App.component.config.inheritFont}},seriesDefaults:{type:this.config.chartType,labels:{visible:!0,font:"inherit"},tooltip:App.component.config.inheritFont},series:a.series,categoryAxis:a.categoryAxis,valueAxis:a.valueAxis,tooltip:{visible:!0,format:"N0"}}).data("kendoChart")})),App.component.Donutchart=stampit.compose(App.component.ChartBase,stampit().props({config:null,element:null}).methods({formatData:function(a){"use strict";var b=[];return $.each(a.metadata.columns,function(c,d){var e,f=[];$.each(a.metadata.rows,function(b,d){f.push({category:d[0],value:a.tabledata.rows[b][c]})}),e={name:d[0],data:f},c===a.metadata.columns.length-1&&(e.labels={visible:!0,position:"outsideEnd",template:'#= category #: #= kendo.toString(value,"n") #'}),b.push(e)}),b},refresh:function(){var a=this.formatData(data);this.element.setOptions({series:a})}}).init(function(){var a=this.formatData(config);this.element=this.config.el.kendoChart({pdf:App.component.config.pdfOptions,legend:{visible:!1,position:"right"},chartArea:{background:""},seriesDefaults:{type:"donut",startAngel:200},tooltip:{visible:!0,template:'#= category # (#= series.name #): #= kendo.toString(value,"n") #'},series:a}).data("kendoChart")})),App.component.Linechart=stampit.compose(App.component.ChartBase,stampit().props({config:null,element:null}).methods({formatData:function(a){"use strict";var b,c,d,e,f,g,h,i,j,k=[],l=0,m=0,n=0,o=0,p=[],q=1,r=0;if(a.values&&$.isArray(a.values)&&a.values.length>0){switch(f=a.metadata.categoryAxis.field,g=kendo.parseDate(a.values[0][f],App.config.dateTimeFormat),h=kendo.parseDate(a.values[a.values.length-1][f],App.config.dateTimeFormat),i=h-g,a.metadata.categoryAxis.baseUnit){case"minutes":j=Math.round(i/1e3/60),q=Math.ceil(j/10);break;case"hours":j=Math.round(i/1e3/60/60),q=Math.ceil(j/10);break;case"days":j=Math.round(i/1e3/60/60/24),q=Math.ceil(j/10);break;case"week":j=Math.round(i/1e3/60/60/24/7),q=Math.ceil(j/10);break;case"months":j=Math.round(i/1e3/60/60/24/7/30),q=Math.ceil(j/10)}for(r=0;r<a.values.length;r++)a.values[r][f]=App.util.format.dateTime(a.values[r][f],App.config.dateTimeFormat)}if(0>=q&&(q=1),e=$.extend({justified:!0,labels:{step:q,visible:!0,font:"inherit",dateFormats:{minutes:"HH:mm",hours:"dd HH",years:"yyyy",days:"MM-dd"}},majorGridLines:{visible:!1},majorTicks:{step:q},minorTicks:{step:Math.ceil(q/5),visible:!0}},a.metadata.categoryAxis),a.metadata.ranges)for(r=0;r<a.metadata.ranges.length;r++){var s=a.metadata.ranges[r];s.color=App.component.config.rangeColors[s.type],s.opacity=.3,s.to=s.to-1,p.push(s);var t={opacity:1,from:s.to,to:s.to+1,color:s.color};p.push(t),o=Math.min(s.from,o),n=Math.max(s.to,n)}return $.each(a.metadata.columns,function(a,b){k.push({name:b.name,type:"line",style:"smooth",markers:{visible:!1},field:a,categoryField:e.field}),l=Math.max(b.min,l),m=Math.max(b.max,m)}),d=Math.max(l,o),c=Math.max(m,n),b={labels:{font:"inherit"},min:d,max:c,plotBands:p},{categoryAxis:e,valueAxis:b,series:k,values:a.values}},refresh:function(){var a=this.formatData(data);this.element.setOptions({categoryAxis:a.categoryAxis,valueAxis:a.valueAxis,series:a.series}),chart.dataSource.data(a.values)}}).init(function(){var a=this.config,b=this.formatData(a);this.element=a.el.kendoChart({pdf:App.component.config.pdfOptions,legend:{position:"top",labels:App.component.config.inheritFont,inactiveItems:{labels:App.component.config.inheritFont}},seriesDefaults:{type:a.chartType,labels:App.component.config.inheritFont,tooltip:App.component.config.inheritFont,color:"#0F76C0"},dataSource:{data:a.values},transitions:!1,series:b.series,categoryAxis:b.categoryAxis,valueAxis:b.valueAxis,tooltip:{visible:!0,format:"N0"}}).data("kendoChart")})),App.component.Piechart=stampit.compose(App.component.ChartBase,stampit().props({config:null,element:null}).methods({formatData:function(a){"use strict";var b=[];return $.each(a.metadata.columns,function(c,d){b.push({category:d,value:a.tabledata.rows[0][c]})}),[{data:b}]},refresh:function(){var a=this.formatData(data);this.element.setOptions({series:a})}}).init(function(){var a=this.formatData(this.config);this.element=this.config.el.kendoChart({pdf:App.component.config.pdfOptions,legend:{position:"top"},chartArea:{background:""},seriesDefaults:{type:"pie",labels:{visible:!0,background:"transparent",template:"#=category#: #=value#",align:"circle"}},series:a}).data("kendoChart")})),App.component.Gaugechart=stampit.compose(App.component.ChartBase,stampit().props({config:null,element:null}).methods({destroy:function(){this.config.el.remove(),this.config.dangleIntervalId&&clearInterval(this.config.dangleIntervalId)},formatData:function(a){"use strict";var b=[];return $.each(a.metadata.ranges,function(a,c){c.color=App.component.config.rangeColors[c.type],b.push(c)}),{ranges:b,value:parseInt(a.value,10),min:parseInt(a.metadata.min,10),max:parseInt(a.metadata.max,10)}},refresh:function(){var a=this.formatData(data);this.element.setOptions({series:a})}}).init(function(){var a=this,b=this.config,c=this.element,d=this.formatData(b);switch(b.settings={pointer:{value:d.value,color:"#0F76C0"},scale:{majorUnit:b.majorUnit,minorUnit:b.minorUnit,startAngle:-30,endAngle:210,vertical:b.vertical,min:d.min,max:d.max,labels:{position:"outside"},ranges:d.ranges,majorTicks:{color:"#CBCBCD"},minorTicks:{color:"#CBCBCD"}}},b.chartType){case"radial":c=b.el.kendoRadialGauge(b.settings).data("kendoRadialGauge"),b.settings.scale.vertical=0;break;case"linear-vertical":b.settings.pointer.shape="arrow",b.settings.scale.vertical=1,c=b.el.kendoLinearGauge(b.settings).data("kendoLinearGauge");break;case"linear-horizontal":b.settings.pointer.shape="arrow",b.settings.scale.vertical=0,c=b.el.kendoLinearGauge(b.settings).data("kendoLinearGauge")}var e=kendo.template('<ul class="gauge-legend"># for (var i = 0; i < ranges.length; i++) { #<li class="gauge-legend-#=ranges[i].type#"><span>#= App.translate(ranges[i].type) #</span></li># } #</ul>');b.el.prepend(e({ranges:d.ranges})),b.dangleIntervalId=setInterval(function(){var a=parseFloat(b.value),d=(b.metadata.max-b.metadata.min)/100,e=Math.random()*d;2*Math.random()%2===0?a+=e:a-=e,c.value(a)},1e3),a.element=c})),App.component.FieldBase=stampit().props({config:null,element:null,value:null,state:null,description:null}).methods({getValue:function(){return this.element.value()},setValue:function(a){this.element.value(a)},enable:function(a){$(this.element).attr("disabled",a)},isVisible:function(){var a=this,b=!0;return b=a.element.wrapper?a.element.wrapper.is(":visible"):a.element.visible?a.element.visible:$(a.element).is(":visible")},show:function(){this.element.show()},hide:function(){this.element.hide()},renderTooltip:function(){var a=$("<span>",{"class":"glyphicon glyphicon-question-sign","data-toggle":"tooltip",title:this.description}).appendTo(this.config.container);a.tooltip({container:this.config.refOwner.elDialogContent,placement:"top"})}}),App.component.Checkbox=stampit.compose(App.component.FieldBase,stampit().props({config:null}).init(function(){var a,b=this,c=this.config;a=$("<input>",{type:"checkbox",name:c.id,id:c.id}).appendTo(c.container),a.prop("checked",c.currentValues[0]),b.element=a.get(0)})),App.component.Datelist=stampit.compose(App.component.FieldBase,stampit().props({config:null}).methods({renderTooltip:function(){}}).init(function(){var a=this,b=this.element,c=this.config,d=$("<div>",{style:"margin-bottom: 5px;","class":"multiselect-container row"}).appendTo(c.container),e=$("<div>",{style:"width: 99%","class":"k-widget k-multiselect k-header"}).appendTo(c.container),f=$("<div>",{"class":"k-multiselect-wrap k-floatwrap",unselectable:"on"}).appendTo(e),g=$('<ul role="listbox" unselectable="on" class="k-reset k-multiselect-wrap"/>',{}).appendTo(f);b=g.kendoListView({dataSource:{schema:{model:{id:"baseValue"}}},template:'<li class="k-button" unselectable="on"><span unselectable="on">#:displayValue#</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}).data("kendoListView"),c.currentValues&&$.each(c.currentValues,function(a,c){b.dataSource.add({baseValue:c,displayValue:App.translate(c)})});var h=$("<input>").appendTo($("<div>",{"class":"col-sm-4"}).appendTo(d)),i=h.kendoDatePicker({format:App.config.dateFormat}).data("kendoDatePicker");g.on("click",".k-delete",function(a){var c=$(a.currentTarget).parent(),d=b.dataSource.getByUid(c.attr("data-uid"));b.dataSource.remove(d)}),$("<button>",{type:"button",style:"margin-left: 5px;","class":"k-button col-sm-2"}).text(App.translate("Add")).appendTo(d).on("click",function(){var a=kendo.parseDate(i.value());if(a){var c=kendo.toString(a,App.config.dateFormat);b.dataSource.add({baseValue:c,displayValue:c})}}),a.element=b})),App.component.Datepicker=stampit.compose(App.component.FieldBase,stampit().props({config:null,type:null,state:null}).methods({enable:function(a){return this.element.enable(!a)},renderTooltip:function(){}}).init(function(){var a,b=this,c=this.config,d={},e=null;switch(a=$("<input>",{id:c.id,name:c.id,placeholder:c.description}).attr("required",c.isMandatory).appendTo(c.container),c.isMandatory&&(c.container.append('<div></div><span class="k-invalid-msg" data-for="'+c.id+'"></span>'),a.attr("required","true")),c.maxValue&&(d.max=kendo.parseDate(c.maxValue,App.config.dateTimeFormat)),c.minValue&&(d.min=kendo.parseDate(c.minValue,App.config.dateTimeFormat)),b.type){case"date":e=kendo.parseDate(c.currentValues[0],App.config.dateFormat),a.attr("type","date"),a=a.kendoDatePicker($.extend({value:e},d)).data("kendoDatePicker");break;case"dateTime":e=kendo.parseDate(c.currentValues[0],App.config.dateTimeFormat),e&&App.util.dateFromGMT(e),a.attr("type","datetime-local"),a=a.kendoDateTimePicker($.extend({value:e},d)).data("kendoDateTimePicker")}b.element=a})),App.component.Dropdown=stampit.compose(App.component.FieldBase,stampit().props({config:null,state:null}).methods({getValue:function(){return this.element.value()},enable:function(a){return this.element.enable(!a)}}).init(function(){var a=this,b=this.config,c=b.currentValues.length?b.currentValues[0]:null,d=b.availableValues.length?b.availableValues[0].baseValue:null,e=b.availableValues.length?b.availableValues[0].displayValue:"",f=$("<input>").appendTo(b.container);b.isMandatory&&f.attr("required","true");var g={dataValueField:"baseValue",dataTextField:"displayValue",id:b.id};null===d?(b.availableValues.shift(),g.autoBind=!1,g.optionLabel=e):g.value=d,g.dataSource=b.availableValues,f=f.kendoDropDownList(g).data("kendoDropDownList"),null!==c&&f.value(c),a.element=f})),App.component.Durationpicker=stampit.compose(App.component.FieldBase,stampit().props({config:null,state:null}).methods({enable:function(a){return this.element.enable(!a)}}).init(function(){var a=this,b=this.config,c="",d=$("<input>",{type:"time",name:b.id,placeholder:b.description}).appendTo(b.container);b.currentValues&&b.currentValues.length&&(c=App.util.format.hourMinute(b.currentValues[0])),d=d.kendoTimePicker({value:c,interval:30,format:"HH:mm"}).data("kendoTimePicker"),a.element=d})),App.component.Editor=stampit.compose(App.component.FieldBase,stampit().props({config:null}).init(function(){var a,b=this,c=this.config,d=b.config.currentValues?b.config.currentValues[0]:"",e=[];$.each(b.config.availablePlaceholderValues,function(a,b){e.push({text:b,value:"["+b+"]"});var c=new RegExp("(< *?/*)"+b+"( +?|>)","g");d=d.replace(c,"&lt;"+b+"&gt;")}),d=d.replace(/(<([^>]+)>)/g,""),a=$("<textarea>",{name:c.id,id:c.id,cols:35,rows:4,maxlength:c.maxLength}).text(d).appendTo(c.container),a=a.kendoEditor({tools:["insertHtml"],encoded:!0,messages:{insertHtml:App.translate("Add Placeholder")},select:function(a){var b=a.sender.value();b=b.replace(/[\[]/g,"&lt;").replace(/[\]]/g,"&gt;"),a.sender.value(b)},insertHtml:e}).data("kendoEditor"),b.element=a})),App.component.FileUpload=stampit.compose(App.component.FieldBase,stampit().props({config:null,isImage:null}).init(function(){var a,b=this,c=this.config,d=[],e=c.currentValues[0],f=$("<div>",{id:"preview_"+c.id}).appendTo(c.container);if(e&&e.length>0){var g={domainObjectId:c.objectId,domainObjectType:c.objectType,filename:e};g[App.config.sessionName]=App.config.sessionId;var h=App.config.serviceUrl+"caesarVfsResource/get?"+$.param(g);b.isImage?$('<img class="img-thumbnail" alt="" src="'+h+'">').appendTo(f):$('<a target="_blank" href="'+h+'">'+e+"</a>").appendTo(f),d.push({name:e,extension:e.substr(e.lastIndexOf(".")+1)})}a=$("<input>",{name:"fileData",id:c.id,type:"file"}).appendTo(c.container),c.isMandatory&&a.attr("isMandatory",!0).attr("validationmessage",App.translate("Please provide a file")).after('<span class="k-invalid-msg" data-for="fileData"></span>'),a=a.kendoUpload({async:{saveUrl:c.fileUploadUrl,autoUpload:!1},isImage:b.isImage,localization:{select:App.translate("Select File")},id:c.id,showFileList:!0,files:d,fileName:e,multiple:!1,deleteFile:!1,error:$.isFunction(c.error)?c.error:null,cancel:function(a){a.keyCode!==kendo.keys.ENTER&&a.keyCode!==kendo.keys.NUMPAD_ENTER||a.preventDefault()},remove:function(a){a.preventDefault();var d=a.sender.wrapper.find('li span[title="'+a.files[0].name+'"]');if(d.parent().remove(),a.sender.options.files={},a.sender.options.deleteFile=!0,c.refOwner.fileUploadFields){var e=!1;$.each(c.refOwner.fileUploadFields,function(b,c){c.el.options.id===a.sender.options.id&&(e=!0)}),e||c.refOwner.fileUploadFields.push(b)}return!1},select:function(a){if(a.files.length){$("button.k-upload-selected").addClass("hidden");var b=$(a.sender.wrapper).find("li.k-file:not(.k-file-success)");if($.each(b,function(a,b){$(b).remove()}),c.refOwner.fileUploadFields){var d=!1;$.each(c.refOwner.fileUploadFields,function(b,c){c.el.options.id===a.sender.options.id&&(d=!0)}),d||c.refOwner.fileUploadFields.push(this)}}},upload:function(a){var b=a.files[0].name,d=a.files[0].extension.replace(".",""),e=null,f=null;a.sender.multiple||$.each(a.sender.options.files,function(b,d){$.ajax({url:App.config.serviceUrl+"caesarVfs/delete",data:{domainObjectId:c.objectId,domainObjectType:c.objectType,filename:d.name},success:function(){var b=a.sender.wrapper.find('li span[title="'+d.name+'"]');b.parent().remove(),a.sender.options.files=a.files}})}),c.objectType&&""!==c.objectType&&c.objectId&&""!==c.objectId?(e=c.objectType,f=c.objectId):(e=c.parentObjectType,f=c.parentObjectId),a.data={domainObjectId:f,domainObjectType:e,filename:b.replace(a.files[0].extension,""),fileExtension:d},a.data[App.config.sessionName]=App.config.sessionId},success:$.proxy(c.refOwner.onUploadSuccess,c.refOwner)}).data("kendoUpload"),a.wrapper.addClass("multiselect-container row"),a.wrapper.removeClass("k-widget"),a._showUploadButton=function(){},b.element=a})),App.component.Input=stampit.compose(App.component.FieldBase,stampit().props({config:null}).methods({getValue:function(){return $(this.element).val()}}).init(function(){var a=this,b=this.element,c=this.config,d=c.currentValues?c.currentValues[0]:"";b=c.hasLinebreakSupport?$("<textarea>",{name:c.id,id:c.id,"class":"k-textbox",cols:35,rows:4,maxlength:c.maxLength}).text(d).appendTo(c.container):$("<input>",{type:"text","class":"k-textbox",value:d,name:c.id,id:c.id,placeholder:c.description,maxlength:c.maxLength}).appendTo(c.container),b.attr("data-type",c.type),c.isMandatory&&b.attr("required","true"),a.element=b.get(0)})),App.component.Multiplaceholder=stampit.compose(App.component.FieldBase,stampit().props({config:null}).init(function(){var a,b=this,c=this.config;a=$("<select>",{name:c.id,id:c.id}).appendTo(c.container),a=a.kendoMultiSelect({placeholder:App.translate("Click to select..."),autoBind:!0,dataSource:c.availablePlaceholderValues,value:c.currentValues}).data("kendoMultiSelect"),b.element=a})),App.component.Mutiselect=stampit.compose(App.component.FieldBase,stampit().props({config:null}).methods({renderTooltip:function(){}}).init(function(){var a,b=this,c=this.config;c.isHierarchical?a=new App.ui.SelectionTree({renderTo:c.container,valueField:"displayValue",data:c.availableValues,selected:c.currentValues,multi:c.hasMultipleValueSupport}):(a=new App.ui.Multiselect({valueField:"displayValue",idField:"baseValue",dataModel:{id:"baseValue"},renderTo:c.container,data:c.availableValues,leftLabel:App.translate("Available"),rightLabel:App.translate("Selected"),maxValue:c.maxValue,required:c.isMandatory}),a.render(),a.setSelected(c.currentValues)),b.element=a})),App.component.Multiset=stampit.compose(App.component.FieldBase,stampit().props({config:null}).methods({renderTooltip:function(){},DecryptCoords:function(a){for(var b=[],c=a.split("#("),d=0;d<c.length;d++)c[d].length>0&&b.push(c[d].split(")")[0]);return b},clearBoxes:function(){this.firstBox.value(""),this.secondBox.value("")}}).init(function(){var a=this,b=this.element,c=this.config,d=$("<div>",{style:"margin-bottom: 5px;","class":"multiselect-container row"}).appendTo(c.container),e=$("<div>",{style:"width: 99%","class":"k-widget k-multiselect k-header"}).appendTo(c.container),f=$("<div>",{"class":"k-multiselect-wrap k-floatwrap",unselectable:"on"}).appendTo(e),g=$('<ul role="listbox" unselectable="on" class="k-reset k-multiselect-wrap"/>',{}).appendTo(f);if(b=g.kendoListView({dataSource:{schema:{model:{id:"baseValue"}}},template:'<li class="k-button" unselectable="on"><span unselectable="on">#:displayValue#</span><span unselectable="on" class="k-icon k-delete">delete</span></li>'}).data("kendoListView"),c.currentValues&&"#()"!==c.currentValues[0]){var h=a.DecryptCoords(c.currentValues[0]);$.each(h,function(a,c){b.dataSource.add({baseValue:c,displayValue:App.translate(c)})})}var i=$("<input>").appendTo($("<div>",{"class":"col-sm-4"}).appendTo(d)),j=$("<input>").appendTo($("<div>",{"class":"col-sm-4"}).appendTo(d));a.firstBox=i.kendoNumericTextBox({format:"#.00",decimals:3}).data("kendoNumericTextBox"),a.secondBox=j.kendoNumericTextBox({format:"#.00",decimals:3}).data("kendoNumericTextBox"),g.on("click",".k-delete",function(b){var c=$(b.currentTarget).parent(),d=a.element.dataSource.getByUid(c.attr("data-uid"));a.element.dataSource.remove(d)}),$("<button>",{type:"button",style:"margin-left: 5px;","class":"k-button col-sm-2"}).text(App.translate("Add")).appendTo(d).on("click",function(){var c=a.firstBox.value()+" "+a.secondBox.value();if(c&&null!==a.firstBox.value()&&null!==a.secondBox.value()){var d=kendo.toString(c);b.dataSource.add({baseValue:d,displayValue:d}),a.clearBoxes()}}),a.element=b})),App.component.FieldNumeric=stampit.compose(App.component.FieldBase,stampit().props({config:null,decimals:null}).init(function(){var a,b=this,c=this.config,d=1;c.decimals=b.decimals?b.decimals:0,c.decimals>0&&(d=Math.pow(10,-c.decimals)),a=$("<input>",{type:"number",name:c.id}).appendTo(c.container),c.isMandatory&&a.attr("required","true"),a=a.kendoNumericTextBox({format:"n"+c.decimals,decimals:c.decimals,spinners:!0,placeholder:c.description,value:c.currentValues[0],max:c.maxValue?c.maxValue:null,min:c.minValue?c.minValue:null,step:d}).data("kendoNumericTextBox"),b.element=a})),App.component.Password=stampit.compose(App.component.FieldBase,stampit().props({config:null}).methods({getValue:function(){return $(this.element).val()}}).init(function(){var a,b=this,c=this.config;a=$("<input>",{type:"password","class":"k-textbox",name:c.id,value:c.currentValues[0],id:c.id,maxlength:c.maxLength,placeholder:c.description,"data-type":c.type}).appendTo(c.container),$("<dt>").text(c.fieldLabel+" "+App.translate("confirm")).appendTo(c.renderTo).attr("required",!0);var d=$("<dd>").appendTo(c.renderTo);$("<input>",{type:"password","class":"k-textbox",name:c.id+"_confirm",id:c.id+"_confirm",maxlength:c.maxLength,placeholder:c.description,"data-type":c.type+"_confirm"}).appendTo(d),b.element=a.get(0)})),App.component.Timepicker=stampit.compose(App.component.FieldBase,stampit().props({config:null,state:null}).methods({enable:function(a){return this.element.enable(!a)},renderTooltip:function(){}}).init(function(){var a,b=this,c=this.config;a=$("<input>",{type:"time",name:c.id,placeholder:c.description}).appendTo(c.el);var d="";c.currentValues&&c.currentValues.length&&(d=kendo.parseDate(App.util.format.hourMinute(c.currentValues[0]))),b.element=a.kendoTimePicker({value:d}).data("kendoTimePicker")})),App.component.TripStages=stampit.compose(App.component.FieldBase,stampit().props({config:null,state:null}).methods({enable:function(a){return this.element.enable(!a)},renderTooltip:function(){}}).init(function(){var a=this,b=this.config,c=$("<div>",{"class":"container-fluid"}).appendTo(b.container),d=[],e=1;$.each(b.availableValues,function(a,f){if(0===a)$('<div class="row">').append($("<span>",{"class":"label map-marker-label",text:"A"})).append($("<strong>",{text:f.name})).appendTo(c);else if(a===b.availableValues.length-1)$('<div class="row">').append($("<span>",{"class":"label map-marker-label",text:"B"})).append($("<strong>",{text:f.name})).appendTo(c);else{var g=$("<div>",{"class":"row"}).appendTo(c),h=$("<div>",{"class":"col-md-6"}).appendTo(g);h.append($("<span>",{"class":"label map-marker-label",text:e})).append($("<span>",{text:f.name}));var i=$("<div>",{"class":"col-md-3"}).appendTo(g),j=$("<div>",{"class":"col-md-3"}).appendTo(g),k=Math.floor(f.value/86400),l=App.util.format.hourMinute(f.value-86400*k),m=$("<input>").appendTo(i);m.kendoNumericTextBox({value:k,min:0,format:"0 "+App.translate("days"),change:function(){updateRouteSummary();
}});var n=$("<input>",{type:"time"}).appendTo(j);n.kendoTimePicker({value:l,interval:15,format:"HH:mm",change:function(){updateRouteSummary()}}),d.push({routeStage:f.id,dayPicker:m.data("kendoNumericTextBox"),timePicker:n.data("kendoTimePicker")}),e++}}),c.enable=function(a){for(var b=0;b<d.length;b++)d[b].dayPicker.enable(a),d[b].timePicker.enable(a),a?(d[b].dayPicker.element.attr("tabindex",0),d[b].timePicker.element.attr("tabindex",1)):(d[b].dayPicker.element.attr("tabindex",-1),d[b].timePicker.element.attr("tabindex",-1))};var f=$("<div>",{"class":"row"}).appendTo(c),g=$("<div>",{"class":"col-md-12"}).appendTo(f);$("<h5>",{text:App.translate("Route Summary")}).appendTo(g);var h=$("<div>",{"class":"routing-summary"}).appendTo(g);updateRouteSummary=function(){$.ajax({url:App.config.serviceUrl+"tripSummary/tripSummary",data:{route:b.refOwner.config.parentObjectId,stopoverDurations:JSON.stringify(c.value())},success:function(a){h.html(App.util.format.routeSummary({duration:a.durationWithoutStopovers,durationWithStopovers:a.durationWithStopovers,distance:a.distance}))}})},c.value=function(){for(var a=[],b=0;b<d.length;b++){var c=d[b],e=86400*c.dayPicker.value(),f=c.timePicker.value();f&&(e+=3600*f.getHours(),e+=60*f.getMinutes()),a.push({routeStage:c.routeStage,duration:e})}return a},updateRouteSummary(),a.element=c})),App.component.HierarchySelection=stampit.compose(App.component.FieldBase,stampit().props({config:null}).methods({setIds:function(a,b){"use strict";if(Array.isArray(a)&&Array.isArray(b))for(var c=0;c<a.length;c++)a[c].checked=b.indexOf(a[c].id)>-1,a[c].items&&this.setIds(a[c].items,b)},getIds:function(a,b){"use strict";for(var c=0;c<a.length;c++){if(a[c].checked&&a[c].id){var d=a[c].id.split(App.config.idDivider);d&&2===d.length&&b.push(d[1])}a[c].hasChildren&&this.getIds(a[c].children.view(),b)}return b},getValue:function(){"use strict";return this.getIds(this.tree.dataSource.view(),[])},renderTooltip:function(){}}).init(function(){var a=this,b=$("<div>").appendTo(a.config.container);a.config=$.extend({currentValues:a.config.currentValues,domainObjectId:a.config.objectId,domainObjectType:a.config.objectType,domainObjectTypes:a.config.domainObjectTypes,refOwner:a.config.refOwner},a.config),a.config.refOwner&&a.config.refOwner.showBusy&&a.config.refOwner.showBusy(),a.tree=b.kendoTreeView({checkboxes:{checkChildren:!0},dataSource:{transport:{read:{url:App.config.serviceUrl+"caesarOrganizationStructure/fullStructure",data:{domainObjectId:a.config.domainObjectId,domainObjectType:a.config.domainObjectType,domainObjectTypes:JSON.stringify(a.config.domainObjectTypes)}}},requestEnd:function(b){a.setIds(b.response,a.config.currentValues),a.config.refOwner&&a.config.refOwner.hideBusy&&a.config.refOwner.hideBusy()},schema:{model:{id:"domainObjectTypeId",children:"items"}}},dataBound:function(a){a.sender.expand(".k-item:first");try{a.sender.updateIndeterminate(a.node)}catch(b){}},loadOnDemand:!1,template:'<span class="treeview-node-indented ao-16px #=App.util.format.domainObjectTypeIcon(item.domainObjectType)#" title="#=App.util.format.domainObjectType(item.domainObjectType)#: #=item.name#">#: App.translate(item.name) #</span>'}).data("kendoTreeView")})),App.component.CapacityChart=stampit.compose(App.component.ChartBase,stampit().props({config:null,element:null,attributes:null,type:null}).methods({formatData:function(a){"use strict";var b=this,c=a.metadata.rows,d=a.metadata.columns,e=[],f=[],g=[],h=[],i=0;this.attributes=a.metadata.attributes;for(var j=0;j<d.length;j++){e=[],f=[],h=[];for(var k=0;k<c.length;k++)h.push(b.attributes[i]),e.push(Math.round(a.tabledata.rows[k][j])),Math.round(a.tabledata.rows[k][j])>100?f.push(0):f.push(Math.round(100-a.tabledata.rows[k][j])),++i;g.push({name:"Filled",tooltip:h,stack:{group:a.metadata.columns[j][0]},data:e},{name:"Empty",tooltip:h,stack:{group:a.metadata.columns[j][0]},data:f})}return g},setColor:function(a,b){var c=$.grep(b,function(b){return b.from<=a&&a<=b.to});return c[0]&&c[0].type?App.component.config.rangeColors[c[0].type]:void 0},getRanges:function(a){for(var b,c=a.category,d=a.options.stack.group,e=0;e<this.attributes.length;e++)this.attributes[e].row===c&&this.attributes[e].column===d&&(b=this.attributes[e].ranges);return b},createColumn:function(a,b){"use strict";var c=kendo.drawing,d=a.origin,e=a.bottomRight(),f=new c.LinearGradient({start:[0,0],end:[1,1],stops:[{offset:0,color:b},{offset:.5,color:b,opacity:.9},{offset:.5,color:b,opacity:.9},{offset:1,color:b}]}),g=new c.Path({fill:f,stroke:{color:b,opacity:.5}}).moveTo(d.x,d.y).lineTo(d.x,e.y).lineTo(e.x,d.y),h=new c.Path({fill:f,stroke:{color:"none"}}).moveTo(e.x,d.y).lineTo(d.x,e.y).lineTo(e.x,e.y),i=new c.Group;return i.append(g,h),i},createCylinder:function(a,b){"use strict";var c=kendo.drawing,d=kendo.geometry,e=a.origin,f=a.center(),g=a.bottomRight(),h=a.width()/2,i=h/3,j=new c.LinearGradient({start:[0,0],end:[1,1],stops:[{offset:0,color:b},{offset:.5,color:b,opacity:.9},{offset:.5,color:b,opacity:.9},{offset:1,color:b}]}),k=new c.Path({fill:j,stroke:{color:b,opacity:.5}}).moveTo(e.x,e.y).lineTo(e.x,g.y).arc(180,0,h,i,!0).lineTo(g.x,e.y).arc(0,180,h,i),l=new d.Arc([f.x,e.y],{startAngle:0,endAngle:360,radiusX:h,radiusY:i}),m=new c.Arc(l,{fill:{color:b},stroke:{color:"#ebebeb"}}),n=new c.Group;return n.append(k,m),n},createThreshold:function(a,b,c,d){"use strict";for(var e=this,f=kendo.drawing,g=kendo.geometry,h=a.origin,i=a.bottomRight(),j=new g.Rect([h.x,h.y],[a.size.width,a.size.height*(100/c)]),k=[],l=0;l<d.length-1;l++){var m=d[l],n=(100-m.to)*j.size.height/100;k.push(e.drawThreshold(h.x,h.y+n,f,g,"th-right")),k.push(e.drawThreshold(i.x-6,h.y+n,f,g,"th-left"))}return k},drawThreshold:function(a,b,c,d,e){var f=new d.Rect([a,b],[5,5]),g=kendo.format("images/threshold/"+e+".png");return new c.Image(g,f)},refresh:function(){var a=this.formatData(data);this.element.setOptions({series:a})}}).init(function(){var a=this,b=this.formatData(a.config);this.height&&(chartAreaData.height=this.height);for(var c=a.config.el,d=[],e=0;e<a.config.metadata.rows.length;e++)d.push(a.config.metadata.rows[e][0]);this.element=c.kendoChart({title:{text:" "},legend:{visible:!1},seriesDefaults:{type:"column",stack:{type:"100%"},labels:{visible:!0,background:"transparent",template:" #= value #%",position:"center"},highlight:{toggle:function(a){a.preventDefault();var b=a.visual,c=a.show?.8:1;b.opacity(c)}},visual:function(b){var c={},d=a.getRanges(b),e="column"==a.type?a.createColumn:a.createCylinder;if(d){var f=[];return b.options.index%2===1?(c=e(b.rect,"#ccc"),f=a.createThreshold(b.rect,b.options.color,b.dataItem,d)):c=e(b.rect,a.setColor(b.dataItem,d)),$.each(f,function(a,b){c.append(b)}),c}return c=e(b.rect,b.options.color)}},series:b,seriesColors:["#047F91","#BBBBBB"],categoryAxis:{categories:d,labels:{rotation:-90,visible:!0,font:"inherit",padding:{right:30}}},valueAxis:{min:0},tooltip:{visible:!0,template:"#= series.stack.group #, #= series.name ##if(series.tooltip[(series.index)%2]) {# #= App.component.config.buildTooltip(series.tooltip[(series.index)%2].description)# #}#"}}).data("kendoChart")})),App.ui.Multiselect=kendo.Class.extend({leftListView:null,rightListView:null,wrapper:null,init:function(a){this.config=$.extend({data:[],valueField:"value",idField:"id",dataModel:{id:"id"},height:150,leftLabel:null,rightLabel:null,positionField:null,maxValue:null},a)},render:function(){"use strict";var a=this;a.wrapper=$("<div>",{"class":"multiselect-container row"}).appendTo(a.config.renderTo),a.filterWrapper=$("<div>",{"class":"row"}).appendTo(a.config.renderTo);var b=$("<div>",{"class":"col-sm-5"}).appendTo(a.wrapper);a.config.leftLabel&&$("<div>",{html:a.config.leftLabel}).appendTo(b),a.leftListView=$("<div>",{"class":"multiselect-listview",height:a.config.height,"data-identifier":"left_list"}).appendTo(b);var c=$("<div>",{"class":"multiselect-button-panel col-sm-2"}).appendTo(a.wrapper),d=$("<button>",{type:"button","class":"k-button"}).appendTo(c).on("click",$.proxy(a.moveRight,this));d.append($("<span>",{text:">"}));var e=$("<button>",{type:"button","class":"k-button"}).appendTo(c).on("click",$.proxy(a.moveAllRight,this));e.append($("<span>",{text:">>"}));var f=$("<button>",{type:"button","class":"k-button"}).appendTo(c).on("click",$.proxy(a.moveAllLeft,this));f.append($("<span>",{text:"<<"}));var g=$("<button>",{type:"button","class":"k-button"}).appendTo(c).on("click",$.proxy(a.moveLeft,this));g.append($("<span>",{text:"<"}));var h=$("<div>",{"class":"col-sm-5"}).appendTo(a.wrapper);a.config.rightLabel&&$("<div>",{html:a.config.rightLabel}).appendTo(h),a.rightListView=$("<div>",{"class":"multiselect-listview","data-identifier":"right_list",height:a.config.height}).appendTo(h),a.config.required&&a.rightListView.attr("required","true"),a.leftFilter=$("<input>",{type:"text",placeholder:"Filter Available","class":"k-textbox col-sm-5",style:"margin: 1em; width: 40%"}).appendTo(a.filterWrapper),a.rightFilter=$("<input>",{type:"text",placeholder:"Filter Selected","class":"k-textbox col-sm-5",style:"margin: 1em; width: 40%"}).appendTo(a.filterWrapper),a.leftListView.kendoListView({dataSource:{data:a.config.data,schema:{model:a.config.dataModel}},template:'<div class="multiselect-row">#:'+a.config.valueField+"#</div>",selectable:!1,select:a.onChange}),a.leftListView.delegate(".multiselect-row","click",function(){$(this).toggleClass("k-state-selected")}),a.rightListView.kendoListView({dataSource:{data:[],schema:{model:a.config.dataModel}},template:'<div class="multiselect-row">#:'+a.config.valueField+"#</div>",selectable:!1,select:a.onChange}),a.rightListView.delegate(".multiselect-row","click",function(){$(this).toggleClass("k-state-selected")}),a.config.positionField&&a.rightListView.data().kendoListView.dataSource.sort({field:a.config.positionField,dir:"asc"}),a.leftListView.on("dblclick",function(b){a.moveRight()}),a.rightListView.on("dblclick",function(){a.moveLeft()}),a.leftFilter.on("keyup",function(){a.filterList(a.leftListView,this)}),a.rightFilter.on("keyup",function(){a.filterList(a.rightListView,this)}),a.initDraggable()},onChange:function(a){"use strict";a.preventDefault();a.sender.dataSource.view();$.map(this.select(),function(a){})},initDraggable:function(){"use strict";var a=this;a.leftListView.kendoDraggable({filter:"div[role=option]",hint:function(a){return a.clone()}}),a.rightListView.kendoDraggable({filter:"div[role=option]",hint:function(a){return a.clone()}});var b=function(b,c,d){b.draggable.hint.hide();var e=c.data().kendoListView.dataSource,f=d.data().kendoListView.dataSource,g=e.getByUid(b.draggable.hint.data().uid);if("left_list"===c.attr("data-identifier")){var h=[g];if(!a.checkMaxValue(h,f.data()))return!1}if(g)f.add(g),e.remove(g);else{var i=f.getByUid(b.draggable.hint.data().uid);if(i){if(!a.config.positionField)return!1;var j=$(document.elementFromPoint(b.clientX,b.clientY)),k=a.config.positionField;if(j=f.getByUid(j.data("uid")),i.get(a.config.idField)!==j.get(a.config.idField)){var l=i.get(k);l&&(i.set(k,j.get(k)),j.set(k,l)),f.sort({field:k,dir:"asc"})}}}};a.rightListView.kendoDropTarget({drop:function(c){b(c,a.leftListView,a.rightListView)}}),a.leftListView.kendoDropTarget({drop:function(c){b(c,a.rightListView,a.leftListView)}})},moveAllRight:function(){this.moveAll(this.leftListView,this.rightListView,"right")},moveAllLeft:function(){this.moveAll(this.rightListView,this.leftListView,"left")},moveAll:function(a,b,c){"use strict";var d=a.data().kendoListView.dataSource,e=b.data().kendoListView.dataSource,f=$.extend({},d.data());return"right"!==c||this.checkMaxValue(f,e.data())?void $.each(f,function(a,b){e.add(b),d.remove(b)}):!1},moveRight:function(){this.move(this.leftListView,this.rightListView,"right")},moveLeft:function(){this.move(this.rightListView,this.leftListView,"left")},move:function(a,b,c){"use strict";var d=a.data().kendoListView,e=d.dataSource,f=b.data().kendoListView.dataSource,g=$.extend({},d.element.find(".multiselect-row.k-state-selected"));return"right"!==c||this.checkMaxValue(g,f.data())?void $.each(g,function(){var a=e.getByUid($(this).data().uid);a&&(f.add(a),e.remove(a))}):!1},checkMaxValue:function(a,b){"use strict";var c=this;return c.config.maxValue&&a.length+b.length>c.config.maxValue?($.when(App.dialog.alert({message:App.translate("You can not select more than "+c.config.maxValue+" items")})),!1):!0},setSelected:function(a){"use strict";if(a)for(var b=0;b<a.length;b++){var c=this.leftListView.data().kendoListView.dataSource.get(a[b]);c&&(this.rightListView.data().kendoListView.dataSource.add(c),this.leftListView.data().kendoListView.dataSource.remove(c))}},filterList:function(a,b){var c=$(b).val();c&&""!==c?a.data().kendoListView.dataSource.filter({field:"displayValue",operator:"contains",value:c}):a.data().kendoListView.dataSource.filter({})},getSelected:function(){return this.rightListView.data().kendoListView.dataSource.view()},getAvailable:function(){return this.leftListView.data().kendoListView.dataSource.data()},getSelectedIds:function(){return this.getIds(this.rightListView)},getAvailableIds:function(){return this.getIds(this.leftListView)},value:function(){return this.getSelectedIds()},getIds:function(a){"use strict";var b=this,c=a.data().kendoListView.dataSource.view(),d=[];return $.each(c,function(a,c){d.push(c[b.config.idField])}),d}}),App.ui.hierarchySelection=kendo.Class.extend({container:null,tree:null,init:function(a){"use strict";var b=this;this.config=$.extend({currentValues:[],domainObjectId:null,domainObjectType:null,domainObjectTypes:[],refOwner:null},a),b.container=$("<div>").appendTo(this.config.renderTo),b.config.refOwner&&b.config.refOwner.showBusy&&b.config.refOwner.showBusy(),b.tree=b.container.kendoTreeView({checkboxes:{checkChildren:!0},dataSource:{transport:{read:{url:App.config.serviceUrl+"caesarOrganizationStructure/fullStructure",data:{domainObjectId:b.config.domainObjectId,domainObjectType:b.config.domainObjectType,domainObjectTypes:JSON.stringify(b.config.domainObjectTypes)}}},requestEnd:function(a){b.setIds(a.response,b.config.currentValues),b.config.refOwner&&b.config.refOwner.hideBusy&&b.config.refOwner.hideBusy()},schema:{model:{id:"domainObjectTypeId",children:"items"}}},dataBound:function(a){a.sender.expand(".k-item:first"),a.sender.updateIndeterminate(a.node)},loadOnDemand:!1,template:'<span class="treeview-node-indented ao-16px #=App.util.format.domainObjectTypeIcon(item.domainObjectType)#" title="#=App.util.format.domainObjectType(item.domainObjectType)#: #=item.name#">#: App.translate(item.name) #</span>'}).data("kendoTreeView")},setIds:function(a,b){"use strict";if(Array.isArray(a)&&Array.isArray(b))for(var c=0;c<a.length;c++)a[c].checked=b.indexOf(a[c].id)>-1,a[c].items&&this.setIds(a[c].items,b)},getIds:function(a,b){"use strict";for(var c=0;c<a.length;c++){if(a[c].checked&&a[c].id){var d=a[c].id.split(App.config.idDivider);d&&2===d.length&&b.push(d[1])}a[c].hasChildren&&this.getIds(a[c].children.view(),b)}return b},value:function(){"use strict";return this.getIds(this.tree.dataSource.view(),[])}}),App.ui.NavigationTreeView=kendo.ui.Widget.extend({options:{name:"NavigationTreeView"},uid:null,treeview:null,filter:null,contextMenu:null,treeItemAnchor:null,init:function(a,b){"use strict";kendo.ui.Widget.fn.init.call(this,a,b),this.uid=App.ui["static"].getNewId(),b.dataTextField=b.dataTextField||"name";var c=App.config.isSmallDevice?"":'data-toggle="tooltip-horizontal"',d='<span class="treeview-node-indented ao-16px #=App.util.format.domainObjectTypeIcon(item.domainObjectType)#" title="#=App.util.format.domainObjectType(item.domainObjectType)#: #=item.'+b.dataTextField+'#" '+c+">#: App.translate(item."+b.dataTextField+") #</span>";b=$.extend({select:this.onSelect,dataBound:this.onDataBound,template:d},b),$(a).append(kendo.format('<div id="tree-view{0}">',this.uid)),$(a).append(kendo.format('<div id="tree-context{0}">',this.uid)),this.treeview=$(kendo.format("#tree-view{0}",this.uid)).kendoTreeView(b).data("kendoTreeView"),this.treeItemAnchor=kendo.format("#tree-view{0} li",this.uid),$(document).on("contextmenu",this.treeItemAnchor,$.proxy(this.onContextMenu,this))},onSelect:function(a){"use strict";var b=a.sender.dataItem($(a.node)),c=b.id.split(App.config.idDivider),d=[{objectType:b.domainObjectType,objectId:c[1]}];a.sender.select($(a.node)),$(a.node).parents("li.k-item").each(function(){var b=a.sender.dataSource.getByUid($(this).data().uid);if(b){var c=b.id.split(App.config.idDivider);d.unshift({objectType:b.domainObjectType,objectId:c[1]})}}),App.updateCurrent({idPath:d}),App.cmd.show(b.domainObjectType,c[1],b.name)},onDataBound:function(a){"use strict";if("undefined"==typeof a.node){a.sender.expand(".k-item:first");var b=a.sender.wrapper.find(".k-item[role='treeitem']:first");if(b.hasClass("k-first")){a.sender.select(b);var c=a.sender.dataSource.getByUid($(b).data().uid),d=c.id.split(App.config.idDivider);App.updateCurrent({objectType:c.domainObjectType,objectId:d[1],objectName:c.name,idPath:[{objectType:c.domainObjectType,objectId:d[1]}]}),App.view.menu||(App.view.menu=new App.ui.Menu,App.view.menu.load(),App.startPoller())}}$(".tooltip").remove()},onContextMenu:function(a){"use strict";var b=a.currentTarget,c=this.treeview.dataItem($(b)),d=c.id.split(App.config.idDivider);a.preventDefault();var e=$("#context-menu");return 0===e.length&&(e=$("<div>",{id:"context-menu"}).appendTo("body")),$.ajax({url:App.config.serviceUrl+"action/contextMenu",data:{object_type:c.domainObjectType,object_id:d[1]},success:function(d){if(d.data.length){var f=[];$.each(d.data[0].items,function(a,d){var e=null;d.items&&d.items.length>0?(e=[],$.each(d.items,function(a,d){e.push(App.application.getMenuItem(d,null,c,b))}),f.push(App.application.getMenuItem(d,e,c,b))):d.action&&f.push(App.application.getMenuItem(d,e,c,b))});var g=e.kendoMenuEx({dataSource:f,anchor:b,delay:8e3,offsetY:a.pageY-10}).data("kendoMenuEx");App.i18n.rtl&&(g.options.offsetX=-g.wrapper.width()),g.show(b,a)}}}),!1},selectNodeByPath:function(a){"use strict";var b=this.treeview,c=function(a){var d=b.dataSource.get(a[0].domainObjectType+App.config.idDivider+a[0].id),e=null;d?(a.length&&(b.select($()),d.loaded()?a.length>1?(a.shift(),d.set("expanded",!0),c(a)):1===a.length&&(e=b.dataSource.get(a[0].domainObjectType+App.config.idDivider+a[0].id),e&&(e.set("selected",!0),b.findByUid(e.uid).scrollintoview({direction:"vertical"}))):b.dataSource.bind("change",function f(d){var g=d.node&&d.node.id;g===a[0].domainObjectType+App.config.idDivider+a[0].id&&(a.shift(),b.dataSource.unbind("change",f),a.length>1?c(a):1===a.length?(e=b.dataSource.get(a[0].domainObjectType+App.config.idDivider+a[0].id),e&&(e.set("selected",!0),b.findByUid(e.uid).scrollintoview({direction:"vertical"}))):d.node.set("selected",!0))})),d.set("expanded",!0)):App.log.error(App.translate("The object has not been found in the tree."),a,!0)};c(a)}}),kendo.ui.plugin(App.ui.NavigationTreeView),App.ui.SelectionTree=kendo.Class.extend({container:null,tree:null,init:function(a){"use strict";this.config=$.extend({data:{},selected:[],valueField:"displayValue",idField:"id",multi:!0,height:150},a);var b=this;b.container=$("<div>",{}).appendTo(this.config.renderTo),b.setSelected(b.config.data,b.config.selected),b.tree=b.container.kendoTreeView({dataSource:b.config.data,dataTextField:b.config.valueField,checkboxes:{checkChildren:!1}}),b.config.multi||b.tree.on("click","input:checkbox",function(){var a=b.tree.find("input:checkbox"),c=a.filter(":checked");a.not(c).prop("disabled",1===c.length)})},setSelected:function(a,b){"use strict";var c=this;$.each(a,function(a,d){d.checked=$.inArray(d.id,b)>-1,d.items&&c.setSelected(d.items,b)})},getSelectedIds:function(a,b){"use strict";var c=this;return $.each(a,function(a,d){d.checked&&b.push(d.id),d.hasChildren&&c.getSelectedIds(d.children.data(),b)}),b},value:function(){"use strict";var a=this;return a.getSelectedIds(a.tree.data("kendoTreeView").dataSource.view(),[])}}),App.ui.Field=kendo.Class.extend({el:null,label:null,description:null,init:function(a){"use strict";this.config=$.extend({renderTo:null,id:null,currentValues:[],availablePlaceholderValues:[],isMandatory:!1,type:null,baseValue:null,objectType:null,objectId:null,parentObjectType:null,parentObjectId:null,maxLength:null,hasMultipleValueSupport:!1,refOwner:null,fileUploadUrl:App.config.serviceUrl+"caesarVfs/create",fileDeleteUrl:App.config.serviceUrl+"caesarVfs/delete"},a);var b=this;if("tripStages"==b.config.type&&!b.config.parentObjectId,b.config.hasOwnProperty("availableValues"))"tripStages"==b.config.type?b.el=App.component.TripStages.create({config:b.config}):b.config.hasMultipleValueSupport?b.el=App.component.Mutiselect.create({config:b.config}):b.el=App.component.Dropdown.create({config:b.config});else switch(b.config.type){case"boolean":b.el=App.component.Checkbox.create({config:b.config});break;case"date":b.config.hasMultipleValueSupport?b.el=App.component.Datelist.create({config:b.config}):b.el=App.component.Datepicker.create({config:b.config,type:"date"});break;case"dateTime":b.el=App.component.Datepicker.create({config:b.config,type:"dateTime"});break;case"decimal":b.el=App.component.FieldNumeric.create({config:b.config,decimals:b.config.decimalPlaces});break;case"duration":b.el=App.component.Durationpicker.create({config:b.config});break;case"hourMinute":b.el=App.component.Timepicker.create({config:b.config});break;case"numeric":b.el=App.component.FieldNumeric.create({config:b.config,decimals:0});break;case"password":b.el=App.component.Password.create({config:b.config});break;case"vfsImage":b.el=App.component.FileUpload.create({config:b.config,isImage:!0});break;case"vfsAttachment":b.el=App.component.FileUpload.create({config:b.config,isImage:!1});break;case"multiset":b.el=App.component.Multiset.create({config:b.config});break;case"hierarchySelection":b.el=App.component.HierarchySelection.create({config:b.config});break;default:b.config.availablePlaceholderValues.length?b.config.hasLinebreakSupport?b.el=App.component.Editor.create({config:b.config}):b.el=App.component.Multiplaceholder.create({config:b.config}):b.el=App.component.Input.create({config:b.config})}return b.config.objectId&&b.setHandlers(),b},setHandlers:function(){"use strict";var a=this,b=a.el.element;if(a.config.hasOwnProperty("availableValues")&&!b.tree)a.config.hasMultipleValueSupport?(b.wrapper.find("button").on("click",function(){a.enableUpdate()}),b.leftListView.on("dblclick",".multiselect-row",function(){a.enableUpdate()}),b.rightListView.on("dblclick",".multiselect-row",function(){a.enableUpdate()}),b.leftListView.data("kendoListView").bind("dataBound",a.enableUpdate)):b.bind("change",a.enableUpdate);else switch(a.config.type){case"multiset":a.config.hasMultipleValueSupport?(a.el.config.container.on("click","button",function(b){a.enableUpdate()}),b.element.on("click",".k-delete",function(b){a.enableUpdate()})):b.bind("change",a.enableUpdate);break;case"boolean":$(b).bind("change",a.enableUpdate);break;case"date":case"dateTime":case"hourMinute":case"duration":a.config.hasMultipleValueSupport?(a.el.config.container.on("click","button",function(b){a.enableUpdate()}),b.element.on("click",".k-delete",function(b){a.enableUpdate()})):b.bind("change",a.enableUpdate);break;case"decimal":case"numeric":b.bind("change",a.enableUpdate).bind("spin",a.enableUpdate);break;case"password":$(b).bind("keyup",a.enableUpdate);break;case"vfsImage":case"vfsAttachment":b.bind("select",a.enableUpdate);break;case"hierarchySelection":a.el.tree.bind("check",a.enableUpdate);break;default:a.config.availablePlaceholderValues.length?a.config.hasLinebreakSupport?b.bind("keyup",a.enableUpdate):b.bind("change",a.enableUpdate):b.tree?b.tree.data("kendoTreeView").dataSource.bind("change",a.enableUpdate):$(b).bind("keyup",a.enableUpdate)}},getValue:function(){"use strict";var a,b,c=this,d=null,e=null,f=[];switch(c.config.type){case"boolean":d=$(c.el.element).is(":checked")?"on":!1;break;case"date":c.config.hasMultipleValueSupport?(b=c.el.element.dataSource.view(),$.each(b,function(b,c){a=c.currentValues?c.currentValues[0]:c.displayValue,f.push(a)}),d=f):(e=kendo.parseDate(c.el.getValue()),e&&(d=kendo.toString(e,App.config.dateFormat)),d&&0===d.length&&(d=null));break;case"multiset":if(b=c.el.element.dataSource.view(),0===b.length)d=null;else{for(var g="#(",h=0;h<b.length;h++)g+=h===b.length-1?"#("+b[h].baseValue+"))":"#("+b[h].baseValue+") ";d=g}break;case"dateTime":e=kendo.parseDate(c.el.getValue()),e&&(App.util.dateToGMT(e),d=kendo.toString(e,App.config.dateTimeFormat)),d&&0===d.length&&(d=null);break;case"duration":e=kendo.parseDate(c.el.getValue()),null!==e&&(d=3600*e.getHours(),d+=60*e.getMinutes(),0===d&&(d=null));break;case"hourMinute":e=kendo.parseDate(c.el.getValue()),null!==e&&(d=3600*e.getHours(),d+=60*e.getMinutes(),0===d&&(d=null));break;case"vfsAttachment":case"vfsImage":d=c.el.element.options.fileName,"string"==typeof d&&0===d.length&&(d=null);break;case"numeric":d=c.el.getValue();break;default:"function"==typeof c.el.getValue?(d=c.el.getValue(),c.config.availablePlaceholderValues.length&&(d=c.config.hasLinebreakSupport?d.replace(/&lt;/g,"<").replace(/&gt;/g,">"):d.join(";"))):d=$(c.el).val(),"string"==typeof d&&0===d.length&&(d=null,"numeric"!==c.config.type&&"decimal"!==c.config.type||(d=0))}return d},enable:function(a){"use strict";var b=this;b.el&&"function"==typeof b.el.enable?b.el.enable(a):a?$(b.el).removeAttr("disabled"):$(b.el).attr("disabled","true")},isVisible:function(){"use strict";var a=this,b=!0;return b=a.el.wrapper?a.el.wrapper.is(":visible"):a.el.visible?a.el.visible:$(a.el).is(":visible")},renderTooltip:function(a){"use strict";this.el&&"function"==typeof this.el.renderTooltip&&($.extend(this.el,{description:a}),this.el.renderTooltip())},enableUpdate:function(){var a=$(".k-ext-dialog").find('[data-action="save"]');a.attr("disabled",!1),a.removeClass("disabled"),a.find(":input").attr("tabindex",0),a.find(".k-dropdown-wrap:not(.k-state-disabled)").parents(".k-dropdown").attr("tabindex",0)}}),App.ui.login={dialog:null,applicationProviders:[],returnRoute:null,html:'<form autocomplete="on"><ul class="list-unstyled"><li><input id="applicationsCombo" validationMessage="Please select an application" name="applicationProviderId" style="width: 280px;"/><span class="k-invalid-msg" data-for="applicationsCombo"></span></li><li><input type="text" id="username" required validationMessage="Please enter your username" class="k-textbox" name="username" value="" placeholder="User Name"/><span class="k-invalid-msg" data-for="username"></span></li><li><input type="password" id="password" required validationMessage="Please enter your password" class="k-textbox" name="password" value="" placeholder="Password"/><span class="k-invalid-msg" data-for="password"></span></li><li id="validation-error"></li></ul></form>',show:function(a){"use strict";var b=this;b.returnRoute=a,$("#loginDialog").is("div")&&$("#loginDialog").remove(),$.ajax({url:App.config.serviceUrl+"caesarAuthentication/applicationProviders",cache:!1,timeout:5e3,success:function(a,c,d){if(""===a)return void App.log.emergencyEject(d);var e=$("body");b.elContent=$("<div>",{id:"loginDialog",html:b.html}).appendTo(e),b.dialog=b.elContent.kendoExtDialog({minWidth:300,width:App.config.isSmallDevice?310:500,height:App.config.isSmallDevice?240:380,buttons:[{name:App.translate("Login"),click:function(){b.onFormSubmit()}}],actions:[],modal:!0,title:App.translate("Login"),visible:!1,message:""}).data("kendoExtDialog");var f=$("#applicationsCombo");App.config.appId?f.hide():(f.attr("required","required"),f.kendoDropDownList({optionLabel:App.translate("Select Application"),dataTextField:"applicationName",dataValueField:"id",autoBind:!1,minLength:3,height:220,dataSource:{serverFiltering:!1,transport:{read:{url:App.config.serviceUrl+"caesarAuthentication/applicationProviders"}}}})),b.elContent.keypress(function(a){var c=!0;return 13===a.which&&(b.onFormSubmit(),c=!1),c}),App.config.isSmallDevice&&(b.elContent.css("background-image","none"),b.elContent.find("form").css("margin-top",0),b.elContent.find("form .k-textbox, form .k-combobox, form .k-dropdown").css("width","100%"),e.css({"font-size":"14px"})),b.dialog.center().open(),setInterval(function(){document.cookie.match(/ROAMSESSIONKEY/g)&&(location.hash="!"+App.ui.login.returnRoute,window.location.reload(),clearInterval(this))},5e3)},error:function(a){App.log.emergencyEject(a)}})},onFormSubmit:function(){"use strict";var a=this,b=$("#validation-error"),c=a.elContent.find("form").kendoValidator().data("kendoValidator");if(b.empty().hide(),c.validate()){b.hide();var d=App.config.appId;if(!d){var e=$("#applicationsCombo");e.length&&(d=e.data("kendoDropDownList").value())}App.user.doLogin({username:$("#username").val(),password:$("#password").val(),appId:d,returnRoute:a.returnRoute,error:function(c){switch(c.status){case 500:a.addValidationMessage("Logon failed due to server error.");break;default:if(""!==c.responseText){var d=$.parseJSON(c.responseText);$.each(d.messages,function(a,c){$("<span>",{"class":"k-widget k-tooltip k-tooltip-validation k-invalid-msg",html:'<span class="k-icon k-warning"> </span> '+c}).appendTo(b)})}}b.show()}})}},addValidationMessage:function(a){"use strict";$("<span>",{"class":"k-widget k-tooltip k-tooltip-validation k-invalid-msg",html:'<span class="k-icon k-warning"> </span> '+a}).appendTo("#validation-error")}},App.ui.MenuBase=kendo.Class.extend({config:{},elMenu:null,init:function(a){"use strict";return this.config=$.extend({},a),this},renderMenuColumn:function(a,b,c,d,e){"use strict";switch(a){case"megamenu-edit":a="edit";break;case"megamenu-report":a="signal";break;case"alarmsmenu-active":a="bell fg-dangerous";break;case"alarmsmenu-acknowledged":a="bell fg-bad";break;case"alarmsmenu-normal":a="bell fg-good";break;case"notificationsmenu-events":a="time";break;case"notificationsmenu-alarms":a="bell";break;case"notificationsmenu-errors":a="warning-sign"}var f=kendo.template('<li#if(containerId){# id="#=containerId#"#}#><ul><li><div class="menu-column-header-glyphicon"><span class="glyphicon glyphicon-#=icon#"></span><span class="menu-column-header-text"><span class="navbar-left">#=title#</span>#if(titleAction){# #=titleAction##}#</span></div><ul class="menu-column-content menu-column-content-glyphicon">#=content#</ul></li></ul></li>');return f({title:b,icon:a,content:c,containerId:e,titleAction:d})}}),App.ui.Menu=App.ui.MenuBase.extend({el:null,config:{url:null,objectType:null,objectId:null,id:""},init:function(a){"use strict";App.ui.MenuBase.fn.init.call(this,$.extend({id:"navigation-menu",url:App.config.serviceUrl+"action/menu",objectType:App.current.objectType,objectId:App.current.objectId},a)),this.elMenu=$("#"+this.config.id)},load:function(a,b){"use strict";var c=this;c.config.objectType=a||c.config.objectType||App.current.objectType,c.config.objectId=b||c.config.objectId||App.current.objectId,$.ajax({url:c.config.url,data:{menu:"testMenu",object_type:c.config.objectType,object_id:c.config.objectId},success:function(a){var b,d,e=a.data[0].items,f=null;c.elMenu.empty();var g=function(a){var b={text:App.translate(a.name)};if(a.action&&a.action.enabled?(b.encoded=!1,b.text='<span data-id="'+a.action.id+'">'+App.translate(a.name)+"</span>"):b.text=App.translate(a.name),a.items){b.items=[];for(var c=0;c<a.items.length;c++)b.items.push(g(a.items[c]))}return b};for(b=0;b<e.length;b++){var h=e[b];switch(h.category){case"report":h.items&&(f=g(h),c.elMenu.append(c.buildMainMenuSection(h)));break;case"edit":c.elMenu.append(c.buildMainMenuSection(h));break;case"help":if(h.items){var i=$("#navigation-help");for(d=h.items.length-1;d>=0;d--)$(kendo.format('<li><a href="{0}" class="item" target="_blank">{1}</a></li>',h.items[d].action.url,h.items[d].name)).prependTo(i)}}}f&&($("#menu-report").kendoMenu({orientation:"vertical",closeOnClick:!1,dataSource:f.items,select:function(a){var b=$(a.item).find("> span > span[data-id]").data("id");
b&&App.router.navigate(kendo.format("/{0}/{1}/report/{2}",App.current.objectType,App.current.objectId,App.router.encodeParam(b)))},hoverDelay:600}),$("#menu-report").on("click",function(a){a.preventDefault(),a.stopPropagation()}))}})},buildMainMenuSection:function(a){var b=null;return"edit"===a.category&&(b="menu-edit-container"),this.renderMenuColumn("megamenu-"+a.category,App.translate(a.name),'<li><ul id="menu-'+a.category+'"></ul></li>',null,b)},destroy:function(){},refreshActionsMenu:function(){"use strict";var a=this,b=null,c=App.view.navigationTree.treeview.select(),d=App.view.navigationTree.treeview.dataSource.getByUid($(c).data().uid);return d.domainObjectType!==App.current.objectType&&d.id!==App.current.objectId||(b=c),$.ajax({url:App.config.serviceUrl+"action/contextMenu",data:{object_type:App.current.objectType,object_id:App.current.objectId},success:function(c){var e=[];if(c.data.length&&($.each(c.data[0].items,function(a,c){var f=null;c.items&&c.items.length>0?(f=[],$.each(c.items,function(a,c){f.push(App.application.getMenuItem(c,null,d,b))}),e.push(App.application.getMenuItem(c,f,d,b))):c.action&&e.push(App.application.getMenuItem(c,f,d,b))}),$("#menu-edit").kendoMenu({orientation:"vertical",dataSource:e,select:function(){return!1},hoverDelay:600})),e.length){$("#menu-edit-container").show();var f=$("#menu-edit").find("> .k-item");a.setClickHandler(e,f)}else $("#menu-edit-container").hide()}}),!1},setClickHandler:function(a,b){"use strict";var c=this;$.each(a,function(a,d){if(d.click&&$(b[a]).click(function(a){c.item=$(a.target).parents("li"),d.click.call(c,a)}),d.items){var e=$(b[a]).find(".k-group > .k-item");c.setClickHandler(d.items,e)}})}}),App.ui.Toast=kendo.Class.extend({delay:8e3,parentEl:null,el:null,queue:[],queueId:0,notificationTypeError:"Error",notificationTypeReport:"Report",notificationTypeAlarm:"Alarm",notificationTypeInfo:"Info",init:function(a){"use strict";$.extend(this,a),this.el=$("<div>",{"class":"toast-container"}).appendTo("body"),this.el.css({top:this.parentEl?this.parentEl.height():4,"margin-left":-this.el.outerWidth()/2,"margin-top":-this.el.outerHeight()/2})},show:function(a){"use strict";$("<div>",{"class":"k-block toast",html:a}).appendTo(this.el).show("blind").delay(this.delay).hide("blind",function(){$(this).remove()})},hide:function(a){"use strict";a&&a.hide("blind",function(){$(this).remove()})},showNotificationSimple:function(a,b,c){"use strict";var d=kendo.template('<div class="#=cssClass#"><p><strong>#=title#</strong></p><p>#=description#</p></div>');this.show(d({cssClass:this.getNotificationTypeClass(a),title:b,description:c}))},showNotification:function(a,b,c,d,e,f){"use strict";var g=kendo.template('<div class="row"><div class="#=cssClass# col-sm-8"><p><strong>#=title#</strong></p><p>#=description#</p></div><div class="toast-buttons col-sm-4"></div></div>'),h=$("<div>",{"class":"k-block toast",html:g({cssClass:this.getNotificationTypeClass(c),title:d,description:e})}),i=h.find(".toast-buttons"),j=this,k=f===App.view.Notification.criticalityHigh;switch(c){case this.notificationTypeReport:$("<button>",{text:App.translate("Open {0}",App.translate("Report")),"class":"k-button",click:function(){App.view.Notification.openReport(b,$(this).closest(".toast"))}}).appendTo(i),k&&$("<button>",{text:App.translate("Dismiss {0}",App.translate("Report")),"class":"k-button",click:function(){App.view.Notification.dismiss(a,$(this).closest(".toast"))}}).appendTo(i);break;case this.notificationTypeError:$("<button>",{text:App.translate("Reprocess {0}",App.translate("Error")),"class":"k-button",click:function(){App.view.Notification.reprocess(a,b,$(this).closest(".toast"))}}).appendTo(i),k&&$("<button>",{text:App.translate("Discard {0}",App.translate("Error")),"class":"k-button",click:function(){App.view.Notification.discard(a,b,$(this).closest(".toast"))}}).appendTo(i)}k?($("<button>",{html:App.translate("Close Notification"),"class":"k-button",click:function(){j.hide($(this).closest(".toast"))}}).appendTo(i),h.appendTo(this.el).show("fade")):(i.css("opacity",0),h.hover(function(){i.animate({opacity:1}),j.queue.map(function(a){window.clearTimeout(a.timeoutID)})},function(){i.animate({opacity:0}),j.queue.map(function(a){a.timeoutID=window.setTimeout(a.next,j.delay)})}),h.appendTo(this.el).show("fade").queue(function(a){var b=j.queueId++;$(this).data("queueId",b),j.queue[b]={timeoutID:window.setTimeout(a,j.delay),next:a}}).hide("fade",function(){delete j.queue[$(this).data("queueId")],$(this).remove()}))},getNotificationTypeClass:function(a){"use strict";var b="";switch(a){case this.notificationTypeInfo:b="toast-notification-info";break;case this.notificationTypeAlarm:b="toast-notification-alarm";break;case this.notificationTypeError:b="toast-notification-error";break;case this.notificationTypeReport:b="toast-notification-report"}return b}}),App.ui.WidgetPanel=kendo.Class.extend({config:{},el:null,elContainer:null,elContent:null,elHeader:null,elHeaderTools:null,elStatus:null,item:null,init:function(a){"use strict";var b,c=this,d=null;c.config=$.extend({widgetType:null,location:App.config.locationMainArea,positionNumber:"0",name:"untitled",pictureName:"",height:App.config.widgetHeight,displayMini:!1,isHeadless:!1,isTemporary:!1,objectName:null},a),d=null!==c.config.objectName&&""!==c.config.objectName?kendo.format("{0} <strong>[{1}]</strong>",c.config.objectName,c.config.name):kendo.format("<strong>[{0}]</strong>",c.config.name);var e=App.view.mainArea;switch(c.config.location){case App.config.locationSideBar:e=App.view.sideBar,c.config.displayMini=!0;break;default:case App.config.locationMainArea:}var f=kendo.support.isRtl(e);c.elContainer=$("<div>",{"class":"widget","data-id":c.config.id}),"-1"===c.config.positionNumber?c.elContainer.prependTo(e):c.elContainer.appendTo(e),c.elContainer.data("widget",this),c.elHeader=$("<div>",{"class":"widget-header","data-toggle":"tooltip",title:c.config.description}).appendTo(c.elContainer),c.elHeaderTools=$("<div>",{"class":"widget-header-tools"}).appendTo(c.elHeader);var g=[{title:App.translate("Export to Excel"),"data-toggle":"tooltip","data-action":"widget-export-excel",role:"button","class":"ico-file-excel-o",constraint:"default,headless,temporary",click:function(){var a=$(this).closest(".widget").data("widget");a&&a.exportData()}},{title:App.translate("Print"),"data-toggle":"tooltip","data-action":"widget-print",role:"button","class":"glyphicon glyphicon-print",constraint:"default,headless,temporary"},{title:App.translate("Settings"),"data-toggle":"tooltip","data-action":"widget-settings",role:"button","class":"glyphicon glyphicon-cog",constraint:"default,headless"},{title:App.translate("Open widget in new window"),"data-toggle":"tooltip","data-action":"widget-new-window",role:"button","class":"glyphicon glyphicon-new-window",constraint:"default,temporary"},{title:App.translate("Minimize widget"),"data-toggle":"tooltip","data-action":"widget-toggle-minimize",role:"button","class":"glyphicon glyphicon-minus",constraint:"default,temporary"},{title:App.translate("Close widget"),"data-toggle":"tooltip",role:"button","class":"glyphicon glyphicon-remove",click:function(){window.close()},constraint:"headless"},{title:App.translate("Close widget"),"data-toggle":"tooltip",role:"button","class":"glyphicon glyphicon-remove",click:function(){$(this).closest(".widget").fadeOut(function(){e.find(".widget[data-id!="+c.config.id+"][data-location!="+App.config.locationNone+"]").show()})},constraint:"temporary"}],h="default";c.config.isHeadless?h="headless":c.config.isTemporary&&(h="temporary");var i=["grid"],j=!0;if(j&&(j=i.indexOf(c.config.widgetType)>-1,!j&&"widgetGroup"===c.config.widgetType))for(var k=0;k<c.config.children.length;k++)if(i.indexOf(c.config.children[k].widgetType)>-1){j=!0;break}for(var l=0;l<g.length;l++){var m=g[l];!(m.constraint.indexOf(h)>-1)||"alarms"===c.config.id&&"widget-new-window"===m["data-action"]||"alarmMap"===c.config.id&&"widget-settings"===m["data-action"]||!j&&"widget-export-excel"===m["data-action"]||(delete m.constraint,$("<span>",m).appendTo(c.elHeaderTools))}$("<img>",{"class":"widget-header-icon",alt:"widget header icon",src:"images/icons/32px/"+c.config.pictureName+".png"}).appendTo(c.elHeader),b=$("<span>",{html:d,"class":"widget-header-title"}).appendTo(c.elHeader),b.keyup(function(){});var n=c.config.isHeadless?"90%":"";c.elContent=$("<div>",{"class":"widget-content",height:n}).appendTo(c.elContainer),c.config.height=c.getHeight(),c.el=$("<div>",{"class":"widget-body k-content",height:c.config.height}).appendTo(c.elContent),c.elStatus=$("<div>",{"class":"widget-status k-pager-wrap hidden"}).appendTo(c.elContent),b.css(f?"left":"right",c.elHeaderTools.outerWidth()+2),c.config.el=c.el,c.config.panel=c,c.config.elTitle=b,c.config.elStatus=c.elStatus},show:function(){"use strict";var a=App.util.format.capitalize(this.config.widgetType);App.widget[a]?(this.item=new App.widget[a](this.config),this.item.load()):App.config.parentWidgetType===this.config.widgetType||App.log.error(App.translate("Widget type {0} not implemented right now.",a),this.config)},enable:function(){this.el.attr("disable","disable")},disable:function(){this.el.removeAttr("disable")},exportData:function(){this.item&&$.isFunction(this.item.exportData)&&this.item.exportData()},refresh:function(){"use strict";var a=this.getHeight();return this.item&&this.item.config&&(this.item.config.location=this.config.location,this.item.config.height=a),this.el&&this.el.height(a),this.item?this.item.refresh():void 0},update:function(a){"use strict";this.config=$.extend(this.config,a);var b=this,c=$.extend({id:b.config.id,user:App.config.user.id,name:b.config.name,location:b.config.location,positionNumber:b.config.positionNumber,widgetType:b.config.widgetType,widgetData:b.config.widgetData,parent:b.config.parent,description:b.config.description,pictureName:b.config.pictureName,domainObjectType:b.config.objectType},a);$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:c,success:function(){b.refresh()}})},onDrop:function(){"use strict";this.item&&this.item.config&&(this.item.config.location=this.config.location,this.item.onDrop())},getHeight:function(){"use strict";var a=null,b=null,c=this;if(!this.config)return a;if(this.config.isHeadless)switch(a="100%",this.config.widgetType){case"widgetGroup":a=c.elContent.height()}else switch(this.config.widgetType){case"assetCommand":case"detail":case"list":break;case"dashboard":switch(b=$.parseJSON(this.config.widgetData),b.reportViewType){case"radial":case"linear-vertical":case"linear-horizontal":break;default:case"line":a=App.config.widgetHeight}break;case"grid":a=App.config.widgetHeight;break;default:a=App.config.widgetHeight}return a},destroy:function(){"use strict";this.item&&this.item.destroy(),this.elContainer&&this.elContainer.remove(),this.item=null,this.el=null,this.elContainer=null,this.elContent=null,this.elHeader=null,this.elHeaderTools=null,this.elStatus=null,this.config=null}}),App.ui.WidgetGroupPanel=App.ui.WidgetPanel.extend({tabstrip:null,items:[],init:function(a){"use strict";var b=this;b.config=$.extend({widgetData:[]},a),App.ui.WidgetPanel.fn.init.call(this,b.config);var c=[];$.each(b.config.children,function(a,d){c[a]={text:d.name,content:" ",imageUrl:"images/icons/16px/"+d.pictureName+".png",positionNumber:parseInt(d.positionNumber)},d.domainObjectId=b.config.domainObjectId}),c.sort(App.util.sortWidget),b.tabstrip=b.el.kendoTabStrip({animation:{open:{effects:"fadeIn"}},dataTextField:"text",dataContentField:"content",dataImageUrlField:"imageUrl",dataSource:c,activate:function(a){var c=b.tabstrip.select().index(),d=b.config.children[c],e=$(a.contentElement);e.height(b.el.innerHeight()-b.tabstrip.tabGroup.outerHeight()-parseInt(b.tabstrip.tabGroup.css("padding-top"))-1);var f=e.children(".k-grid-content");if(f.length){var g=e.children().not(".k-grid-content"),h=0;g.each(function(){h+=$(this).outerHeight()}),f.height(e.innerHeight()-h)}var i=App.util.format.capitalize(d.widgetType);d.el=e,d.elStatus=b.elStatus;var j=new App.widget[i](d);d.initialized||(App.widget[i]?(j.load(),b.items.push(j),d.showStatusBar=j.showStatusBar?j.showStatusBar:!1,d.initialized=!0):App.config.parentWidgetType===d.widgetType||App.log.error(App.translate("Widget type {0} not implemented right now.",i),d)),b.item=j,b.elHeaderTools.find('[data-action="widget-export-excel"]').toggleClass("widget-header-action-disabled",!$.isFunction(b.item.exportData)),d.showStatusBar?(b.config.isHeadless&&(b.elContent.height(b.elContent.height()-60),b.el.height(b.elContent.height()-60)),b.elStatus.removeClass("hidden")):b.elStatus.addClass("hidden")}}).data("kendoTabStrip"),b.tabstrip.tabGroup.children().each(function(a){$(this).attr({title:b.config.children[a].description,"data-toggle":"tooltip"})}),b.tabstrip.select(b.tabstrip.tabGroup.children("li:first"))},destroy:function(){"use strict";for(var a=0;a<this.items.length;a++){var b=this.items[a];b.destroy(),b=null}this.items=null,this.tabstrip&&this.tabstrip.destroy(),this.tabstrip=null,this.el&&(this.el.empty(),this.el=null),this.elContainer=null,this.elContent=null,this.elHeader=null,this.elHeaderTools=null,this.elStatus=null,this.config=null}}),App.ui.Notification=App.ui.MenuBase.extend({lastRefresh:null,notificationTypeError:"Error",notificationTypeReport:"Report",notificationTypeAlarm:"Alarm",notificationTypeInfo:"Info",criticalityHigh:"userEventCriticality.high",criticalityMedium:"userEventCriticality.medium",criticalityLow:"userEventCriticality.low",ids:[],notificationCount:0,init:function(a){"use strict";return App.ui.MenuBase.fn.init.call(this,$.extend({},a)),this.elMenu=$("#menu-notifications > .dropdown-menu"),$("body").on("click",'[data-action="dismiss-all-notifications"]',$.proxy(this.dismissAll,this)),this},refresh:function(){"use strict";var a=this;return $.ajax({url:App.config.serviceUrl+"notificationCenter/newNotifications",success:function(b){var c={};c[a.notificationTypeReport]={title:App.translate("Reports"),icon:"notificationsmenu-events",html:"",renderer:a.buildNotificationReportContent},c[a.notificationTypeError]={title:App.translate("Errors"),icon:"notificationsmenu-errors",html:"",renderer:a.buildNotificationErrorContent},c[a.notificationTypeAlarm]={title:App.translate("Alarms"),icon:"notificationsmenu-alarms",html:"",renderer:a.buildNotificationAlarmContent},a.notificationCount=b.data.length,!a.lastRefresh&&b.now&&(a.lastRefresh=new Date(b.now.replace(/-/g,"/").replace(/T/," ")),a.lastRefresh.setSeconds(a.lastRefresh.getSeconds()-App.config.notificationThreshold));for(var d=0;d<a.notificationCount;d++){var e=b.data[d];if(c[e.notificationType].html+=c[e.notificationType].renderer(e,b.now),-1===a.ids.indexOf(b.data[d].notification.id)){a.ids.push(b.data[d].notification.id);var f=!0;if(e.time){var g=new Date(e.time.replace(/-/g,"/").replace(/T/," "));f=g>=a.lastRefresh}e.criticality!==a.criticalityLow&&f&&a.displayToast(e)}}a.notificationCount>0&&b.now&&(a.lastRefresh=new Date(b.now.replace(/-/g,"/").replace(/T/," "))),a.clearMenu(),a.setBadge(a.notificationCount);for(var h in c)c.hasOwnProperty(h)&&c[h]&&c[h].html.length>0&&a.elMenu.append(a.renderMenuColumn(c[h].icon,c[h].title,c[h].html,'<a data-action="dismiss-all-notifications" class="navbar-right cursor-pointer">'+App.translate("Dismiss All")+"</a>",null));a.elMenu.css("max-height",$("body").innerHeight()-a.elMenu[0].offsetTop-60),a.elMenu.find("a").on("click",function(b){var c=$(b.target),d=c.closest(".notif-text"),e=d.data("id"),f=d.data("event-id"),g=c.data("action");switch(g){case"notification-reprocess":a.reprocess(e,f,d);break;case"notification-discard":a.discard(e,f,d);break;case"notification-alarm-details":break;case"notification-dismiss":a.dismiss(e,d);break;case"notification-report-open":a.openReport(f);break;case"notification-report-details":}})}})},buildNotificationReportContent:function(a,b){"use strict";var c="";return c+="<li>",c+='<div class="notif-text" data-id="'+a.notification.id+'" data-event-id="'+a.eventid+'">'+App.translate(a.title.replace("Report: ","")),c+='<div class="notif-time">'+App.util.format.fuzzyTime(a.time,b)+"</div>",c+='<div class="notif-action">',c+='<a class="cursor-pointer" data-action="notification-report-open">'+App.translate("Open")+"</a> | ",c+='<a class="cursor-pointer" data-action="notification-dismiss">'+App.translate("Dismiss")+"</a>",c+="</div>",c+="</div>",c+="</li>"},buildNotificationErrorContent:function(a,b){"use strict";var c="";return c+='<div class="notif-text" data-id="'+a.notification.id+'" data-event-id="'+a.eventid+'">'+App.translate(a.title),c+='<div class="notif-time">'+App.util.format.fuzzyTime(a.time,b)+"</div>",c+='<div class="notif-description">'+a.description+"</div>",c+='<div style="margin-left: 10px;">',c+='<a class="cursor-pointer" data-action="notification-reprocess">'+App.translate("Reprocess")+"</a> | ",c+='<a class="cursor-pointer" data-action="notification-discard">'+App.translate("Discard")+"</a></div>",c+="</div>"},buildNotificationAlarmContent:function(a,b){"use strict";var c="";return c+='<div class="notif-text" data-id="'+a.notification.id+'">'+App.translate(a.title),c+='<div class="notif-time">'+App.util.format.fuzzyTime(a.time,b)+"</div>",c+='<div class="notif-description">'+a.description+"</div>",c+='<div style="margin-left:10px;">',c+='<a class="cursor-pointer" data-action="notification-dismiss">'+App.translate("Dismiss")+"</a></div>",c+="</div>"},displayToast:function(a){"use strict";a.notificationType===this.notificationTypeReport&&(a.description="&nbsp;"),App.view.toast.showNotification(a.notification.id,a.eventid,a.notificationType,a.title,a.description,a.criticality)},openReport:function(a,b){"use strict";$.ajax({url:App.config.serviceUrl+"caesarReporting/viewReport",data:{notificationid:a},success:function(a){var c=window.open(a.reportLink,"_blank");c?(c.focus(),b&&App.view.toast.hide(b)):App.log.error(App.translate("You need to enable popups for this site."),null,!0)}})},discard:function(a,b,c){"use strict";var d=this;$.ajax({url:App.config.serviceUrl+"caesarErrorEvent/discard",data:{errorEventId:b},success:function(){d.dismiss(a,c)}})},reprocess:function(a,b,c){"use strict";var d=this;$.ajax({url:App.config.serviceUrl+"caesarErrorEvent/reprocess",data:{errorEventId:b},success:function(){d.dismiss(a,c)}})},dismiss:function(a,b){"use strict";var c=this;$.ajax({url:App.config.serviceUrl+"notificationCenter/dismiss",data:{id:a},success:function(){App.view.toast.hide(b),c.notificationCount--,c.setBadge(c.notificationCount)},error:function(a){switch(a.status){case 200:App.view.toast.hide(b),c.notificationCount--,c.setBadge(c.notificationCount)}}})},dismissAll:function(){"use strict";var a=this;$.when(App.dialog.okCancel({title:App.translate("Dismiss all?"),message:App.translate("Are you sure you want to dismiss all notifications?"),width:400,icon:App.dialog.iconQuestion})).done(function(b){"OK"===b.button&&$.ajax({url:App.config.serviceUrl+"notificationCenter/dismissAll",success:function(){App.view.toast.el.children().each(function(){App.view.toast.hide(this)}),a.notificationCount=0,a.setBadge(a.notificationCount),a.clearMenu()},error:function(b){switch(b.status){case 200:App.view.toast.el.children().each(function(){App.view.toast.hide(this)}),a.notificationCount=0,a.setBadge(a.notificationCount)}}})})},setBadge:function(a){$("#menu-notifications a span.badge").html(a>0?a:"")},clearMenu:function(){this.elMenu.empty(),0===this.notificationCount&&this.elMenu.html('<li class="no-items">'+App.translate("No notifications.")+"</li>")}}),App.ui.Alarm=App.ui.MenuBase.extend({alarmTypeAll:"All Alarms",allAlarmsDomainDataView:"allActiveAlarms",elMenu:null,elButtonBar:null,widgetData:null,domainDataView:null,objectType:null,objectId:null,alarmWidgetDataId:"alarms",alarmMapWidgetDataId:"alarmMap",init:function(a){"use strict";return App.ui.MenuBase.fn.init.call(this,$.extend({},a)),this.elMenu=$("#menu-alarms > .dropdown-menu"),this.elButtonBar=$("#alarmBar .alarm-items"),this},refresh:function(){"use strict";var a=this;return $.ajax({url:App.config.serviceUrl+"caesarAssetAlarm/activeAlarms",success:function(b){var c=a.elButtonBar.find("li.alarm-button");if(c.remove(),b.count){a.elButtonBar.append(a.buildAlarmButton(a.alarmTypeAll,b.count,b.active));for(var d=0;d<b.alarmTypes.length;d++){var e=b.alarmTypes[d];a.elButtonBar.append(a.buildAlarmButton(e.name,e.count,e.active))}c=a.elButtonBar.find("li.alarm-button"),c.on("click",function(){a.showWidget($(this).data("alarm-type"),$(this).data("alarm-filterstatus"))})}App.application&&App.application.resizeHandler(),a.buildAlarmMenu(b)}})},buildAlarmMenu:function(a){var b=this;if(b.elMenu.empty(),a.count){for(var c="",d="",e=null,f=0;f<a.alarmTypes.length;f++)e=a.alarmTypes[f],c+='<li class="item" data-alarm-type="'+e.name+'" data-alarm-filterStatus="alarmStateValue.active">'+App.translate(e.name)+'<span class="badge pull-right">'+kendo.toString(e.active,"n0")+"</span></li>",e.count-e.active>0&&(d+='<li class="item" data-alarm-type="'+e.name+'" data-alarm-filterStatus="alarmStateValue.acknowledged">'+App.translate(e.name)+'<span class="badge pull-right">'+kendo.toString(e.count-e.active,"n0")+"</span></li>");b.elMenu.append(this.renderMenuColumn("alarmsmenu-active",App.translate("Active"),c,null,null)),""!==d&&b.elMenu.append(this.renderMenuColumn("alarmsmenu-acknowledged",App.translate("Acknowledged"),d,null,null)),b.elMenu.find(".item").on("click",function(){b.showWidget($(this).data("alarm-type"),$(this).data("alarm-filterstatus"))})}else b.elMenu.html('<li class="no-items">'+App.translate("No alarms.")+"</li>");$("#menu-alarms a span.badge").html(a.count>0?kendo.toString(a.count,"n0"):"")},buildAlarmButton:function(a,b,c){"use strict";return'<li class="alarm-button alarmstatus-'+(0===c?"":"not-")+'all-acknowledged" data-alarm-type="'+a+'"><a><span class="pull-left icon-alert"></span>'+App.translate(a)+'<span class="badge">'+kendo.toString(c,"n0")+"/"+kendo.toString(b,"n0")+"</span></a></li>"},getWidgetData:function(a){"use strict";var b=this;b.domainDataView=null;a:for(var c=0;c<App.config.domainDataViews.length;c++){var d=App.config.domainDataViews[c];if(d.features&&d.features.length)for(var e=0;e<d.features.length;e++)if("alarmActions"===d.features[e]){b.domainDataView=d.id;break a}}b.domainDataView?(b.objectType=App.current.idPath[0].objectType,b.objectId=App.current.idPath[0].objectId,$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:b.objectType},success:function(c){for(var d=!1,e=0;e<c.data.length;e++){var f=c.data[e],g={};if(f.widgetData&&"null"!==f.widgetData&&(g=$.parseJSON(f.widgetData)),g.viewType===b.domainDataView){b.widgetData=g,b.widgetData.viewType=b.allAlarmsDomainDataView,d=!0,b.showWidget(a);break}}d||b.notifyNoWidgetConfigFound()}})):b.notifyNoWidgetConfigFound()},showWidget:function(a,b){var c=this,d=App.config.locationMainArea;if(c.widgetData){c.widget&&(c.widget.destroy(),c.widget=null);var e=[{key:"assetList",value:"",type:"selection"}];b&&e.push({key:"alarmStatus",value:b,type:"eq"}),a!==c.alarmTypeAll&&e.push({key:"alarmName",value:a,type:"eq"}),c.widget=new App.ui.WidgetPanel({widgetType:"grid",location:d,positionNumber:"-1",isTemporary:!0,name:App.translate(a),pictureName:"Time-8",id:c.alarmWidgetDataId,widgetData:c.widgetData,domainDataView:c.domainDataView,objectType:c.objectType,domainObjectId:c.objectId,objectName:null,sortAttribute:"triggeredTime",filters:e}),App.view.widgets.push(c.widget),c.widget.show()}else c.getWidgetData(a)},showOnMap:function(a,b){var c=this;c.mapWidget&&(c.mapWidget.destroy(),c.mapWidget=null);var d=null;d=1===a.length?a[0]:App.translate("{0} objects",a.length),c.mapWidget=new App.ui.WidgetPanel({widgetType:"map",location:App.config.locationAlarmMap,positionNumber:"-1",isTemporary:!0,name:App.translate("Alarm Map"),pictureName:App.util.widget.defaultIcon.alarmMap,height:App.config.widgetHeight,displayMini:!0,id:c.alarmMapWidgetDataId,ids:a,createRouteFromIds:b,widgetData:{viewType:null},objectType:c.objectType||App.current.objectType,domainObjectId:c.objectId||App.current.objectId,objectName:d}),App.view.widgets.push(c.mapWidget),c.mapWidget.show()},notifyNoWidgetConfigFound:function(){App.log.error(App.translate("You need to configure an alarms grid in the Widget Catalog for this action."),null,!0)},doAction:function(a,b,c,d){"use strict";var e=App.view.Alarm;if(b.length)switch(c){case"reset":$.ajax({url:App.config.serviceUrl+"caesarAssetAlarm/resetMultipleAlarms",data:{alarmIds:JSON.stringify(b),justification:d},success:function(){a.dataSource.read(),e.refresh()}});break;case"acknowledge":$.ajax({url:App.config.serviceUrl+"caesarAssetAlarm/acknowledgeMultipleAlarms",data:{alarmIds:JSON.stringify(b),justification:d},success:function(){a.dataSource.read(),e.refresh()}});break;case"showOnMap":e.showOnMap(b);break;case"createRoute":e.showOnMap(b,!0);break;case"showOnMapEventHistory":e.showOnMap(b)}}}),App.ui.AboutWindow=kendo.Class.extend({elWindowContent:null,elContent:null,elWindowWrapper:null,elTitleBar:null,dialog:null,titleBarTemplate:null,sectionTemplate:null,init:function(a){var b=this;return b.config=$.extend({title:App.translate("About Window"),actions:[],minWidth:630,width:630,height:300,visible:!1,buttons:[{name:App.translate("Contact Helpdesk"),click:function(){b.onContactHelpdesk()}},{name:App.translate("Close"),click:b.onCancel}]},a),b.build(),b.dialog.center().open(),this},build:function(){"use strict";$("#about-window").remove(),this.elWindowContent=$("<div>",{id:"about-window"}).appendTo("body"),this.elContent=$("<div>",{"class":"about-window-content"}).appendTo(this.elWindowContent),this.sectionTemplate=kendo.template("<h5>#=title#</h5><p>#=text#</p>"),this.elContent.append(this.sectionTemplate({title:App.translate("Legal Notice"),text:"The Webfonts “Lineicons” (designed by Sergey Shmidt), “Entypo” (designed by Daniel Bruce), and “Iconic” (designed by P.J. Onory) are licensed under a Creative Commons Attribution-ShareAlike 3.0 United States License (CC BY-SA 3.0 US). The Webfont “Icomoon Ultimate” (designed by Keyamoon) is licensed under a Royalty Free License. The Webfont “Eight Shades” (designed by Victor Erixon) is licensed under a Custom License. The Webfont “Font Awesome” (designed by Dave Gandy) is licensed under a Creative Commons Attribution 3.0 Unported License (CC BY 3.0) Biohazard Icon created by parkjisun from Noun Project"})),this.dialog=this.elWindowContent.kendoExtDialog(this.config).data("kendoExtDialog"),this.elWindowWrapper=this.elWindowContent.parent(),this.elWindowWrapper.addClass("about-window");var a=kendo.template('<div class="about-window-image-container"></div>');this.elWindowWrapper.append(a({name:"fleetmanagement"})),this.elTitleBar=this.elWindowWrapper.find(".k-window-titlebar"),this.elTitleBar.empty();var b=kendo.template('<div class="row"><div class="col-sm-7"><div class="about-application-logo"><img src="images/logos/about-#=name#.png"></div></div><div class="col-sm-5"><div class="about-logo pull-right"></div></div></div><div class="row"><div class="col-sm-12"><div class="about-version">Version <b>#=version#</b> | #=copyrights#</div></div></div>');return this.elTitleBar.append(b({name:"fleetmanagement",version:App.config.version,copyrights:App.config.copyrights})),this.dialog.bind("deactivate",function(){App.router.navigate("/")}),this},onCancel:function(a){a.dialog.close()},onContactHelpdesk:function(){window.location.href="mailto:"+App.config.mailHelpdesk}}),App.ui.WizardBase=kendo.Class.extend({config:{},stepHeight:null,bodyTemplate:'<div id="wizard"><div class="wizard-menu"></div><form class="wizard-content"><div class="wizard-description"></div></form></div>',elDialogContent:null,elDescription:null,elContent:null,elMenu:null,elButtons:null,dialog:null,data:null,title:null,objectName:null,fields:[],validator:null,returnRoute:null,init:function(a){"use strict";return this.config=$.extend({title:App.translate("Wizard"),minWidth:450,width:850,height:2/3*document.body.clientHeight,modal:!0,visible:!1,message:"",routeOnClose:!0,buttons:[{name:App.translate("Cancel"),click:$.proxy(this.onCancel,this)},{name:App.translate("Save"),click:$.proxy(this.onSave,this),action:"save",loadingText:App.translate("processing...")}]},a),App.config.externalSystemUrl&&this.config.buttons.unshift({name:App.translate("Fetch"),click:$.proxy(this.onFetch,this),action:"fetch",loadingText:App.translate("processing...")}),$(this.bodyTemplate).appendTo("body"),this.elDialogContent=$("#wizard"),this.returnRoute=App.router.currentRoute,this},show:function(){"use strict";var a=this;this.dialog=this.elDialogContent.kendoExtDialog(this.config).data("kendoExtDialog"),this.dialog.bind("deactivate",function(){a.destroy(),a.enableBgScrolling(),a.config.routeOnClose&&App.router.navigate(a.returnRoute)}),this.dialog.bind("open",function(){a.elMenu=a.elDialogContent.find(".wizard-menu"),a.elContent=a.elDialogContent.find(".wizard-content"),a.elDescription=a.elDialogContent.find(".wizard-description"),a.elButtons=a.elDialogContent.parent().find(".k-ext-dialog-buttons"),a.stepHeight=a.elDialogContent.height()-a.elButtons.outerHeight(),a.validator=a.elContent.kendoValidator(App.util.forms.validator).data("kendoValidator"),a.showBusy(),a.getView(),a.disableBgScrolling()}),this.dialog.bind("close",$.proxy(this.onClose,this)),this.dialog.center().open(),a.elContent.on("scroll",{scrolledByCode:0},function(b){a.scrollSpy(b)})},scrollSpy:function(a){var b=this;if(a.data.scrolledByCode)return a.stopPropagation(),void b.elContent.on("scroll",{scrolledByCode:0},function(a){b.scrollSpy(a)});var c,d=b.elContent.find(".widget:visible"),e=$(b.elContent);$.each(d,function(a,f){if(c=$(f),b.elContent&&c){var g=e.position().top,h=g+e.height(),i=(h-g)/2,j=c.position().top,k=j+c.height(),l=b.elMenu.find(".btn:visible"),m=$(l[a]),n=$(d[0]).position().top,o=$(d[d.length-1]).position().top+$(d[d.length-1]).height();if(!m.hasClass("disabled")&&!m.hasClass("active")){if(n>g&&!$(l[0]).hasClass("disabled"))return l.removeClass("active"),$(l[0]).addClass("active").scrollintoview({direction:"vertical"}),!1;if(h>o&&!$(l[d.length-1]).hasClass("disabled"))return l.removeClass("active"),$(l[d.length-1]).addClass("active").scrollintoview({direction:"vertical"}),!1;if(i>j&&k>i)return l.removeClass("active"),m.addClass("active"),b.elMenu.scrollTop(b.elMenu.scrollTop()+m.position().top-b.elMenu.position().top-b.elMenu.height()/2),!1}}})},destroy:function(){"use strict";this.dialog&&this.dialog.destroy(),this.enableBgScrolling()},onCancel:function(a){"use strict";a.dialog.close()},getView:function(){},showBusy:function(a){"use strict";kendo.ui.progress(a||this.dialog.wrapper,!0)},hideBusy:function(a){"use strict";kendo.ui.progress(a||this.dialog.wrapper,!1)},buildContainer:function(a){},buildStep:function(a,b,c){},renderStep:function(a,b,c){"use strict";var d=this;void 0===c&&(c=!0);var e=$("<div>",{"class":"widget",id:a,style:"display : "+(c?"block":"none"),focusin:function(){var a=$(this).data("id"),b=d.elMenu.find(".btn"),c=b.filter(function(){return $(this).data("id")==a});c.hasClass("disabled")||c.hasClass("active")||(b.removeClass("active"),c.addClass("active").scrollintoview({direction:"vertical"}))}});$('<div class="widget-header"><span class="widget-header-title">'+App.translate(b)+"</span></div>").appendTo(e);var f=$('<div class="widget-content k-content">').appendTo(e),g=$("<div>").appendTo(f);return $('<div id="nextButtonContainer">').appendTo(f),e.appendTo(this.elContent),g},isElementValid:function(a,b){var c=this,d=!0;return c.validator&&$(a).find(":input:not(:button,:checkbox)").each(function(a,e){c.validator.validateInput(e)||(b||c.validator.hideMessages(),d=!1)}),d&&$('[data-identifier="right_list"]').length>0&&(d=c.validateMultiSelect()),d},validateMultiSelect:function(){var a=!0;return $('[data-identifier="right_list"]').each(function(b,c){return $("span.k-tooltip.k-invalid-msg").remove(),
$(c)[0].attributes.required&&0===$(c).children().length?($(c).closest(".multiselect-container").after('<span class="k-widget k-tooltip k-tooltip-validation k-invalid-msg" data-for="name" role="alert"><span class="k-icon k-warning"> </span>This field is required</span>').scrollintoview({direction:"vertical"}),a=!1,!1):void 0}),a},moveToStep:function(a){var b=this;if(a&&$.isNumeric(a)){var c=b.elContent.find(".widget"),d=b.elMenu.find(".btn"),e=$(c[a-1]),f=$(d[a-1]);f&&(d.removeClass("active"),f.addClass("active").scrollintoview({direction:"vertical"})),b.elContent.off("scroll"),b.elContent.scrollTop(b.elContent.scrollTop()+e.position().top-b.elContent.position().top),b.elMenu.scrollTop(b.elMenu.scrollTop()+f.position().top-b.elMenu.position().top-15),b.elContent.one("scroll",{scrolledByCode:1},function(a){b.scrollSpy(a)})}},onSave:function(){},onFetch:function(){this.setSaveButtonBusy(!1)},onClose:function(){},setSaveButtonLabel:function(a){"use strict";var b=this.elButtons.find("button[data-action=save]");b.length&&b.text(a)},setSaveButtonBusy:function(a){"use strict";var b=this.elButtons.find("button[data-action=save]");b.length&&(a?b.button("loading"):b.button("reset"))},disableBgScrolling:function(){"use strict";$("body").css({overflow:"hidden"})},enableBgScrolling:function(){"use strict";$("#content-wrap").css({overflow:"inherit",height:"auto"}),$("body").css({overflow:"visible"})},getFieldById:function(a){var b=this,c=null;return $.each(b.fields,function(b,d){return d.config.id===a?(c=d,!1):void 0}),c},showField:function(a,b){b=Boolean("undefined"==typeof b?!0:b),a.el.wrapper?(a.el.wrapper.toggle(b),a.el.wrapper.closest("dd").toggle(b)):($(a.el).toggle(b),$(a.el).closest("dd").toggle(b)),a.label.toggle(b),a.label.closest("dd").toggle(b),a.description&&a.description.toggle(b)}}),App.ui.WizardAdmin=App.ui.WizardBase.extend({fileUploadFields:[],fileUploadCount:0,useLock:!0,constraints:{},componentTypes:{numeric:"NumericField"},init:function(a){"use strict";var b=this;return b.fileUploadFields=[],b.fileUploadCount=0,App.ui.WizardBase.fn.init.call(this,$.extend({title:App.translate("Asset Administration"),objectType:null,parentObjectId:null,parentObjectType:null,objectId:null,label:null},a)),App.current.treeRefreshNode&&App.current.treeRefreshNode.id&&!b.config.parentObjectId&&(b.config.parentObjectId=App.current.treeRefreshNode.id.split(App.config.idDivider)[1]),b},getView:function(){"use strict";var a=this,b=App.translate("Add")+" {0}",c="getCreateView",d={};if(a.config.objectId){switch(a.config.label){case"account":b="Update My Profile",a.hasI18n=!0;break;default:b=App.translate("Update")+" {0}"}c="getUpdateView",d={objectType:a.config.objectType,objectId:a.config.objectId,parentObjectId:a.config.parentObjectId,parentObjectType:a.config.parentObjectType}}else d={objectType:a.config.objectType,parentObjectId:a.config.parentObjectId,parentObjectType:a.config.parentObjectType};var e=App.translate(b,App.util.format.domainObjectType(a.config.objectType));a.setSaveButtonLabel(e),a.dialog.title(e),$.ajax({url:App.config.serviceUrl+"generalAdmin/"+c,data:d,global:!1,success:$.proxy(a.buildContainer,a),error:function(b,c,e){var f="";if("parsererror"===c)App.log.checkJsonResponse(b,e,d);else{if(b.responseText)if(0===b.responseText.indexOf('{"messages"')){var g=$.parseJSON(b.responseText);f+=g.messages.join("<br>")}else f+=b.responseText;else f+=b.statusText;App.log.error(f,null,!0)}a.hideBusy(),$.proxy(a.onCancel(a),a)}})},buildContainer:function(a){"use strict";var b=this;if(!a.success)return App.log.error(a.messages[0],a,!0),void $.proxy(b.onCancel(b),b);b.hideBusy();var c=$("<div>",{"class":"wizard-steps"}).appendTo(b.elMenu);b.useLock&&b.setLocked(!0),b.fields=[],b.elDescription.text(App.translate(a.ui.description));var d=0;if($.each(a.ui.children,function(a,e){if(e.children.length){d++;var f=$("<a>",{text:App.translate(e.name),"class":"btn",click:function(){var a=$(this);b.moveToStep(a.data("id"));var c=b.elContent.find(".widget:visible").filter(function(){return $(this).data("id")==a.data("id")});"dropdownlist"===c.find(":input:first").data("role")?c.find(":input:first").parent().focus():c.find(":input:first").focus()}}).appendTo(c);f.data("id",d),e.description&&f.append("<br><span>"+App.translate(e.description)+"</span>"),b.buildStep(a,e.name,e.children,d)}}),b.moveToStep(1),$.each(b.constraints,function(a,c){$.each(b.fields,function(d,e){if(e.config.id===c.id){$(e.el).bind("change",function(){$.proxy(b.doConstraintCheck($(this).is(":checked")?"true":"false"),b)});var f=b.getFieldById(a),g=$(e.el).is(":checked")?"true":"false";g===c.value?b.showField(f):b.showField(f,!1)}})}),b.config.objectId){var e=$(".k-ext-dialog").find('[data-action="save"]');e.addClass("disabled"),e.attr("disabled",!0),e.find(":input").attr("tabindex",-1),e.find(".k-dropdown").attr("tabindex",-1)}},buildStep:function(a,b,c,d){"use strict";var e=this,f={},g=e.renderStep(a,b),h=!1,i=$("<dl>",{"class":"dl-horizontal"}).appendTo(g);$.each(c,function(a,b){b.constraint&&(e.constraints[b.id]=b.constraint),e.hasI18n&&(h=App.i18n.addControls(b)||h);var c=$("<dt>").text(App.translate(b.name)).appendTo(i).attr("required",b.isMandatory),d=$("<dd>").appendTo(i),g=new App.ui.Field($.extend({renderTo:i,fieldLabel:b.name,objectType:e.config.objectType,objectId:e.config.objectId,parentObjectType:e.config.parentObjectType,parentObjectId:e.config.parentObjectId,refOwner:e,container:d},b));g.label=c,b.activationDependency&&(f[b.activationDependency]||(f[b.activationDependency]=[]),f[b.activationDependency].push(g),$("#"+b.activationDependency).is(":checked")||g.enable(!1)),g.enable(b.readOnly),g.renderTooltip(b.description),e.fields.push(g)}),e.buildDependencies(f),g.parents(".widget").data("id",d),h&&App.i18n.addPreview(g,e.fields)},doConstraintCheck:function(a){"use strict";var b=this;$.each(b.constraints,function(c,d){var e=b.getFieldById(c);a===d.value?b.showField(e):b.showField(e,!1)})},buildDependencies:function(a){"use strict";$.each(a,function(a,b){$("#"+a).on("change",function(){var a=this;$.each(b,function(b,c){c.enable(a.checked)})})})},onSave:function(){"use strict";var a=this,b=a.config.objectType,c=a.config.objectId;a.isElementValid(a.elContent,!0)&&(a.config.objectId||(b=a.config.parentObjectType,c=a.config.parentObjectId),$.ajax({url:App.config.serviceUrl+"generalAdmin/checkLock",data:{objectType:b,objectId:c},success:function(b){b.locked||(a.fileUploadFields.length?a.doFileUpload():a.doSave(!0))}}))},doFileUpload:function(){"use strict";var a=this,b=[],c=[];a.setSaveButtonBusy(!0),$.each(a.fileUploadFields,function(d,e){e.options.deleteFile&&(b.push($.ajax({url:App.config.serviceUrl+"caesarVfs/delete",data:{domainObjectId:a.config.objectId,domainObjectType:a.config.objectType,filename:e.el.options.fileName}})),e.options.fileName=""),c.push(e)}),b.length?$.when.apply($,b).always(function(){a.setSaveButtonBusy(!1),a.doSave(!0),c.length?a.processUpload(c):a.doSave(!0)}):c.length?a.processUpload(c):a.doSave(!0)},processUpload:function(a){$.each(a,function(a,b){b._module.onSaveSelected()})},doSave:function(a){"use strict";var b=this,c="generalAdmin/createObject",d=b.getObjectData(),e={objectType:b.config.objectType,parentType:b.config.parentObjectType,parentId:b.config.parentObjectId,objectData:JSON.stringify(d)};b.config.objectId&&(c="generalAdmin/updateObject",e.objectId=b.config.objectId),b.setSaveButtonBusy(!0),b.showBusy(b.elDialogContent),$.ajax({url:App.config.serviceUrl+c,data:e,success:function(c){var e=c.object;if(a)if($.proxy(b.onCancel(b),b),"account"===b.config.label)b.updateUserSettings(d);else{var f=e.domainObjectType,g=e.id,h=e.name;"jobcard"===e.domainObjectType&&(f=b.config.parentObjectType,g=b.config.parentObjectId,h=App.current.objectName),$.ajax({url:App.config.serviceUrl+"caesarOrganizationStructure/objectHierarchy",data:{domainObjectId:g,domainObjectType:f},success:function(a){var c=a[a.length-1],d=App.view.navigationTree.treeview;if(App.current.treeRefreshNode&&c.domainObjectTypeId!==App.current.treeRefreshNode.id){var e=d.dataSource.get(c.domainObjectTypeId);e.loaded()?(d.dataSource.bind("change",function i(a){var c=a.node&&a.node.id;c===e.id&&(d.dataSource.unbind("change",i),b._refreshParentNode(!1),App.cmd.show(f,g,h),App.config.lastTreeRefresh=new Date)}),e.loaded(!1),e.load()):b._refreshParentNode(!0,f,g,App.router.encodeParam(h))}else b._refreshParentNode(!0,f,g,App.router.encodeParam(h))}})}b.setSaveButtonBusy(!1),b.hideBusy(b.elDialogContent)},error:function(){b.setSaveButtonBusy(!1),b.hideBusy(b.elDialogContent)}})},_refreshParentNode:function(a,b,c,d){var e=this;if(App.current.treeRefreshNode){if(App.view.navigationTree.expandedNode=App.current.treeRefreshNode,App.current.treeRefreshNode.loaded(!1),e.config.objectId||(App.current.treeRefreshNode.hasChildren=!0),a){var f=App.view.navigationTree.treeview;f.dataSource.bind("change",function g(a){var e=a.node&&a.node.id;e===App.current.treeRefreshNode.id&&(f.dataSource.unbind("change",g),App.cmd.show(b,c,d),App.config.lastTreeRefresh=new Date)})}App.current.treeRefreshNode.load()}else App.cmd.show(b,c,d)},onUploadSuccess:function(a){"use strict";var b=this,c=a.response.filename;b.fileUploadCount++,a.sender.options.fileName=c;var d=$("#preview_"+a.sender.options.id);d.empty();var e={domainObjectId:b.config.objectId,domainObjectType:b.config.objectType,filename:c};e[App.config.sessionName]=App.config.sessionId;var f=App.config.serviceUrl+"caesarVfsResource/get?"+$.param(e);a.sender.options.isImage?$('<img class="img-thumbnail" alt="" src="'+f+'">').appendTo(d):$('<a target="_blank" href="'+f+'">'+c+"</a>").appendTo(d),b.fileUploadCount===b.fileUploadFields.length&&b.doSave(!0)},getObjectData:function(){"use strict";for(var a=[],b=0;b<this.fields.length;b++)a.push({id:this.fields[b].config.id,value:this.fields[b].getValue()});return a},setLocked:function(a){"use strict";var b=this,c=App.config.serviceUrl+(a?"generalAdmin/updateLock":"generalAdmin/removeLock"),d=b.config.objectType,e=b.config.objectId;b.config.objectId||(d=b.config.parentObjectType,e=b.config.parentObjectId),$.ajax({url:c,data:{objectType:d,objectId:e},success:function(a){"ok"!==a.result}})},updateUserSettings:function(a){"use strict";for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.id]=d.value}App.config.user.culture=b.culture,App.config.user.dataGridPageSize=b.dataGridPageSize,App.config.user.geoReferenceSystem=b.geoReferenceSystem,App.config.user.language=b.language,App.config.user.measurementSystem=b.measurementSystem,App.config.user.timeZone!==b.timeZone&&($.each(this.fields,function(a,b){"timeZone"===b.config.id&&(App.config.user.timeZoneOffset=parseInt(b.el.dataItem().offset))}),App.config.user.timeZone=b.timeZone),App.i18n.load(App.config.user.language,function(){App.i18n.update(App.config.culture,function(){$.each(App.view.widgets,function(a,b){b.items&&b.items.length>0&&$.each(b.items,function(a,b){b.refresh()}),b.refresh()})}),App.loadNavigationTreeView(),App.view.Alarm.refresh(),App.router.navigate(App.router.lastRoute)})},onClose:function(){"use strict";var a=this;a.useLock&&a.setLocked(!1)}}),App.ui.BatchUpload=App.ui.WizardAdmin.extend({init:function(a){var b=this;return b.fileUploadFields=[],b.fileUploadCount=0,App.ui.WizardAdmin.fn.init.call(this,$.extend({objectType:null,parentObjectId:null,parentObjectType:null,objectId:null},a)),b},getView:function(){"use strict";var a,b=this;a={objectType:b.config.objectType,parentObjectId:b.config.parentObjectId,parentObjectType:b.config.parentObjectType},$.ajax({url:App.config.serviceUrl+"generalAdmin/getBatchUploadView",data:a,success:$.proxy(this.buildContainer,this)});var c=App.translate("Batch Upload {0}",App.util.format.domainObjectType(b.config.objectType));this.setSaveButtonLabel(c),this.dialog.title(c)},onSave:function(){"use strict";var a=this;a.validator&&a.validator.validate()&&(a.fileUploadFields.length?a.doFileUpload():a.doSave())},doSave:function(){"use strict";var a=this,b="generalAdmin/batchUpload";a.setSaveButtonBusy(!0),a.showBusy(a.elDialogContent);var c={objectType:a.config.objectType,parentType:a.config.parentObjectType,parentId:a.config.parentObjectId,objectData:JSON.stringify(a.getObjectData())};$.ajax({url:App.config.serviceUrl+b,data:c,success:function(b){b.responseFile?$.proxy(a.handleUploadResponse(b.responseFile),a):$.proxy(a.onCancel(a),a),a.setSaveButtonBusy(!1),a.hideBusy(a.elDialogContent)},error:function(){a.setSaveButtonBusy(!1),a.hideBusy(a.elDialogContent)}})},handleUploadResponse:function(a){var b=this;$.when(App.dialog.okCancel({title:App.translate("File Upload"),height:180,minWidth:270,width:450,message:App.translate("Your upload generates a report file. Do you want to open this file?"),labelCancel:App.translate("No"),labelOK:App.translate("Yes"),icon:App.dialog.iconQuestion})).done(function(c){if("OK"===c.button){var d={domainObjectId:a.domainObjectId,domainObjectType:a.domainObjectType,filename:a.filename};d[App.config.sessionName]=App.config.sessionId;var e,f=App.config.serviceUrl+"caesarVfsResource/get?"+$.param(d);window.open(f,"_blank"),$.each(b.fileUploadFields,function(a,b){var c=b.el.wrapper;c.find(".k-upload-files").remove(),c.find(".k-upload-status").remove(),c.addClass("k-upload-empty"),c.find(".k-upload-button").removeClass("k-state-focused"),e=$("#preview_"+b.config.id),e.empty()}),b.fileUploadCount=0}else $.proxy(b.onCancel(b),b)})}}),App.ui.WizardReport=App.ui.WizardBase.extend({reportItems:null,reportObjects:null,constraints:{},init:function(a){"use strict";return App.ui.WizardBase.fn.init.call(this,$.extend({reportId:null,objectType:null,objectId:null,title:App.translate("Report Wizard")},a)),this},getView:function(){"use strict";var a=this;a.setSaveButtonLabel(App.translate("Create {0}",App.translate("Report"))),a.config.reportId?$.ajax({url:App.config.serviceUrl+"caesarReporting/createReportConfigView",data:{reportId:a.config.reportId,domainObjectId:a.config.objectId,domainObjectType:a.config.objectType},success:$.proxy(a.buildContainer,this),error:function(b){var c="";if(b.responseText)if(0===b.responseText.indexOf('{"messages"')){var d=$.parseJSON(b.responseText);c+=d.messages.join("<br>")}else c+=b.responseText;else c+=b.statusText;App.log.error(c,a.config,!0),a.hideBusy(),$.proxy(a.onCancel(a),a)}}):(a.hideBusy(),App.log.error(App.translate("No Report ID given."),a.config))},buildContainer:function(a){"use strict";var b=this;if(!a.success)return App.log.error(a.messages[0],a,!0),void $.proxy(b.onCancel(this),this);b.hideBusy();var c=$("<div>",{"class":"wizard-steps"}).appendTo(b.elMenu);b.dialog.title(App.translate("{0} [Report]",a.reportName)),b.useLock&&b.setLocked(!0),b.fields=[],b.elDescription.text(App.translate(a.ui.description));var d=0;$.each(a.ui.items,function(a,e){if(e.items.length){var f=!0;d++,e.constraint&&(b.constraints[e.id]=e.constraint,f=!1);var g=$("<a>",{text:e.name,id:e.id+"Btn","class":"btn",style:"display : "+(f?"block":"none"),click:function(){var a=$(this);b.moveToStep(a.data("id"));var c=b.elContent.find(".widget:visible").filter(function(){return $(this).data("id")==a.data("id")});"dropdownlist"===c.find(":input:first").data("role")?c.find(":input:first").parent().focus():c.find(":input:first").focus()}}).appendTo(c);g.data("id",d),e.description&&g.append("<br><span>"+e.description+"</span>"),b.buildStep(e.id,e.name,e.items,f,d)}}),b.moveToStep(1),$.each(b.constraints,function(a,c){$.each(b.fields,function(d,e){e.config.id===c.id&&(e.el.element.bind("change",function(){var a=this.value();$.proxy(b.doConstraintCheck(a),b)}),e.getValue()===c.value&&($("#"+a+"Btn").show(),$("#"+a).show()))})})},doConstraintCheck:function(a){"use strict";var b=this;$.each(b.constraints,function(b,c){a===c.value?($("#"+b+"Btn").show(),$("#"+b).show()):($("#"+b+"Btn").hide(),$("#"+b).hide())})},buildStep:function(a,b,c,d,e){"use strict";var f=this,g={},h=f.renderStep(a,b,d),i=!1,j=$("<dl>",{"class":"dl-horizontal"}).appendTo(h);$.each(c,function(a,b){b.constraint&&(f.constraints[b.id]=b.constraint),f.hasI18n&&(i=App.i18n.addControls(b)||i);var c=$("<dt>").text(App.translate(b.name)).appendTo(j).attr("required",b.isMandatory),d=$("<dd>").appendTo(j),e=new App.ui.Field($.extend({renderTo:j,fieldLabel:c,objectType:f.config.objectType,objectId:f.config.objectId,parentObjectType:f.config.parentObjectType,parentObjectId:f.config.parentObjectId,refOwner:f,container:d},b));b.activationDependency&&(g[b.activationDependency]||(g[b.activationDependency]=[]),g[b.activationDependency].push(e),$("#"+b.activationDependency).is(":checked")||e.enable(!1)),b.readOnly&&e.enable(!1),f.fields.push(e)}),f.buildDependencies(g),h.parents(".widget").data("id",e)},buildDependencies:function(a){"use strict";$.each(a,function(a,b){$("#"+a).on("change",function(){var a=this;$.each(b,function(b,c){c.enable(a.checked)})})})},onSave:function(){"use strict";this.validator&&this.validator.validate()&&this.doSave()},doSave:function(){"use strict";var a=this,b={domainObjectType:a.config.objectType,domainObjectId:a.config.objectId,reportId:a.config.reportId,objectData:JSON.stringify(a.getObjectData())};a.setSaveButtonBusy(!0),a.showBusy(a.elDialogContent),$.ajax({url:App.config.serviceUrl+"caesarReporting/createReport",data:b,success:function(b){a.setSaveButtonBusy(!1),a.hideBusy(a.elDialogContent),$.proxy(a.onCancel(a),a),App.view.Notification&&App.view.Notification.refresh(),b.refresh&&App.checkChangedNavigationObjects(!0)},error:function(b){a.setSaveButtonBusy(!1),a.hideBusy(a.elDialogContent),App.log.error(App.translate("Your report could not be created. Reason: {0}",b.responseText),b,!0)}})},getObjectData:function(){"use strict";var a=this,b=[];return $.each(a.fields,function(a,c){c.el.isVisible()&&b.push({id:c.config.id,value:c.getValue()})}),b}}),App.ui.WizardWidget=App.ui.WizardBase.extend({widget:null,panels:[],widgetTypeOptionMapping:{grid:"gridTypeCombo",list:"listTypeCombo",dashboard:"dashboardTypeCombo",detail:"detailTypeCombo",map:"mapTypeCombo",overviewMap:"mapTypeCombo"},widgetColumnGrid:null,columnWarnMsgShown:!1,supportedViews:[],parentAssignment:null,widgetData:{},selectedWidgetType:null,selectedWidgetTypeOption:null,columnWidgetStepContainer:null,buttonContainer:null,iconSelector:null,detailDomainObjectValues:null,detailDomainObjectType:null,detailDomainDataView:null,widgetIconSets:[{name:"Business",pfx:"Business-",count:97},{name:"Communication",pfx:"Communication-",count:114},{name:"Content",pfx:"Content-",count:48},{name:"Design",pfx:"Design-",count:36},{name:"Edition",pfx:"Edition-",count:68},{name:"Files",pfx:"Files-",count:106},{name:"Food",pfx:"Food-",count:21},{name:"Hardware",pfx:"Hardware-",count:57},{name:"Health",pfx:"Health-",count:28},{name:"Interface",pfx:"Interface-",count:98},{name:"Keyboard",pfx:"Keyboard-",count:26},{name:"Leisure",pfx:"Leisure-",count:18},{name:"Multimedia",pfx:"Multimedia-",count:83},{name:"Objects",pfx:"Objects-",count:67},{name:"Places",pfx:"Places-",count:54},{name:"Programming",pfx:"Programing-",count:67},{name:"Setting",pfx:"Setting-",count:17},{name:"Status",pfx:"Status-",count:31},{name:"Text",pfx:"Text-",count:63},{name:"Time",pfx:"Time-",count:12},{name:"Transfers",pfx:"Transfers-",count:81},{name:"Transportation",pfx:"Transportation-",count:12},{name:"Users",pfx:"Users-",count:78},{name:"Vote",pfx:"Vote-",count:61},{name:"Weather",pfx:"Weather-",count:11}],iconSelected:!1,init:function(a){"use strict";return App.ui.WizardBase.fn.init.call(this,$.extend({title:App.translate("Asset Administration"),domainObjectType:null,objectId:null,parentObjectId:null,parentObjectType:null,parentRef:null,myId:null},a)),this.config.data.widgetData&&($.isPlainObject(this.config.data.widgetData)?this.widgetData=this.config.data.widgetData:this.widgetData=$.parseJSON(this.config.data.widgetData)),this.panels=[{title:App.translate("Widget Types"),subTitle:"",id:"widget_layout",hidden:!1,fn:this.getWidgetLayoutPanel},{title:App.translate("Widget Information"),subTitle:"",id:"widget_information",hidden:!1,fn:this.getWidgetInformationPanel}],this},getView:function(){"use strict";var a=this,b="";this.dialog.bind("deactivate",function(){a.destroy(),a.config.parentRef||App.router.navigate(App.router.lastRoute)}),b=a.config.myId?a.config.data.name?App.translate('Update {0} "{1}"',App.translate("Widget"),a.config.data.name):App.translate("Update {0}",App.translate("Widget")):App.translate("Create {0}",App.translate("Widget")),a.setSaveButtonLabel(b),a.dialog.title(b),a.buildContainer()},getWidgetInformationPanel:function(a,b){"use strict";var c=b||this;c.widgetInformationPanel=$("<div>").appendTo(a.contentEl);var d=$("<dl>",{"class":"dl-horizontal"}).appendTo(c.widgetInformationPanel);$("<dt>").text(App.translate("Name")).appendTo(d).attr("required",!0);var e=$("<dd>").appendTo(d),f=$("<input>",{type:"text","class":"k-textbox",id:"widget-catalog-name",name:"widget-catalog-name"}).appendTo(e);f.attr("required","true"),$("<dt>").text(App.translate("Description")).appendTo(d).attr("required",!0),e=$("<dd>").appendTo(d);var g=$("<textarea>",{id:"widget-catalog-description",name:"widget-catalog-description","class":"k-textbox",cols:35,rows:4}).appendTo(e);g.attr("required","true"),f.change(function(){""===g.val()&&g.val(f.val())}),$("<dt>").text(App.translate("Icon")).appendTo(d),e=$("<dd>").appendTo(d);var h=c.initIconPicker();c.iconSelector=$("<img>",{"class":"button-change-icon btn btn-default",src:"images/icons/32px/"+App.util.widget.defaultIcon.widgetGroup+".png"}).data("name",App.util.widget.defaultIcon.widgetGroup).appendTo(e).popover({title:App.translate("Choose icon"),html:!0,placement:"auto",content:h}),h.find("img").on("click",function(){var a=$(this).attr("title");c.iconSelector.attr("src","images/icons/32px/"+a+".png").data("name",a).popover("hide"),c.iconSelected=!0})},getWidgetLayoutPanel:function(a,b){"use strict";var c=b||this,d=kendo.template('<ul> # for (var i = 0; i < data.length; i++) { #<li><label><input type="radio" data-type="widget-type" name="widget_type" value="#= data[i].id #"/> #= data[i].name #</label></li># } #</ul>',{useWithBlock:!1});c.widgetLayoutPanel=$("<div>").text(App.translate("Choose a Widget Type")).appendTo(a.contentEl);for(var e=c.config.domainObjectType,f=null,g=0;g<App.config.domainObjectTypesTree.length;g++)for(var h=App.config.domainObjectTypesTree[g],i=0;i<h.items.length;i++){var j=h.items[i];j.id===e&&(f=j.widgetTypes)}f&&(c.widgetLayoutPanel.append(d(f)),c.buildWidgetTypeOptions(),c.widgetColumnPanel=$("<div>",{id:"widget_columns",style:"margin-top:10px"}).appendTo(c.widgetLayoutPanel),$('input[name="widget_type"]').change($.proxy(c.onWidgetTypeChange,c)))},getWidgetColumnPanel:function(a,b){"use strict";var c=b||this;c.widgetColumnPanel=$("<div>").appendTo(a.contentEl)},onWidgetTypeChange:function(a){"use strict";var b=this,c=$(a.target).val(),d=$("#widget_columns");if(b.selectedWidgetType=c,b.selectedWidgetTypeOption=null,b.supportedViews=[],b.buttonContainer.children(".step-3").hide(),d.hide(),$.each(b.widgetTypeOptionMapping,function(a,c){b[c].wrapper.hide()}),b.reportViewTypeCombo.wrapper.hide(),b.widgetColumnPanel.empty(),b.widgetColumnPanel.removeClass(),b.widgetColumnGrid&&(b.widgetColumnGrid.destroy(),b.widgetColumnGrid=null),App.util.widget.defaultIcon[c]&&!b.iconSelected){var e=App.util.widget.defaultIcon[c];b.iconSelector.attr("src","images/icons/32px/"+e+".png").data("name",e)}if(c===App.config.parentWidgetType)b.buildParentAssignmentPanel(),b.buttonContainer.children(".step-3").show(),d.show();else{b.widgetColumnPanel.show();var f=b.widgetTypeOptionMapping[c];f&&(b[f].wrapper.show(),b[f].trigger("change"))}},buildWidgetTypeOptions:function(){"use strict";var a,b=this,c={autoBind:!1,dataTextField:"name",dataValueField:"id"};a=$("<input>",{style:"margin-top:10px;"}).appendTo(b.widgetLayoutPanel),b.gridTypeCombo=a.kendoDropDownList($.extend({},c,{optionLabel:App.translate("Choose a data provider"),dataSource:{transport:{read:{url:App.config.serviceUrl+"caesarObject/availableDomainDataViews",data:{domainObjectType:b.config.domainObjectType,viewType:"dataGrid"}}},schema:{data:"domainDataViews"}},change:function(a){var c=a.sender.value();a.sender.selectedIndex>0&&(b.selectedWidgetTypeOption=c,$.proxy(b.getDomainObjectValues(c),b),b.buttonContainer.children(".step-3").show(),$("#widget_columns").show())}})).data("kendoDropDownList"),b.gridTypeCombo.wrapper.hide(),a=$("<input>",{style:"margin-top:10px;"}).appendTo(b.widgetLayoutPanel),b.listTypeCombo=a.kendoDropDownList($.extend({},c,{optionLabel:App.translate("Choose a data provider"),dataSource:{transport:{read:{url:App.config.serviceUrl+"caesarObject/availableDomainDataViews",data:{domainObjectType:b.config.domainObjectType,viewType:"list"}}},schema:{data:"domainDataViews"}},change:function(a){var c=a.sender.value();a.sender.selectedIndex>0&&(b.selectedWidgetTypeOption=c)}})).data("kendoDropDownList"),b.listTypeCombo.wrapper.hide(),a=$("<input>",{style:"margin-top:10px;"}).appendTo(b.widgetLayoutPanel),b.dashboardTypeCombo=a.kendoDropDownList($.extend({},c,{optionLabel:App.translate("Choose report type"),dataSource:{transport:{read:{url:App.config.serviceUrl+"rbireports/availableReports",data:{domainObjectType:b.config.domainObjectType}}},schema:{data:"reports"}},change:function(a){var c=a.sender.value(),d=a.sender.selectedIndex,e=a.sender.dataSource.data();if(d>0){b.supportedViews=e[d-1].supportedViewTypes,b.reportViewTypeCombo.wrapper.show();var f=[];$.each(e[d-1].supportedViewTypes,function(a,b){f.push({name:b})}),b.reportViewTypeCombo.dataSource.data(f),b.reportViewTypeCombo.options.optionLabel=App.translate("Choose chart type"),b.reportViewTypeCombo.refresh(),b.reportViewTypeCombo.select(b.reportViewTypeCombo.ul.children().eq(0)),b.selectedWidgetTypeOption=c}else b.reportViewTypeCombo.wrapper.hide()}})).data("kendoDropDownList"),b.dashboardTypeCombo.wrapper.hide(),a=$("<input>",{style:"margin-top:10px;"}).appendTo(b.widgetLayoutPanel),b.reportViewTypeCombo=a.kendoDropDownList($.extend({},c,{dataSource:new kendo.data.DataSource,change:function(a){}})).data("kendoDropDownList"),b.reportViewTypeCombo.wrapper.hide();var d=[{datumName:null,"default":!1,id:"default",mapUrl:null,mapViewer:null,name:App.translate("Default")}];$.each(App.config.map.projects,function(a,b){d.push(b)}),a=$("<input>",{style:"margin-top:10px;"}).appendTo(b.widgetLayoutPanel),b.mapTypeCombo=a.kendoDropDownList($.extend({},c,{autoBind:!0,dataSource:d,value:"default",change:function(a){a.sender.selectedIndex>0&&(b.selectedWidgetTypeOption=a.sender.value())}})).data("kendoDropDownList"),b.mapTypeCombo.wrapper.hide(),a=$("<input>",{style:"margin-top:10px;"}).appendTo(b.widgetLayoutPanel),b.detailTypeCombo=a.kendoDropDownList($.extend({},c,{optionLabel:App.translate("Choose a data provider"),dataSource:{transport:{read:{url:App.config.serviceUrl+"caesarObject/availableDomainDataViews",data:{domainObjectType:b.config.domainObjectType,viewType:"detail"}}},schema:{data:"domainDataViews"}},change:function(a){var c=a.sender.value();a.sender.selectedIndex>0&&(b.selectedWidgetTypeOption=c,$.proxy(b.getDomainObjectValues(c),b),b.buttonContainer.children(".step-3").show(),$("#widget_columns").show())}})).data("kendoDropDownList"),b.detailTypeCombo.wrapper.hide()},buildContainer:function(){"use strict";var a=this;a.hideBusy(),a.buttonContainer=$("<div>",{"class":"wizard-steps"}).appendTo(a.elMenu),$.each(a.panels,function(b,c){var d=$("<a>",{text:c.title,"class":"btn step-"+(b+1),click:function(){a.moveToStep(b+1);var c=a.elContent.find(".widget:visible").filter(function(){return $(this).data("id")==b+1});"dropdownlist"===c.find(":input:first").data("role")?c.find(":input:first").parent().focus():c.find(":input:first").focus()}}).appendTo(a.buttonContainer);d.data("id",b+1),$.proxy(a.buildStep(c),a),c.contentEl.parents(".widget").data("id",b+1)}),a.moveToStep(1),a.buttonContainer.children(".step-3").hide(),$("#widget_columns").hide(),a.config.myId&&a.setValues()},getDomainObjectValues:function(a){"use strict";var b=this;$.ajax({url:App.config.serviceUrl+"caesarObject/availableValues",data:{applicationName:App.config.name,domainObjectType:b.config.domainObjectType,domainDataView:a},success:function(a){b.detailDomainObjectValues=null,a.detailDomainObjectValues&&(b.detailDomainObjectValues=a.detailDomainObjectValues,b.detailDomainObjectType=a.detailMetadata.domainObjectType,b.detailDomainDataView=a.detailMetadata.domainDataView),b.buildWidgetColumns(a.domainObjectValues)}})},buildParentAssignmentPanel:function(){"use strict";var a=this;a.widgetColumnPanel.empty(),a.widgetColumnPanel.removeClass(),$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:a.config.domainObjectType},success:function(b){var c=b.data,d=[],e=[];$.each(c,function(b,c){""===c.parent&&c.widgetType!==App.config.parentWidgetType&&d.push(c),c.parent===a.config.data.id&&(d.push(c),e.push(c.id))}),a.parentAssignment=new App.ui.Multiselect({valueField:"name",renderTo:a.widgetColumnPanel,data:d,leftLabel:App.translate("Available Widgets"),rightLabel:App.translate("Selected Widgets"),positionField:"positionNumber"}),a.parentAssignment.render(),a.parentAssignment.setSelected(e)}})},buildWidgetColumns:function(a){"use strict";var b,c=this,d=0,e=0;c.widgetColumnPanel.empty(),c.widgetColumnPanel.removeClass();var f=function(b,c,d){"false"===b?a[c][d]=!1:"true"===b&&(a[c][d]=!0)};$.each(a,function(b,g){f(g.sortable,b,"sortable"),f(g.mini_widget,b,"mini_widget"),f(g.defaultSort,b,"defaultSort"),f(g.filterable,b,"filterable"),g.positionNumber||(g.positionNumber=b),g.mini_widget?d++:a[b].mini_widget=!1,c.config.myId||"detail"===c.selectedWidgetType||(g.selected=!1,e<App.config.maxGridColumnSize&&(g.selected=!0,e++)),!g.sortDir&&g.sortable&&(g.sortDir=g.sortable?0:"")}),$.each(a,function(b,d){var e=!1,f=!0;return c.widgetData.sortAttribute?c.widgetData.sortAttribute===d.domainObjectValueId&&(e=!0):d.sortable&&(e=!0),e&&(a[b].defaultSort=!0,f=!1),f}),0===d?(a[0]&&(a[0].mini_widget=!0),a[1]&&(a[1].mini_widget=!0)):d>2&&$.each(a,function(b){b>1&&(a[b].mini_widget=!1)});var g=[{field:"domainObjectValueName",title:App.translate("Attributes to Display"),template:function(a){var b="",c="";return a.selected?(b='checked="checked"',a.set("selected",!0)):a.set("selected",!1),'<input data-bind="selected" type="checkbox" '+b+" "+c+"/>"+a.domainObjectValueName}},{title:App.translate("Visible on Mini Widget"),template:function(a){var b="",d="";if(a.mini_widget)b='checked="checked"';else{var e=c.widgetColumnPanel.find('input[data-bind="mini_widget"]:checked');2===e.length&&(d='disabled="disabled"')}return'<input data-bind="mini_widget" type="checkbox" '+b+" "+d+"/>"},attributes:{style:"text-align: center;"}},{field:"section",groupHeaderTemplate:function(a){return"undefined"!=typeof a.value&&""!==a.value||(a.value=App.translate("Details")),a.value},hidden:!0}];"detail"===c.selectedWidgetType?b={field:"section"}:g.push({field:"defaultSort",title:App.translate("Default Sort Attribute"),template:function(a){if(!a.sortable)return"";var b="";return a.defaultSort&&(b='checked="checked"'),'<input data-bind="defaultSort" type="radio" name="defaultSort"'+b+" />"},attributes:{style:"text-align: center;"}},{field:"sortDir",title:App.translate("Sort Direction"),editor:function(a,b){if(b.model.sortable){var c=$("<input>",{name:b.field}).appendTo(a);c.kendoDropDownList({dataTextField:"value",dataValueField:"id",value:b.model.sortDir,dataSource:{data:[{id:0,value:"ASC"},{id:1,value:"DESC"}]}})}},template:function(a){return a.sortable?0===a.sortDir?"ASC":"DESC":""}}),c.widgetColumnGrid=c.widgetColumnPanel.kendoGrid({dataSource:{data:a,schema:{model:{fields:{domainObjectValueId:{type:"string",editable:!1},domainObjectValueName:{type:"string",editable:!1},sortable:{type:"boolean",editable:!0},selected:{type:"boolean",editable:!0},section:{type:"string",editable:!1},mini_widget:{type:"boolean",editable:!0},defaultSort:{type:"boolean",editable:!1
},sortDir:{editable:!0},positionNumber:{type:"positionNumber",editable:!0},hidden:{type:"boolean",editable:!1}}}},group:b,serverGrouping:!1},columns:g,editable:!0,sortable:!1,scrollable:!1,pageable:!1,dataBound:function(){var a=this;$.each(a.dataSource.data(),function(b,c){c.hidden&&a.tbody.find('tr[data-uid="'+c.uid+'"]').hide()})}}).data("kendoGrid"),c.initGridSorting(c.widgetColumnGrid),c.widgetColumnGrid.dataSource.sort({field:"positionNumber",dir:"asc"}),c.widgetColumnGrid.tbody.on("change",$.proxy(c.onWidgetColumnGridChange,c)),c.widgetColumnPanel.find('input[data-bind="defaultSort"]').on("click",function(){var a=$(this).closest("tr"),b=a.attr(kendo.attr("uid")),d=c.widgetColumnGrid.dataSource.getByUid(b);$.each(c.widgetColumnGrid.dataSource.data(),function(a,b){b.defaultSort=!1}),d.defaultSort=!0}),"detail"!==c.selectedWidgetType&&c.widgetColumnPanel.find('input[data-bind="selected"]').on("click",function(){var a=c.widgetColumnPanel.find('input[data-bind="selected"]:checked');a.length===App.config.maxGridColumnSize+1&&(c.columnWarnMsgShown||$.when(App.dialog.alert({title:App.translate("Info"),height:150,minWidth:200,width:350,message:App.translate("We recommend a max column amount of {0}",App.config.maxGridColumnSize),icon:App.dialog.iconInfo})).done(function(){c.columnWarnMsgShown=!0}))})},onWidgetColumnGridChange:function(a){"use strict";var b=this,c=$(a.target).closest("tr"),d=$(a.target).data("bind"),e=$(a.target).data("role");e||(e="no role");var f=b.widgetColumnGrid.dataItem(c);"dropdownlist"!=e&&f.set(d,$(a.target).is(":checked")?1:0)},getGridColumns:function(){},initGridSorting:function(a){"use strict";var b=this;a.table.kendoDraggable({filter:"tbody > tr",group:"gridGroup",threshold:100,hint:function(a){return $('<div class="k-grid k-widget"><table><tbody><tr>'+a.html()+"</tr></tbody></table></div>")},drag:function(a){var c=$(b.elContent).offset().top,d=c+$(b.elContent).innerHeight();a.clientY-40<c?$(b.elContent).scrollTop($(b.elContent).scrollTop()-10):a.clientY+40>d&&$(b.elContent).scrollTop($(b.elContent).scrollTop()+10)}}),a.table.kendoDropTarget({group:"gridGroup",drop:function(b){b.draggable.hint.hide();var c=b.draggable.currentTarget,d=$(document.elementFromPoint(b.clientX,b.clientY)),e=c.hasClass("k-grouping-row"),f=d.hasClass("k-grouping-row")||d.closest("tr").hasClass("k-grouping-row");if("TH"!==d.prop("tagName"))if(e&&f);else if(e&&!f);else if(!e&&f);else{var g=a.dataSource.getByUid(c.data("uid")),h=a.dataSource.getByUid(d.parent().data("uid"));if(g&&h&&g.get("domainObjectValueId")!==h.get("domainObjectValueId")){var i=g.get("positionNumber");i>=0&&(g.set("positionNumber",h.get("positionNumber")),h.set("positionNumber",i)),a.dataSource.sort({field:"positionNumber",dir:"asc"})}}}})},buildStep:function(a){"use strict";a.contentEl=this.renderStep(a.id,a.title),a.fn&&a.fn(a,this)},setValues:function(){"use strict";var a=this,b=this.config.data.widgetType,c=$("#widget_columns");a.buttonContainer.children(".step-3").hide(),c.hide(),a.selectedWidgetType=b,a.widgetData&&(a.supportedViews=a.widgetData.supportedViews,a.selectedWidgetTypeOption=a.widgetData.viewType,a.widgetData.data&&a.widgetData.data.length&&(a.buildWidgetColumns(a.widgetData.data),a.buttonContainer.children(".step-3").show(),c.show()),a.widgetData.detail&&a.widgetData.detail.length&&(a.detailDomainObjectValues=a.widgetData.detail.data,a.detailDomainObjectType=a.widgetData.detail.domainObjectType,a.detailDomainDataView=a.widgetData.detail.domainDataView)),$("#widget-catalog-name").val(a.config.data.name),$("#widget-catalog-description").val(a.config.data.description),a.iconSelector.attr("src","images/icons/32px/"+a.config.data.pictureName+".png").data("name",a.config.data.pictureName),a.iconSelected=!0,$('input[name="widget_type"][value="'+b+'"]').prop("checked",!0),$.each(a.widgetTypeOptionMapping,function(c,d){if(b===c){if(a[d].dataSource.fetch(function(){a.widgetData&&a[d].value(a.widgetData.viewType)}),a[d].wrapper.show(),"dashboardTypeCombo"===d){a.reportViewTypeCombo.wrapper.show();var e=[];$.each(a.supportedViews,function(a,b){e.push({name:b})}),a.reportViewTypeCombo.dataSource.data(e),a.widgetData.reportViewType&&a.reportViewTypeCombo.value(a.widgetData.reportViewType)}a[d].enable(!1)}}),b===App.config.parentWidgetType&&(a.buildParentAssignmentPanel(),a.buttonContainer.children(".step-3").show(),c.show()),a.widgetLayoutPanel.find('input:radio[data-type="widget-type"]').attr("disabled",!0)},onSave:function(){"use strict";var a=this,b=a.elContent.kendoValidator({messages:{required:App.translate("This field is required")},validate:function(a){if(!a.valid){var b;for(var c in a.sender._errors){b=c;break}b&&$("#"+b).scrollintoview({direction:"vertical"})}}}).data("kendoValidator");if(b&&b.validate()){a.config.data.name=$("#widget-catalog-name").val(),a.config.data.description=$("#widget-catalog-description").val();var c={viewType:a.selectedWidgetTypeOption};"dashboard"===a.selectedWidgetType&&(c.supportedViews=a.supportedViews,c.reportViewType=a.reportViewTypeCombo.value()),a.widgetColumnGrid&&(c.data=[],$.each(a.widgetColumnGrid.dataSource.data(),function(a,b){c.data.push({domainObjectValueId:b.domainObjectValueId,domainObjectValueType:b.type?b.type:b.domainObjectValueType,domainObjectValueName:b.domainObjectValueName,discreetValues:b.discreetValues,filterable:b.filterable,sortable:b.sortable,section:b.section,selected:b.selected,mini_widget:b.mini_widget,positionNumber:b.positionNumber,sortDir:b.sortDir,hidden:b.hidden}),b.defaultSort&&(c.sortAttribute=b.domainObjectValueId,c.sortDir=b.sortDir)})),a.detailDomainObjectValues&&(c.detail={data:a.detailDomainObjectValues,domainObjectType:a.detailDomainObjectType,domainDataView:a.detailDomainDataView}),a.config.data.widgetType=a.selectedWidgetType,a.config.data.widgetData=JSON.stringify(c),a.config.data.pictureName=a.iconSelector.data("name");var d=a.getParams(a.config.data);a.doSave(d)}},getParams:function(a){"use strict";var b=this;return"object"==typeof a.widgetData&&(a.widgetData=JSON.stringify(a.widgetData)),{id:a.id,user:App.config.user.id,name:a.name,description:a.description,widgetType:a.widgetType,widgetData:a.widgetData,location:a.location?a.location:App.config.locationNone,positionNumber:a.positionNumber?a.positionNumber:0,parent:a.parent?a.parent:"",pictureName:a.pictureName?a.pictureName:"",domainObjectType:b.config.domainObjectType}},doSave:function(a){"use strict";var b=this,c="createWidget2";b.config.data.id&&""!==b.config.data.id&&(c="updateWidget2",a.id=b.config.data.id),b.setSaveButtonBusy(!0),b.showBusy(b.elDialogContent),$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/"+c,data:a,success:function(a){if(b.parentAssignment){var c=a.id?a.id:b.config.data.id,d=b.parentAssignment.getAvailableIds(),e=b.parentAssignment.getSelected(),f=0,g=d.length+e.length,h=function(){f++,f===g&&($.proxy(b.config.parentRef.getWidgetsByObjectTypeId(b.config.domainObjectType),b.config.parentRef),b.dialog.close())};b.config.parentRef?($.each(e,function(a,d){$.each(b.config.parentRef.widgets,function(b,e){e.config.id===d.get("id")&&(e.config.parent=c,e.config.positionNumber=a,e.doSave(h))})}),$.each(d,function(a,c){$.each(b.config.parentRef.widgets,function(a,b){b.config.id===c&&(b.config.parent="",b.doSave(h))})})):(f=0,h=function(){f++,f===g&&b.dialog.close()},$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:b.config.domainObjectType},success:function(a){var f=a.data;$.each(e,function(a,d){$.each(f,function(e,f){f.id===d.get("id")&&(f.parent=c,f.positionNumber=a,b.doSaveParentWidget(f,h))})}),$.each(d,function(a,c){$.each(f,function(a,d){d.id===c&&(d.parent="",b.doSaveParentWidget(d,h))})})}}))}else b.config.parentRef&&$.proxy(b.config.parentRef.getWidgetsByObjectTypeId(b.config.domainObjectType),b.config.parentRef),b.dialog.close();App.config.widgets[b.config.domainObjectType]=null,b.setSaveButtonBusy(!1),b.hideBusy(b.elDialogContent)},error:function(){b.setSaveButtonBusy(!1),b.hideBusy(b.elDialogContent)}})},doSaveParentWidget:function(a,b){var c=this,d={id:a.id,user:App.config.user.id,name:a.name,description:a.description,widgetType:a.widgetType,widgetData:a.widgetData,location:a.location,positionNumber:a.positionNumber,parent:a.parent,pictureName:a.pictureName,domainObjectType:c.config.domainObjectType};$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:d,success:b})},initIconPicker:function(){"use strict";var a,b=$("#icon-picker-container");if(b.length)a=b.find(".icon-popover");else{b=$("<div>",{id:"icon-picker-container","class":"hidden"}).appendTo("body"),a=$("<div>",{"class":"icon-popover"}).appendTo(b);var c,d="";$.each(this.widgetIconSets,function(a,b){for(d+="<h4><small>"+App.translate(b.name)+"</small></h4>",c=1;c<b.count;c++)d+='<img src="images/icons/32px/'+b.pfx+c+'.png" title="'+b.pfx+c+'" class="btn">'}),a.html(d)}return a.clone()}}),App.ui.WidgetCatalog=kendo.Class.extend({elDialogContent:null,elContent:null,elBtnCreateWidget:null,selectedDomainObjectType:null,centerWidgets:null,sidebarWidgets:null,availableWidgets:null,widgets:[],defaultDomainObjectType:"group",init:function(a){"use strict";var b=this;return this.config=$.extend({title:App.translate("Widget Catalog"),minWidth:800,width:950,height:2/3*document.body.clientHeight,modal:!0,visible:!1,buttons:[{name:App.translate("Reset Widgets"),click:function(){$.proxy(b.doReset(),b)}},{name:App.translate("Close Catalog"),click:this.onCancel}]},a),$("#widget-catalog").remove(),this.elDialogContent=$("<div>",{id:"widget-catalog"}).appendTo("body"),this.elContent=$("<div>",{"class":"widget-catalog-content"}),this.elContent.appendTo(this.elDialogContent),this.elDialogContent.on("click","[data-action=delete]",function(a){a.preventDefault();var c=$(this).closest("li"),d=b.getWidgetById(c.data("id"));d&&d.doDelete()}).on("click","[data-action=edit]",function(a){a.preventDefault();var c=$(this).closest("li"),d=b.getWidgetById(c.data("id"));d&&d.doEdit()}),this},getApplicationObjects:function(a){"use strict";$("<div>",{"class":"intro-text"}).text(App.translate("Please select which application object you want to configure.")).appendTo(a);var b,c=$("<div>").appendTo(a),d=c.kendoTreeView({dataSource:{data:App.config.domainObjectTypesTree,schema:{model:{id:"id",hasChildren:function(a){return a.items&&a.items.length},children:{schema:{data:"items",model:{id:"id"}}}}}},template:'#if (!item.hasChildren) {#<span class="treeview-node-indented ao-16px #=App.util.format.domainObjectTypeIcon(item.id)#">#} else {#<span>#}##=App.translate(item.name)#</span>',select:$.proxy(this.onAppObjectsChange,this),loadOnDemand:!1}),e=d.data("kendoTreeView"),f=e.dataSource.get(App.current.objectType);f?(b=e.findByUid(f.uid),e.expand(e.findByUid(f.parentNode().uid))):(e.expand(".k-item:first"),b=d.find(".k-item:first ul.k-group .k-item:first")),e.select(b),e.trigger("select",{node:b[0]})},getWidgetPositioning:function(a){"use strict";$("<div>",{"class":"intro-text",html:App.translate("Place widgets into the Application Area you want by dragging and dropping widgets from the Available Widget list.")}).appendTo(a);var b=$("<div>",{"class":"pull-left",style:"width: 45%;"}).appendTo(a);$("<h3>",{html:App.translate("Main Area")}).appendTo(b),this.centerWidgets=$("<ul>",{"data-location":App.config.locationMainArea}).appendTo(b);var c=$("<div>",{"class":"pull-right",style:"width: 45%;"}).appendTo(a);$("<h3>",{html:App.translate("Sidebar")}).appendTo(c),this.sidebarWidgets=$("<ul>",{"data-location":App.config.locationSideBar}).appendTo(c)},getAvailablePanel:function(a){"use strict";var b=this;$("<div>",{"class":"intro-text",html:App.translate("Drag one of the widgets below, or create a new widget.")}).appendTo(a),b.elBtnCreateWidget=$("<button>",{"class":"k-button",html:App.translate("Create Widget"),click:function(){if(!$(this).is(":disabled")){var a=new App.ui.WizardWidget({data:[],domainObjectType:b.selectedDomainObjectType,parentRef:b});a.show()}}}).appendTo(a),this.availableWidgets=$("<ul>",{"data-location":App.config.locationNone}).appendTo(a)},show:function(){"use strict";var a,b,c,d=this;this.dialog=this.elDialogContent.kendoExtDialog(this.config).data("kendoExtDialog"),this.dialog.bind("deactivate",function(){d.destroy(),App.router.navigate(App.router.lastRoute)});for(var e=[{name:App.translate("Application Objects"),cls:"app-objects",fn:this.getApplicationObjects},{name:App.translate("Widget Positioning"),cls:"positioning wc-sortable",fn:this.getWidgetPositioning},{name:App.translate("Available Widgets"),cls:"available wc-sortable",fn:this.getAvailablePanel}],f=0;f<e.length;f++)a=e[f],b=$("<div>",{"class":"widget "+a.cls}).appendTo($(".widget-catalog-content")),b.append($("<div>",{"class":"widget-header"}).append($("<span>",{"class":"widget-header-title"}).text(a.name))),c=$("<div>",{"class":"widget-content"}).appendTo(b),a.fn.call(d,c);this.dialog.center().open()},onCancel:function(a){"use strict";a.dialog.close()},destroy:function(){"use strict";this.dialog&&($("#icon-picker-container").remove(),this.dialog.destroy())},onAppObjectsChange:function(a){"use strict";if(a.node&&a.node.attributes){var b=a.sender.dataSource.getByUid($(a.node).data().uid);b.id?(this.selectedDomainObjectType=b.id,b.widgetTypes&&b.widgetTypes.length?(this.elBtnCreateWidget&&this.elBtnCreateWidget.prop("disabled",!1).removeClass("k-state-disabled"),$(".widget.positioning").removeClass("disabled"),$(".widget.available").removeClass("disabled")):(this.elBtnCreateWidget&&this.elBtnCreateWidget.prop("disabled",!0).addClass("k-state-disabled"),$(".widget.positioning").addClass("disabled"),$(".widget.available").addClass("disabled")),this.getWidgetsByObjectTypeId(this.selectedDomainObjectType)):a.preventDefault()}},makeSortable:function(){var a=this;$(".wc-sortable ul").sortable({connectWith:".wc-sortable ul",placeholder:"ui-state-highlight",tolerance:"pointer",stop:function(b,c){var d,e=$(c.item),f=e.parents("[data-location]").data("location"),g=e.parent();$.each(g.children("li"),function(b,c){d=a.getWidgetById($(c).data("id")),d&&(f&&(d.config.location=f,d.config.parent=g.parent().data("id")||""),d.config.positionNumber=b,d.doSave(function(){App.config.widgets[d.config.objectType]=null}))}),$(".wc-sortable li").each(function(){var a=$(this),b=a.find("ul");a.find(">[data-action=delete]").toggleClass("hidden",b.length>0&&b.children().length>0)})}})},getWidgetsByObjectTypeId:function(a){"use strict";var b=this;kendo.ui.progress(this.elDialogContent,!0),$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:{domainObjectType:a},success:function(a){b.centerWidgets.empty(),b.sidebarWidgets.empty(),b.availableWidgets.empty(),b.widgets=[];for(var c=a.data,d=c.filter(function(a){return App.config.parentWidgetType===a.widgetType}),e=0;e<d.length;e++){d[e].children=[];for(var f=0;f<c.length;f++){var g=c[f];g.parent===d[e].id&&d[e].children.push(g)}}$.each(c.filter(function(a){return App.config.parentWidgetType!==a.widgetType&&""===a.parent}),function(a,b){d.push(b)}),d.sort(App.util.sortWidget),$.each(d,function(a,c){var d,e,f=b.availableWidgets;switch(c.location){case App.config.locationMainArea:f=b.centerWidgets;break;case App.config.locationSideBar:f=b.sidebarWidgets;break;case App.config.locationNone:}if(d=new App.ui.WidgetCatalog.Item($.extend(c,{renderTo:f,parentRef:b})),b.widgets.push(d),c.children){c.children.sort(App.util.sortWidget);for(var g=0;g<c.children.length;g++)e=new App.ui.WidgetCatalog.Item($.extend(c.children[g],{renderTo:d.items,parentRef:b})),b.widgets.push(e)}}),b.makeSortable(),kendo.ui.progress(b.elDialogContent,!1)}})},getWidgetById:function(a){for(var b=null,c=0;c<this.widgets.length;c++)if(this.widgets[c].config.id===a){b=this.widgets[c];break}return b},doReset:function(){"use strict";var a=this;$.when(App.dialog.okCancel({title:App.translate("Reset all widgets"),message:App.translate("Are you sure you want to reset all widgets?"),labelOK:App.translate("Reset Widgets"),width:320,icon:App.dialog.iconQuestion})).done(function(b){"OK"===b.button&&$.ajax({url:App.config.serviceUrl+"caesarUserWidgetsToDefault/resetWidgetsForUser",success:function(){a.getWidgetsByObjectTypeId(a.selectedDomainObjectType),App.util.widget.syncWithDefault()}})})}}),App.ui.WidgetCatalog.Item=kendo.Class.extend({el:null,items:null,init:function(a){"use strict";this.config=$.extend({renderTo:null,parentRef:null},a);var b=App.config.parentWidgetType===this.config.widgetType,c=this.config.children&&this.config.children.length;this.el=$("<li>",{"data-id":this.config.id}).appendTo(this.config.renderTo);var d="32px";$("body").hasClass("k-ie8")&&(d="16px"),$("<img>",{src:"images/icons/"+d+"/"+this.config.pictureName+".png"}).appendTo(this.el),$("<span>",{"class":"title",html:this.config.name}).appendTo(this.el),$("<a>",{"class":"pull-right glyphicon glyphicon-remove"+(b&&c?" hidden":""),"data-action":"delete"}).appendTo(this.el),$("<a>",{"class":"pull-right glyphicon glyphicon-pencil","data-action":"edit"}).appendTo(this.el),b&&(this.items=$("<ul>").appendTo(this.el))},doEdit:function(){"use strict";var a=new App.ui.WizardWidget({myId:this.config.id,data:this.config,domainObjectType:this.config.objectType,parentRef:this.config.parentRef});a.show()},doSave:function(a){"use strict";var b={id:this.config.id,user:App.config.user.id,name:this.config.name,description:this.config.description,widgetType:this.config.widgetType,widgetData:this.config.widgetData,location:this.config.location,positionNumber:this.config.positionNumber,parent:this.config.parent,pictureName:this.config.pictureName,domainObjectType:this.config.parentRef.selectedDomainObjectType};$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:b,success:a})},doDelete:function(){"use strict";var a=this;a.config.location===App.config.locationMainArea||a.config.location===App.config.locationSideBar||""!==a.config.parent?(a.config.location=App.config.locationNone,a.config.parent="",a.doSave(function(){$.proxy(a.config.parentRef.getWidgetsByObjectTypeId(a.config.parentRef.selectedDomainObjectType),a.config.parentRef)})):$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/deleteWidget",data:{id:a.config.id},success:function(){$.proxy(a.config.parentRef.getWidgetsByObjectTypeId(a.config.parentRef.selectedDomainObjectType),a.config.parentRef)}})}}),App.widget.Base=kendo.Class.extend({config:{},widgetData:{},el:null,isPersistent:!1,items:[],jqXHR:null,lastRefresh:null,isRefreshing:!1,init:function(a){"use strict";this.config=$.extend({widgetData:[]},a)},load:function(){},refresh:function(){},destroy:function(){},onDrop:function(){},setWidgetData:function(){this.config&&this.config.widgetData&&"null"!==this.config.widgetData&&("object"==typeof this.config.widgetData?this.widgetData=this.config.widgetData:this.widgetData=$.parseJSON(this.config.widgetData))},getMapProject:function(a){var b={id:null,name:"",mapViewer:"",mapUrl:"",datumName:""};return a&&App.config.map.projects[a]?b=App.config.map.projects[a]:App.config.map.projects[App.config.map.defaultId]&&(b=App.config.map.projects[App.config.map.defaultId]),b}}),App.widget.AssetCommand=App.widget.Base.extend({elContainer:null,communicatorCombo:null,init:function(a){"use strict";var b=this;b.config=$.extend({},a),b.communicatorCombo=$("<input>").appendTo(b.config.el).kendoComboBox({placeholder:App.translate("Select communicator"),autoBind:!0,dataSource:new kendo.data.DataSource({transport:{read:{url:App.config.serviceUrl+"caesarAssetCommand/communicators ",dataType:"json",data:{asset:b.config.domainObjectId}}},schema:{data:"communicators"},change:function(){var a=this.data();$.each(a,function(a,c){c.isDefault&&(b.communicatorCombo.value(c.id),b.communicatorCombo.trigger("change"))})}}),dataTextField:"name",dataValueField:"id",change:$.proxy(this.onCommunicatorChange,this)}).data("kendoComboBox"),b.elContainer=$("<div>",{"class":"widget-detail"}).appendTo(b.config.el)},onCommunicatorChange:function(a){"use strict";var b=a.sender.value(),c=this;b&&$.ajax({url:App.config.serviceUrl+"caesarAssetCommand/assetCommands2",data:{communicatorId:b},success:function(a){c.elContainer.empty();for(var d=function(a,d){$("<dt>",{text:App.translate(d.name)}).appendTo(g);for(var e=0;e<d.parameters.length;e++){var f=d.parameters[e],h=$("<dd>").appendTo(g),i=$("<input>",{type:"text",name:f.key,id:d.id}).appendTo(h);f.hasMultipleValueSupport&&i.kendoDropDownList({dataSource:{data:f.availableValues}})}g.append($("<dd>").append($("<button>",{"class":"k-button",text:App.translate("Send"),click:function(){var a={};if(d.parameters.length){var e=$("#"+d.id);a.key=e.attr("name"),a.value=e.val()}d.requiresJustification?$.when(App.dialog.okCancel({title:App.translate("Execute Command"),height:"180px",message:App.translate("Do you really want to execute {0}?",d.name),labelCancel:App.translate("No"),labelOK:App.translate("Execute"),icon:App.dialog.iconQuestion})).done(function(e){"OK"===e.button&&$.when(App.dialog.input({title:App.translate("Requires Justification"),message:App.translate("This Asset command requires a justification. Please enter a justification below"),required:!0})).done(function(e){"OK"===e.button&&c.onCommandSendClick(d.id,b,a,e.input)})}):d.requiresConfirmation?$.when(App.dialog.okCancel({title:App.translate("Execute Command"),height:"180px",message:App.translate("Do you really want to execute {0}?",d.name),labelCancel:App.translate("No"),labelOK:App.translate("Execute"),icon:App.dialog.iconQuestion})).done(function(e){"OK"===e.button&&c.onCommandSendClick(d.id,b,a)}):c.onCommandSendClick(d.id,b,a)}})))},e=0;e<a.commandGroups.length;e++){var f=a.commandGroups[e];c.elContainer.append($("<div>",{"class":"details-header",text:App.translate(f.name)}));var g=$("<dl>",{"class":"dl-horizontal"}).appendTo(c.elContainer);$.each(f.commands,d)}}})},onCommandSendClick:function(a,b,c,d){"use strict";var e=this,f={commandId:a,communicatorId:b,parameters:c,justification:d,domainObjectId:e.config.domainObjectId,domainObjectType:e.config.objectType};$.ajax({url:App.config.serviceUrl+"caesarAssetCommand/executeCommand",data:f,success:function(){var a=App.translate("Command sent successfully.");App.dialog.alert({title:App.translate("Command"),message:a,icon:App.dialog.iconInfo}),App.log.add(a,f)}})}}),App.widget.Dashboard=App.widget.Base.extend({chart:null,showStatusBar:!0,dateRange:null,dateRangeCustom:"custom",chartType:"column",dangleIntervalId:null,elDaterangeCustom:null,init:function(a){"use strict";this.config=$.extend({},a),this.config.el.css("direction","ltr"),this.setWidgetData(),this.widgetData.reportViewType&&(this.chartType=this.widgetData.reportViewType),this.refreshData()},refreshData:function(a){var b=this;a||(b.el=b.config.el);var c={reportId:b.widgetData.viewType,lastSelectedObject:App.current.objectId};null!==b.dateRange&&(b.dateRange==b.dateRangeCustom?c.filters=[{key:"daterange",type:"betweenAnd",value:b.dateRange,subvalues:[b.config.customDateRangeFrom,b.config.customDateRangeTo]}]:c.filters=[{key:"daterange",type:"eq",value:b.dateRange}]),c.filters&&(c.filters=JSON.stringify(c.filters)),b.isRefreshing=!0,$.ajax({url:App.config.serviceUrl+"rbireports/createReport",global:!1,data:c,success:function(c){var d=c.data,e="";if(a)d.values&&d.values.length>0&&(b.el.show(),b.chart.refresh(d));else{switch(b.createStatusbar(d),d.metadata.columns&&$.each(d.metadata.columns,function(a,b){$.each(b,function(b,c){"string"===$.type(c)&&(d.metadata.columns[a][b]=App.translate(c))})}),d.metadata.rows&&$.each(d.metadata.rows,function(a,b){$.each(b,function(b,c){"string"===$.type(c)&&(d.metadata.rows[a][b]=App.translate(c))})}),d.chartType=b.chartType,d.el=b.el,b.chartType){case"pie":b.chart=new App.component.Piechart.create({config:d});break;case"donut":b.chart=new App.component.Donutchart.create({config:d});break;case"linear-vertical":case"linear-horizontal":case"radial":b.chart=new App.component.Gaugechart.create({config:d});break;case"line":b.chart=new App.component.Linechart.create({config:d});break;case"Capacity (Cylindrical Graph)":b.chart=new App.component.CapacityChart.create({config:d,type:"cylinder"});break;case"Capacity (Column Graph)":b.chart=new App.component.CapacityChart.create({config:d,type:"column"});break;default:b.chart=new App.component.Defaultchart.create({config:d})}b.resize=function(){b.chart&&b.chart.redraw()},$(window).resize(b.resize)}d.values&&0===d.values.length||d.tabledata&&0===d.tabledata.rows.length?(b.el.hide(),e=App.translate("No data to display")):e=null===d.metadata.lastUpdateTime?App.translate("No recent activity"):kendo.format("<span><strong>{0}</strong>: {1}</span>",App.translate("Last Update"),App.util.format.dateTime(d.metadata.lastUpdateTime)),b.updateStatusbar(d,e),b.lastRefresh=Date.now(),d.metadata.nextUpdateInSeconds&&(b.lastRefresh+=1e3*d.metadata.nextUpdateInSeconds),b.isRefreshing=!1},error:function(){b.updateStatusbar({},kendo.format("<strong>{0}</strong>",App.translate("Service temporarily unavailable"))),b.lastRefresh=Date.now(),b.isRefreshing=!1}})},createStatusbar:function(a,b){var c=this,d=[],e=c.config.elStatus,f=0,g=null;e.empty(),e.removeClass("hidden"),d.push({template:'<span data-id="statusMessage"></span>',overflow:"never",attributes:{"class":"widget-status-item-right"}});var h={daterange:{items:[{template:"<span>"+App.translate("Date Range:")+"</span>",attributes:{style:"margin-left:.5em"},overflow:"auto"},{template:'<input data-id="daterangeDropdown" style="width:100px;"/>',overflow:"auto"}],installer:function(a){c.dateRange=a.value;var b=function(a){c.elDaterangeCustom=$(kendo.format('<span>{0} <input data-id="daterangeCustomFrom" /><br/>{1} <input data-id="daterangeCustomTo" /><br/><button data-id="ok" class="k-button pull-right">{2}</button></span>',App.translate("Start date:"),App.translate("End date:"),App.translate("OK")));var b=c.elDaterangeCustom.find("[data-id=daterangeCustomFrom]").kendoDateTimePicker({max:new Date}).data("kendoDateTimePicker"),d=c.elDaterangeCustom.find("[data-id=daterangeCustomTo]").kendoDateTimePicker({max:new Date}).data("kendoDateTimePicker");c.elDaterangeCustom.find("[data-id=ok]").click(function(){a.popover("hide");var e=b.value();e?(App.util.dateToGMT(e),c.config.customDateRangeFrom=kendo.toString(e,App.config.dateTimeFormat)):c.config.customDateRangeFrom=null;var f=d.value();f?(App.util.dateToGMT(f),c.config.customDateRangeTo=kendo.toString(f,App.config.dateTimeFormat)):c.config.customDateRangeTo=null,c.config.customDateRangeFrom&&c.config.customDateRangeTo&&(c.dateRange=c.dateRangeCustom,c.refreshData(!0))}),a.popover({content:c.elDaterangeCustom,html:!0,placement:"auto top",trigger:"manual",title:App.translate("Select start and end date"),container:"body"})};e.find("[data-id=daterangeDropdown]").kendoDropDownList({dataValueField:"id",dataTextField:"name",dataSource:a.choices,change:function(){var a=this.value();a==c.dateRangeCustom?(c.elDaterangeCustom||b(this.span),this.span.popover("show")):a&&(this.span.popover("hide"),c.dateRange=a,c.refreshData(!0))},select:function(){this.value()==c.dateRangeCustom&&(c.elDaterangeCustom||b(this.span),this.span.popover("show"))}})}}};if(a&&a.metadata&&a.metadata.filters&&a.metadata.filters.length>0)for(f=0;f<a.metadata.filters.length;f++)g=a.metadata.filters[f],h.hasOwnProperty(g.key)&&(d=d.concat(h[g.key].items));if(e.kendoToolBar({items:d}),b&&e.find("[data-id=statusMessage]").html(b),a&&a.metadata&&a.metadata.filters&&a.metadata.filters.length>0)for(f=0;f<a.metadata.filters.length;f++)g=a.metadata.filters[f],h.hasOwnProperty(g.key)&&h[g.key].installer(g)},updateStatusbar:function(a,b){if(this.config.elStatus.find("[data-id=statusMessage]").length){if(this.config.elStatus.find("[data-id=statusMessage]").html(b),a.metadata&&a.metadata.filters&&a.metadata.filters.length)for(var c=0;c<a.metadata.filters.length;c++){var d=a.metadata.filters[c];switch(d.key){case"daterange":var e=this.config.elStatus.find("[data-id=daterangeDropdown]");e&&e.data("kendoDropDownList").value(d.value)}}}else this.createStatusbar(a,b)},resize:function(){"use strict";this.chart&&this.chart.redraw()},refresh:function(){this.refreshData(!0)},destroy:function(){"use strict";this.chart&&this.chart.destroy(),$(window).off("resize",this.resize)}}),App.widget.Detail=App.widget.Base.extend({widgetData:null,sectionData:{},values:[],init:function(a){"use strict";var b=this;b.config=$.extend({},a),b.setWidgetData(),b.sectionData={},b.values=[];for(var c=null,d=0;d<b.widgetData.data.length;d++){var e=b.widgetData.data[d];e.selected&&(e.section!==c&&(c=e.section,b.sectionData[e.section]||(b.sectionData[e.section]=[])),b.sectionData[e.section].push(e),b.values.push(e.domainObjectValueId))}},load:function(){"use strict";var a=this;return a.isRefreshing=!0,this.jqXHR=$.ajax({url:App.config.serviceUrl+"caesarObject/objectDataProvider3",data:{domainObjectId:a.config.domainObjectId,domainObjectValues:JSON.stringify(a.values),domainObjectType:a.config.objectType,domainDataView:a.widgetData.viewType},success:function(b){for(var c="",d=0;d<b.ui.items.length;d++){for(var e=b.ui.items[d],f={},g=0;g<e.items.length;g++)for(var h=0;h<e.items[g].items.length;h++){var i=e.items[g].items[h];f[i.id]=i}for(var j in a.sectionData)if(a.sectionData.hasOwnProperty(j)){c+='<h5 class="details-header">'+App.translate(j)+"</h5>",c+='<dl class="dl-horizontal">';for(var k=0;k<a.sectionData[j].length;k++){var l=a.sectionData[j][k],m=f[l.domainObjectValueId];m&&(m.domainObjectType=m.domainObjectType||a.config.objectType,m.domainObjectId=m.domainObjectId||a.config.domainObjectId,c+="<dt>"+App.translate(l.domainObjectValueName)+"</dt>",c+="<dd>"+App.translate(App.util.format.item(m))+"</dd>")}c+="</dl>"}}a.config.el.addClass("widget-detail"),a.config.el.html(c),a.lastRefresh=Date.now(),a.isRefreshing=!1}}),this.jqXHR},refresh:function(){"use strict";return this.load()},destroy:function(){this.jqXHR&&4!==this.jqXHR.readyState&&0!==this.jqXHR.readyState&&(this.jqXHR.abort(),this.jqXHR=null),this.config.el&&this.config.el.remove()}}),App.widget.Grid=App.widget.Base.extend({grid:null,dataSource:null,widgetData:null,dateFields:[],stateFields:{},columns:[],persistentColumns:[],availablePersistentColumns:["alarmId","eventId","hasMapPosition","isAcknowledged","jobCode"],metaSuffix:"__meta",dsSchema:{},toolbar:[],toolbarCfg:[],stateFilter:null,customDateFilter:{},selectable:!0,parentWidget:null,currentSubGrid:null,lastDetailRow:null,lastSortValue:null,init:function(a){"use strict";var b=this;b.config=$.extend({sortAttribute:null,sortDir:null,domainDataView:null,url:App.config.serviceUrl+"caesarObject/objectDataProvider3"},a),b.customDateFilter={extra:!1,type:"date",operators:{date:{betweenAnd:App.translate("Is between"),lte:App.translate("Is before or equal to"),gte:App.translate("Is after or equal to")}},ui:function(a){var b=a.parent(),c=b.find("div:last");a.kendoDatePicker({});var d='<span class="k-widget k-datepicker k-header"><span class="k-picker-wrap k-state-default"><input data-bind="value:filters[1].value" type="text" data-role="datepicker" style="width: 100%" role="textbox" aria-haspopup="true" aria-expanded="false" aria-disabled="false"  aria-readonly="false" aria-label="'+App.translate("Choose a date")+'"><span class="k-select" role="button"><span class="k-icon k-i-calendar">'+App.translate("select")+"</span></span></span></span>";c.prepend(d)}},b.setWidgetData(),b.config.parentWidget&&(b.parentWidget=b.config.parentWidget),b.createGridConfig(),b.addDefaultButtons();var c=b.hasFeatures(b.config);c?(b.addFeatures(),b.widgetData.detail||b.columns.unshift({title:"<input type='checkbox' class='checkbox checkAllRows'>",template:'<input type="checkbox" class="checkbox checkRow">',width:"25px"})):b.config.parentWidget&&b.columns.unshift({title:"<input type='checkbox' class='checkbox checkAllRows'>",template:'<input type="checkbox" class="checkbox checkRow">',width:"25px"}),b.selectable=!1,b.toolbar.length||(b.toolbar=null),
b.dataSource=b.getDataSource(),b.grid=b.config.el.kendoGrid({dataSource:b.dataSource,toolbar:b.toolbar,columnResizeHandleWidth:6,selectable:b.selectable,filterable:{messages:{info:App.translate("Show items with value that:"),filter:App.translate("Filter"),clear:App.translate("Clear")}},sortable:!0,columns:b.columns,resizable:!0,columnMenu:{messages:{columns:App.translate("Columns"),filter:App.translate("Filter"),sortAscending:App.translate("Sort Ascending"),sortDescending:App.translate("Sort Descending")}},detailInit:b.widgetData.detail?$.proxy(b.detailInit,b):null,columnHide:function(a){a.column.selected=!1},columnShow:function(a){a.column.selected=!0,b.refresh()},detailCollapse:function(a){a.masterRow.removeClass("k-state-selected"),b.currentSubGrid=null},detailExpand:function(a){var c=a.detailRow.find(".k-grid").data("kendoGrid"),d=c.dataSource.data();if(d.length||c.dataSource.read(),b.currentSubGrid=c,b.lastDetailRow&&b.lastDetailRow.index()!==a.masterRow.index()){var e=b.currentSubGrid.wrapper.data("subgrid");e.grid.tbody.children("tr").removeClass("k-state-selected"),b.currentSubGrid.wrapper.find(".checkRow").prop("checked",!1),b.updateActionButtons(),a.sender.collapseRow(b.lastDetailRow),b.currentSubGrid=c}b.lastDetailRow=a.masterRow},reorderable:!0,pageable:{input:!0,numeric:!1,messages:{empty:App.translate("No items to display"),page:App.translate("Page"),of:App.translate("of")+" {0}",display:"{0} - {1} "+App.translate("of")+" {2} "+App.translate("items"),itemsPerPage:App.translate("items per page"),first:App.translate("Go to the first page"),previous:App.translate("Go to the previous page"),next:App.translate("Go to the next page"),last:App.translate("Go to the last page")}},excel:{allPages:!1,proxyURL:App.config.serviceUrl+"caesarVfsResource/proxySave",fileName:b.config.name+".xlsx"},pdf:{allPages:!1,creator:"ROAMWORKS UI",paperSize:"A4"},columnMenuInit:function(a){var b=a.container.find(".k-filterable"),c=b.find("select:first"),d=b.find(".k-datepicker:last"),e=b.data("kendoFilterMenu"),f=e?e.filterModel.filters:null;if(d.length)c.bind("change",function(){var a=$(this).closest(".k-filterable"),b=a.find(".k-datepicker:last"),c=$(this).val();"betweenAnd"===c?b.show():(b.hide(),b.find("input").data("kendoDatePicker").value(null),f&&(f[1].value=""))});else{var g=b.find(".k-filter-and");$("<p>",{text:App.translate("And"),style:"padding-top: 5px;"}).insertBefore(g),g.hide()}},dataBound:function(){var a=b.grid.dataSource.sort();!b.lastSortValue&&a?b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!1):a&&b.lastSortValue&&(a.length!=b.lastSortValue.length||a[0]&&b.lastSortValue[0]&&(a[0].dir!=b.lastSortValue[0].dir||a[0].field!=b.lastSortValue[0].field))&&(b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!1),b.autoFitColumns(!1)),b.lastSortValue=a,b.autoSized||(b.autoFitColumns(),b.autoSized=!0)}}).data("kendoGrid"),(c&&!b.widgetData.detail||b.config.parentWidget)&&(b.grid.table.on("click",".checkRow",{widget:b},b.selectRowByCheckbox),b.config.el.on("click",".checkAllRows",{widget:b},b.selectAllRows)),b.buildToolbar(),b.lastSortValue=b.grid.dataSource.sort(),b.grid.bind("columnShow",function(){b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!1),b.grid.one("dataBound",function(){b.autoFitColumns(!1)})}).bind("columnHide",function(){b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!1),b.grid.one("dataBound",function(){b.autoFitColumns(!1)})}).bind("change",function(){b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!1),b.grid.one("dataBound",function(){b.autoFitColumns(!1)})}).bind("columnReorder",function(){b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!1)}).pager.bind("change",function(){b.grid.one("dataBound",function(){b.autoFitColumns(!1)})})},autoFitColumns:function(a){if(App.config.scrollableGrid&&!a&&this.config.location!==App.config.locationSideBar)for(var b=0;b<this.grid.columns.length;b++)this.grid.autoFitColumn(b)},updateActionButtons:function(){var a,b=this;a=b.parentWidget?b.parentWidget:b;var c=b.getSelectedIds(),d=c.length;$.each(a.toolbarCfg,function(e,f){if("button"===f.type){if("saveGrid"==f.name)return;"showOnMap"===f.name&&(d=b.getSelectedIds("map").length),"acknowledge"===f.name&&(d=b.getSelectedIds("acknowledge").length),d>0?a.config.el.find(".k-grid-"+f.name).prop("disabled",!1):a.config.el.find(".k-grid-"+f.name).prop("disabled",!0),d=c.length}})},buildToolbar:function(){"use strict";var a=this;$.each(a.toolbarCfg,function(b,c){switch(c.type){case"discreteValueFilter":$.each(c.values,function(a,b){b.name=App.translate(b.name)}),a.config.el.find("#"+c.elId).kendoDropDownList({dataTextField:"name",dataValueField:"id",autoBind:!1,optionLabel:App.translate("All"),template:c.template,dataSource:{data:c.values},change:function(){var b=this.value();b?a.dataSource.filter({field:c.field,operator:"eq",value:b}):a.dataSource.filter({})}}).data("kendoDropDownList");break;case"button":a.config.el.find(".k-grid-"+App.translate(c.name)).click(c.click)}})},createGridConfig:function(){"use strict";var a=this;a.columns=[],a.persistentColumns=[],a.dateFields=[],a.dsSchema={},a.stateFilter=[];var b=[];a.widgetData.data.sort(App.util.sortWidget),$.each(a.widgetData.data,function(c,d){var e,f=d.domainObjectValueId,g=a.metaSuffix,h="string",i=d.filterable===!0,j=250,k="${data.name}";if(!d.hidden){switch(d.domainObjectValueType){case"dateTime":i&&(i=a.customDateFilter,e="{0:"+App.config.dateTimeFormat+"}"),a.dateFields.push(f),j=130,h="date";break;case"date":i&&(i=a.customDateFilter,e="{0:"+App.config.dateFormat+"}"),a.dateFields.push(f),j=100,h="date";break;case"stateType":k='<img src="#=App.util.format.icon(data.id)#" style="width: 16px; height: 16px;" /> ${data.name}',i=!1,j=50,h="string";break;case"decimal":case"numeric":case"percentage":j=50,h="number";break;case"duration":h="number";break;case"boolean":j=50,h="boolean";break;default:case"domainObjectReferenceType":case"email":case"phoneNumber":case"vfsAttachment":case"vfsImage":h="string"}if(j=null,a.columns.push({field:f,title:App.translate(d.domainObjectValueName),template:function(a){return App.translate(App.util.format.item(a[f+g]))},sortable:d.sortable===!0,filterable:i,format:e,mini_widget:d.mini_widget,hidden:!(a.config.location!==App.config.locationSideBar||d.mini_widget)||!d.selected,selected:d.selected,width:j}),a.dsSchema[f]={type:h},d.discreetValues&&d.discreetValues.length){a.stateFields[f]={};for(var l=0;l<d.discreetValues.length;l++){var m=d.discreetValues[l];m&&(a.stateFields[f][m.id]=m.name)}var n=App.ui["static"].getNewId();b.push({template:kendo.format('<label for="filter_{0}">{1}</label><input type="search" id="filter_{0}"/>',n,App.translate(d.domainObjectValueName))}),a.toolbarCfg.push({elId:kendo.format("filter_{0}",n),field:f,values:d.discreetValues,template:k,type:"discreteValueFilter"})}}a.availablePersistentColumns.indexOf(f)>-1&&a.persistentColumns.push(f)}),b.length&&(a.toolbar=a.toolbar.concat(b)),a=null},getDataSource:function(){"use strict";var a=this;return new kendo.data.DataSource({transport:{read:function(b){var c=[],d=[];b.data.filter&&($.each(b.data.filter.filters,function(b,e){var f=null;if(e.filters){for(var g=0;2>g;g++)e.filters[g].field&&a.dateFields.indexOf(e.filters[g].field)>-1&&(f=new Date(e.filters[g].value),f&&App.util.dateToGMT(f),e.filters[g].value=kendo.toString(f,App.config.dateTimeFormat));f="betweenAnd"===e.filters[0].operator?[e.filters[0].value,e.filters[1].value]:e.filters[0].value,c.push({key:e.filters[0].field,value:f,type:e.filters[0].operator})}else a.dateFields.indexOf(e.field)>-1&&(f=new Date(e.value),f&&App.util.dateToGMT(f),e.value=kendo.toString(f,App.config.dateTimeFormat)),"betweenAnd"===e.operator||1===d.length?(d.push(e.value),2===d.length&&(c.push({key:e.field,value:d,type:"betweenAnd"}),d=[])):c.push({key:e.field,value:e.value,type:e.operator})}),delete b.data.filter),a.config.filters&&($.isArray(a.config.filters)?c=$.merge(c,a.config.filters):c.push(a.config.filters));for(var e=[],f=a.grid?a.grid.columns:a.columns,g=0;g<f.length;g++){var h=f[g];if(!h.hidden){var i=h.field;"string"===$.type(i)&&e.push(i)}}e=$.unique(e.concat(a.persistentColumns));var j=$.extend({domainObjectId:a.config.domainObjectId,domainObjectValues:JSON.stringify(e),domainObjectType:a.config.objectType,domainDataView:a.config.domainDataView?a.config.domainDataView:a.widgetData.viewType,filters:JSON.stringify(c)},b.data),k=a.config.sortAttribute?a.config.sortAttribute:a.widgetData&&a.widgetData.sortAttribute?a.widgetData.sortAttribute:null,l=a.config.sortDir?a.config.sortDir:a.widgetData?a.widgetData.sortDir:1;b.data.sort&&b.data.sort.length&&(k=b.data.sort[0].field,l="asc"===b.data.sort[0].dir?0:1),k&&(j.sortValue=k,j.sortOrder=l),a.isRefreshing=!0,a.jqXHR=$.ajax({url:a.config.url,data:j,success:function(c){for(var d=[],e=0;e<c.ui.items.length;e++){for(var f={},g=c.ui.items[e].items,h=0;h<g.length;h++)for(var i=g[h],j=0;j<i.items.length;j++){var k=i.items[j];f[k.id]=a.getCellData(k,a.stateFields),f[k.id+a.metaSuffix]=k}d.push(f)}b.success({data:d,originalSize:c.originalSize}),a.lastRefresh=Date.now(),a.isRefreshing=!1}})}},serverPaging:!0,serverFiltering:!0,serverSorting:!0,schema:{model:{fields:a.dsSchema},data:"data",total:"originalSize"},pageSize:App.config.user.dataGridPageSize})},hasFeatures:function(a){"use strict";var b=!1,c=a.domainDataView?a.domainDataView:this.widgetData.viewType;if("maintenanceEvents"===c||"eventHistory"===c)return!0;if(App.config.domainDataViews.length)for(var d=0;d<App.config.domainDataViews.length;d++){var e=App.config.domainDataViews[d];if(e.id===c&&e.features&&e.features.length){b=!0;break}}return b},addFeatures:function(){"use strict";var a=this,b=a.config.domainDataView?a.config.domainDataView:a.widgetData.viewType,c={className:"pull-right",type:"button"},d=[],e=[];switch(b){case"activeAlarms":case"allActiveAlarms":var f=App.view.Alarm?App.view.Alarm.doAction:$.noop;d=[$.extend({name:"showOnMap",click:function(){f(a.grid,a.getSelectedIds("map"),"showOnMap")}},c),$.extend({name:"createRoute",click:function(){f(a.grid,a.getSelectedIds("map"),"createRoute")}},c),$.extend({name:"acknowledge",click:function(){var b=a.getSelectedIds();b.length&&(App.config.alertJustificationRequired?$.when(App.dialog.input({title:App.translate("Acknowledge Alarm"),message:App.translate("Acknowledge reason"),labelOK:App.translate("Acknowledge Alarm"),required:!0})).done(function(c){"OK"===c.button&&f(a.grid,b,"acknowledge",c.input)}):f(a.grid,b,"acknowledge",""))}},c),$.extend({name:"reset",click:function(){var b=a.getSelectedIds();b.length&&(App.config.alertJustificationRequired?$.when(App.dialog.input({title:App.translate("Reset Alarm"),message:App.translate("Reset reason"),labelOK:App.translate("Reset"),required:!0})).done(function(c){"OK"===c.button&&f(a.grid,b,"reset",c.input)}):f(a.grid,b,"reset",""))}},c)],e.push({template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled>{1}</button>',"acknowledge",App.translate("Acknowledge Alarms"))},{template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled>{1}</button>',"reset",App.translate("Reset Alarms"))},{template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled>{1}</button>',"showOnMap",App.translate("Show on map"))});break;case"maintenanceEvents":d=[$.extend({name:"completejob",text:App.translate("Complete {0}",App.translate("Job")),click:function(){if(a.currentSubGrid){var b=a.currentSubGrid.wrapper.data("subgrid"),c=b.getSelectedIds();c.length&&($.ajax({url:App.config.serviceUrl+"caesarMaintenance/completeJob",data:{domainObjectId:b.config.domainObjectId,jobId:JSON.stringify(c)},success:function(c){c.reload?a.dataSource.read():b.grid.dataSource.read()},error:function(){b.grid.dataSource.read()}}),a.updateActionButtons())}}},c),$.extend({name:"canceljob",text:App.translate("Cancel {0}",App.translate("Job")),click:function(){if(a.currentSubGrid){var b=a.currentSubGrid.wrapper.data("subgrid"),c=b.getSelectedIds();c.length&&($.ajax({url:App.config.serviceUrl+"caesarMaintenance/cancelJob",data:{domainObjectId:b.config.domainObjectId,jobId:JSON.stringify(c)},success:function(){b.grid.dataSource.read()},error:function(){b.grid.dataSource.read()}}),a.updateActionButtons())}}},c)],e.push({template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled>{1}</button>',"completejob",App.translate("Complete {0}",App.translate("Job")))},{template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled>{1}</button>',"canceljob",App.translate("Cancel {0}",App.translate("Job")))});break;case"eventHistory":d.push($.extend({},c,{name:"showOnMap",click:function(){var b=a.getSelectedIds("map");a.mapWidget&&(a.mapWidget.destroy(),a.mapWidget=null),a.mapWidget=new App.ui.WidgetPanel({widgetType:"map",id:"eventHistoryMap",name:App.translate("Event History Map"),pictureName:App.util.widget.defaultIcon.eventHistoryMap,isTemporary:!0,location:App.config.locationEventHistoryMap,positionNumber:"-1",height:App.config.widgetHeight,displayMini:!0,widgetData:{viewType:null},objectType:a.config.objectType,domainObjectId:a.config.domainObjectId,ids:b}),App.view.widgets.push(a.mapWidget),a.mapWidget.show()}})),e.push({template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled>{1}</button>',"showOnMap",App.translate("Show on map"))})}a.toolbarCfg=a.toolbarCfg.concat(d),a.toolbar=a.toolbar.concat(e)},addDefaultButtons:function(){var a=this,b=[],c=[],d={className:"pull-right",type:"button"};b.push($.extend({},d,{name:"saveGrid",click:function(){a.updateWidgetData()}})),c.push({template:kendo.format('<button class="k-button pull-right k-grid-{0}" disabled><span class="glyphicon glyphicon-floppy-disk" data-toggle="tooltip" data-original-title="Save Grid"></span></button>',"saveGrid",App.translate("Save"))}),a.toolbarCfg=a.toolbarCfg.concat(b),a.toolbar=a.toolbar.concat(c)},selectAllRows:function(a){"use strict";var b=a.data.widget,c=b.grid;c.table.find(".checkRow").prop("checked",this.checked),this.checked?c.tbody.children("tr").addClass("k-state-selected"):c.tbody.children("tr").removeClass("k-state-selected"),b.updateActionButtons()},selectRowByCheckbox:function(a){"use strict";var b=a.data.widget,c=this.checked,d=$(this).closest("tr");c?d.addClass("k-state-selected"):d.removeClass("k-state-selected"),b.updateActionButtons()},detailInit:function(a){"use strict";var b=this,c=$("<div>",{"class":"k-content"}).appendTo(a.detailCell);$.each(b.widgetData.detail.data,function(a,b){b.selected=!0}),b.currentSubGrid=new App.widget.Grid({widgetData:{data:b.widgetData.detail.data},parentWidget:b,domainDataView:b.widgetData.detail.domainDataView,objectType:b.widgetData.detail.domainObjectType,domainObjectId:a.data.jobcardId,sortAttribute:"",filters:"",el:c}),c.data("subgrid",b.currentSubGrid)},getSelectedIds:function(a){"use strict";var b,c,d=this,e=[],f=d.grid,g=d.config.domainDataView?d.config.domainDataView:d.widgetData.viewType;return f.tbody.children("tr.k-state-selected").each(function(){switch(b=d.grid.dataItem($(this)),c=null,g){case"activeAlarms":case"allActiveAlarms":var f=b["alarmId"+d.metaSuffix].currentValues[0];switch(a){case"map":b.hasMapPosition&&(c=f);break;case"acknowledge":b.isAcknowledged||(c=f);break;default:c=f}break;case"maintenanceJobs":c=b["jobCode"+d.metaSuffix].currentValues[0];break;case"eventHistory":switch(a){case"map":b.hasMapPosition&&(c=b.eventId);break;default:c=b.eventId}}c&&e.push(c)}),e},getCellData:function(a,b){var c=null;switch(a.currentValues&&null!==a.currentValues[0]&&(c=a.currentValues[0]),a.type){case"date":c=kendo.parseDate(c,App.config.dateFormat),c instanceof Date&&App.util.dateFromGMT(c);break;case"dateTime":c=kendo.parseDate(c,App.config.dateTimeFormat),c instanceof Date&&App.util.dateFromGMT(c);break;case"domainObjectReferenceType":c=a.displayValue;break;case"stateType":a&&a.id&&!$.isEmptyObject(b)&&b[a.id]&&(c=App.translate(b[a.id][c]));break;case"decimal":case"percentage":null!==c&&(c=parseFloat(c));break;case"duration":case"numeric":null!==c&&(c=parseInt(c));break;default:case"boolean":case"email":case"phoneNumber":case"vfsAttachment":case"vfsImage":a.currentValues.length>1&&(c=a.currentValues.join(", "))}return c},toggleColumns:function(){"use strict";var a=this;$.each(a.grid.columns,function(b,c){if(c.mini_widget||a.config.location!==App.config.locationSideBar){if(!c.selected)return;a.grid.showColumn(c.field)}else{var d=c.selected;a.grid.hideColumn(c.field),c.selected=d}})},saveWidget:function(a){"use strict";var b=this;$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/updateWidget2",data:a,success:function(){App.dialog.alert({message:App.translate("Grid has been sucessfully saved"),icon:App.dialog.iconInfo,title:"Grid Saved"}),App.router.refreshWidgetsCache(App.current.objectType),b.grid.wrapper.find(".k-grid-saveGrid").prop("disabled",!0)},error:function(){App.dialog.alert({message:App.translate("Error"),icon:App.dialog.idAlert,title:"Error in saving widget."})}})},updateWidgetData:function(){"use strict";var a=this,b=a.grid.columns,c=this.widgetData,d=0,e=a.grid.dataSource?a.grid.dataSource.sort():null;if(e)for(f=0;f<e.length;f++)e[f].field&&(c.sortAttribute=e[f].field,c.sortDir="asc"==e[f].dir?0:1);for(var f=0;f<b.length;f++)for(var g=0;g<c.data.length;g++)if(c.data[g].domainObjectValueId==b[f].field){"boolean"==$.type(b[f].selected)&&(c.data[g].selected=b[f].selected),this.widgetData.data[g].positionNumber=d,d++,c.data[g].domainObjectValueId==c.sortAttribute&&(c.data[g].sortDir=c.sortDir);break}var h,i,j;switch(a.config.domainDataView){case"activeAlarms":h={domainObjectType:"customer"},$.ajax({url:App.config.serviceUrl+"caesarWidgetProvider/getWidgets2",data:h,success:function(b){$.each(b.data,function(a,b){j=JSON.parse(b.widgetData),i=j.viewType,j.data=c.data,"activeAlarms"==i&&(h={id:b.id,user:App.config.user.id,name:b.name,description:b.description,widgetType:b.widgetType,widgetData:JSON.stringify(j),location:b.location,positionNumber:b.positionNumber,parent:b.parent,pictureName:b.pictureName,domainObjectType:b.objectType})}),a.saveWidget(h)}});break;default:h={id:this.config.id,user:App.config.user.id,name:this.config.name,description:this.config.description,widgetType:this.config.widgetType,widgetData:JSON.stringify(c),location:this.config.location,positionNumber:this.config.positionNumber,parent:this.config.parent,pictureName:this.config.pictureName,domainObjectType:this.config.objectType},a.widgetData=c,a.saveWidget(h)}},exportData:function(){this.grid.saveAsExcel()},load:function(){},refresh:function(){"use strict";var a=this;return a.canRefresh()?(a.toggleColumns(),a.grid.dataSource.read(),a.grid.dataSource.pageSize()!==App.config.user.dataGridPageSize&&a.grid.dataSource.pageSize(App.config.user.dataGridPageSize),a.jqXHR):{}},destroy:function(){"use strict";if(this.el=null,this.jqXHR&&4!==this.jqXHR.readyState&&0!==this.jqXHR.readyState&&(this.jqXHR.abort(),this.jqXHR=null),this.dataSource=null,this.grid)try{this.grid.destroy()}catch(a){}this.grid=null,this.columns=null,this.fields=null,this.dsSchema=null,this.widgetData=null,this.config=null},canRefresh:function(){"use strict";var a=this.grid&&0===this.getSelectedIds().length;return a&&(a=0===$(".k-column-menu .k-filterable:visible").length),a}}),App.widget.List=App.widget.Base.extend({widgetData:null,sectionData:{},values:[],toolbar:null,init:function(a){"use strict";var b=this;b.config=$.extend({take:5,skip:0,page:1,pageSize:5,sortValue:"lastReportTime",sortOrder:1},a),b.setWidgetData();var c=b.config.panel.elContent;c.css({maxHeight:App.config.widgetHeight}),c.scroll(function(){c.height()+c.scrollTop()>=b.config.el.height()-400&&b.config.originalSize-b.config.skip>5&&(b.config.skip+=5,b.config.page+=1,b.load())}),b.config.el.addClass("widget-list container-fluid")},load:function(){"use strict";var a=this;return a.isRefreshing=!0,a.jqXHR=$.ajax({url:App.config.serviceUrl+"caesarObject/objectDataProvider3",data:{domainObjectId:a.config.domainObjectId,domainObjectValues:JSON.stringify(a.values),domainObjectType:a.config.objectType,domainDataView:a.widgetData.viewType||"allAssetsDashboard",take:a.config.take,skip:a.config.skip,page:a.config.page,pageSize:a.config.pageSize,sortValue:a.config.sortValue,sortOrder:a.config.sortOrder},success:function(b){a.config.elStatus.toggleClass("hidden",!!b.success),b.success?(a.config.el.find('[data-toggle="tooltip"]').tooltip("destroy"),a.config.originalSize=b.originalSize,a.buildHTML(b),a.lastRefresh=Date.now()):(a.config.el.hide(),a.config.elStatus.html(App.translate("No data to display"))),a.isRefreshing=!1}}),a.jqXHR},buildHTML:function(a){"use strict";var b,c,d,e,f=this,g="";if(a&&a.ui&&a.ui.items)for(var h=0;h<a.ui.items.length;h++){b=a.ui.items[h].items;var i=f.buildGrid(b);for(c=0;c<b.length;c++){var j=b[c];switch(j.id){case"performance":for(g="",g+="<h5><small>"+j.name+"</small></h5>",g+='<ul class="list-inline">',d=0;d<j.items.length;d++){e=j.items[d];var k=e.currentValues[0];if(null!==k){g+="<li>";var l="fg-notavailable",m=null;if("undefined"!=typeof e.ranges)for(var n=0;n<e.ranges.length;n++){var o=e.ranges[n];if(("undefined"==typeof o.from||k>=o.from)&&("undefined"==typeof o.to||k<=o.to)){l="fg-"+o.id.split(".")[1],m=o.name;break}}var p="",q="",r="";if(e.unitType){switch(r="ico-c-"+e.unitType,e.unitType){case"temperature":p=m||App.config.blankSign;break;case"volume":if($.isNumeric(e.minValue)&&$.isNumeric(e.maxValue)){var s=k/(e.maxValue-e.minValue);p=kendo.toString(s,"p0")}else p=App.config.blankSign;break;case"accumulator":p=k}q=App.util.format.item(e),g+='<span class="widget-list-icon pull-left icon '+l+" "+r+'" style="font-size:5em" data-toggle="tooltip" title="'+e.name+'"/> ',g+='<strong class="widget-list-kpi" style="font-size:18px">'+p+"</strong>",g+="<br/><small>"+q+"</small>"}else{switch(r="icon-unknown",e.metric){case"fluidType":r=("ico-c-"+k).toLowerCase()}g+='<span class="widget-list-icon pull-left icon '+r+'" data-toggle="tooltip" style="font-size:5.6em" title="'+e.name+'"/>',g+='<strong class="widget-list-kpi" data-toggle="tooltip" style="font-size:18px" title="'+e.name+'">'+App.util.format.item(e)+"</strong>"}g+="</li>"}}g+="</ul>",i[j.id].append(g);break;case"graph":new App.component.CapacityChart.create({el:i[j.id],data:j.items,height:300});break;case"main":case"activity":case"status":case"gridAllAssets":g="";var t="status"===j.id,u=t?"list-inline":"list-unstyled";t&&(g+="<h5><small>"+j.name+"</small></h5>"),g+='<ul class="'+u+'" style="margin-bottom: 10px;">';for(var v=0;v<j.items.length;v++){var w=j.items[v];g+="name"===w.id?"<h5>"+App.util.format.item(w)+"</h5>":t?'<li class="col-lg-6" style="padding: 0;">'+App.util.format.item(w)+"</li>":"<li>"+App.translate(w.name)+":<br/><strong>"+App.util.format.item(w)+"</strong></li>"}g+="</ul>",i[j.id].prepend(g);break;case"image":g="",g+='<div class=" widget-list-image-column"><img src="images/temp/oiltank01.jpg" class="img-responsive" alt=""></div>',i[j.id].prepend(g)}}}},findItemById:function(a,b){"use strict";var c=null;if($.isArray(a))for(var d=0;d<a.length;d++)if(a[d].id===b){c=a[d];break}return c},buildToolbar:function(){"use strict";var a=$("<div>");this.toolbar=a.kendoToolBar({items:[{type:"button",text:"MyButton"}]}).data("kendoToolBar"),this.config.el.parent().prepend(a)},buildGrid:function(a){var b=this,c={image:3,main:3,status:1,performance:3,graph:5,activity:12,gridAllAssets:12,total:12,height:"auto"},d=[];switch(a.length){case 1:c.total=6;break;case 2:case 3:c.main=6,c.performance=4,c.status=2,c.total=6,c.height="200px";break;case 4:c.main=6,c.performance=6,c.status=3,c.total=6,c.height="auto";break;case 5:var e=this.findItemById(a,"graph"),f=this.findItemById(a,"image");f?(c.image=3,c.main=4,c.status=1,c.performance=4):e&&2===e.items.length&&(c.performance=8,c.main=6,c.status=2,c.graph=6,c.total=6)}var g=$("<div />",{"class":"grid__brick col-lg-"+c.total,style:"border: 1px solid #bdbdbd; background-color: white; padding: 10px; height: "+c.height}).appendTo(b.config.el);return $.each(a,function(a,b){var e="activity"===b.id?d.main:g,f="activity"===b.id||"status"===b.id?"padding:0;":"";d[b.id]=$("<div />",{"class":" col-lg-"+c[b.id],style:f}).appendTo(e)}),d},refresh:function(){"use strict"},destroy:function(){this.jqXHR&&4!==this.jqXHR.readyState&&0!==this.jqXHR.readyState&&(this.jqXHR.abort(),this.jqXHR=null),this.toolbar&&this.toolbar.destroy(),this.config.el&&this.config.el.remove()}}),App.widget.SimpleGrid=kendo.Class.extend({config:{},el:null,elTbody:null,jqXHR:null,init:function(a){"use strict";var b=this;b.config=$.extend({renderTo:null,rowsOnly:!0,objectType:null,objectId:null,domainDataView:null,objectValues:[],columns:[],dataGridPageSize:App.config.user.dataGridPageSize?App.config.user.dataGridPageSize:100,url:App.config.serviceUrl+"caesarObject/objectDataProvider3"},a),b.config.rowsOnly?b.el=b.config.renderTo:b.el=$("<table>",{"class":"table"}).appendTo(b.config.renderTo);for(var c=$("<tr>").appendTo($("<thead>").appendTo(b.el)),d=0;d<b.config.columns.length;d++){var e=b.config.columns[d];$("<th>").text(e.title).appendTo(c)}b.elTbody=$("<tbody>").appendTo(b.el),b.elTbody.on("click","tr",b.onRowClick),b.renderTableData()},renderTableData:function(){var a=this,b={domainObjectType:a.config.objectType,domainObjectId:a.config.objectId,domainDataView:a.config.domainDataView,domainObjectValues:a.config.objectValues,filters:"[]",page:1,pageSize:a.config.dataGridPageSize,skip:0,take:a.config.dataGridPageSize};a.isRefreshing=!0,a.jqXHR=$.ajax({url:a.config.url,data:b,success:function(b){"use strict";var c=b.domainObjectData;$.each(c,function(b,c){var d=$("<tr>").appendTo(a.elTbody);$.each(a.config.columns,function(a,b){$.each(c,function(a,c){if("jobCode"===c.domainObjectValueId&&d.attr("data-id",c.displayValue),b.domainObjectValueId===c.domainObjectValueId){var e,f=$("<td>",{}).appendTo(d);if("jobStatus"===b.domainObjectValueId)switch(f.attr("align","center"),c.displayValue){case"Open":break;case"Completed":e=$("<span>",{"class":"glyphicon glyphicon-ok text-success"}).appendTo(f);break;case"Cancelled":e=$("<span>",{"class":"glyphicon glyphicon-remove text-danger"}).appendTo(f)}else f.text(c.displayValue)}})})}),a.lastRefresh=Date.now(),a.isRefreshing=!1}})},onRowClick:function(a){"use strict";$(a.currentTarget).toggleClass("success")},getSelectedIds:function(){"use strict";var a=this.elTbody.find("tr.success"),b=[];return $.each(a,function(a,c){b.push($(c).attr("data-id"))}),b},destroy:function(){this.jqXHR&&4!==this.jqXHR.readyState&&0!==this.jqXHR.readyState&&(this.jqXHR.abort(),this.jqXHR=null),this.el&&this.el.remove()}});var require=function(a){function b(c){if(d[c])return d[c].exports;var e=d[c]={exports:{},id:c,loaded:!1};return a[c].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c=window.webpackJsonprequire;window.webpackJsonprequire=function(d,f){for(var g,h,i=0,j=[];i<d.length;i++)h=d[i],e[h]&&j.push.apply(j,e[h]),e[h]=0;for(g in f)a[g]=f[g];for(c&&c(d,f);j.length;)j.shift().call(null,b)};var d={},e={0:0};return b.e=function(a,c){if(0===e[a])return c.call(null,b);if(void 0!==e[a])e[a].push(c);else{e[a]=[c];var d=document.getElementsByTagName("head")[0],f=document.createElement("script");f.type="text/javascript",f.charset="utf-8",f.async=!0,f.src=b.p+""+({1:"heremaps",2:"googlemaps"}[a]||a)+".chunk.js",d.appendChild(f)}},b.m=a,b.c=d,b.p="",b(0)}([function(a,b,c){"use strict";c(111);var d=document.getElementsByTagName("script"),e=_.last(_.toArray(d)).getAttribute("src");c.p=e.substr(0,e.lastIndexOf("/")+1),a.exports=function(a){return function(b){var d={"maps-initializer":function(){return c(89)["default"]},"maps-debugger":function(){return c(36)["default"]},"heremaps-static":function(){return c(106)["default"]},"googlemaps-static":function(){return c(101)["default"]},"es6-playground":function(){return c(88)["default"]}},e=d[b];return _.isFunction(e)?e():a(b)}}(_.isFunction(require)?require:function(a){throw new Error("Module "+a+" not found")})},function(a,b,c){"use strict";var d=c(6),e=c(20),f=c(18),g=c(13),h=c(16),i="prototype",j=function k(a,b,c){var j,l,m,n,o=a&k.F,p=a&k.G,q=a&k.S,r=a&k.P,s=a&k.B,t=p?d:q?d[b]||(d[b]={}):(d[b]||{})[i],u=p?e:e[b]||(e[b]={}),v=u[i]||(u[i]={});p&&(c=b);for(j in c)l=!o&&t&&j in t,m=(l?t:c)[j],n=s&&l?h(m,d):r&&"function"==typeof m?h(Function.call,m):m,t&&!l&&g(t,j,m),u[j]!=m&&f(u,j,n),r&&v[j]!=m&&(v[j]=m)};d.core=e,j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,a.exports=j},function(a,b){"use strict";var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};a.exports=function(a){return"object"===("undefined"==typeof a?"undefined":c(a))?null!==a:"function"==typeof a}},function(a,b,c){"use strict";var d=c(3);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b,c){"use strict";var d=c(81)("wks"),e=c(26),f=c(6).Symbol;a.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))}},function(a,b){"use strict";var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){"use strict";a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b){a.exports=App},function(a,b){"use strict";var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b,c){"use strict";var d=c(33),e=Math.min;a.exports=function(a){return a>0?e(d(a),9007199254740991):0}},function(a,b,c){"use strict";a.exports=!c(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b,c){"use strict";var d=c(1),e=c(20),f=c(7);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){"use strict";var d=c(6),e=c(18),f=c(26)("src"),g="toString",h=Function[g],i=(""+h).split(g);c(20).inspectSource=function(a){return h.call(a)},(a.exports=function(a,b,c,g){"function"==typeof c&&(c.hasOwnProperty(f)||e(c,f,a[b]?""+a[b]:i.join(String(b))),c.hasOwnProperty("name")||e(c,"name",b)),a===d?a[b]=c:(g||delete a[b],e(a,b,c))})(Function.prototype,g,function(){return"function"==typeof this&&this[f]||h.call(this)})},function(a,b,c){"use strict";var d=c(43),e=c(17);a.exports=function(a){return d(e(a))}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=c(249),f=c(250),g=c(251),h=c(252),i="images/maps/icons/",j=_.map(["directions","cluster","locations","geofences"],function(a){return""+i+a+"/"}),k=d(j,4),l=k[0],m=k[1],n=k[2],o=k[3],p={"ROAM - arrow-beige":"arrow-beige","ROAM - arrow-black":"arrow-black","ROAM - arrow-blue":"arrow-blue","ROAM - arrow-brown":"arrow-brown","ROAM - arrow-dark-blue":"arrow-dark-blue","ROAM - arrow-dark-green":"arrow-dark-green","ROAM - arrow-gray":"arrow-gray","ROAM - arrow-green":"arrow-green","ROAM - arrow-light-blue":"arrow-light-blue","ROAM - arrow-light-green":"arrow-light-green","ROAM - arrow-light-purple":"arrow-light-purple","ROAM - arrow-magenta":"arrow-magenta","ROAM - arrow-maroon":"arrow-maroon","ROAM - arrow-orange":"arrow-orange","ROAM - arrow-pink":"arrow-pink",
"ROAM - arrow-purple":"arrow-purple","ROAM - arrow-red":"arrow-red","ROAM - arrow-silver":"arrow-silver","ROAM - arrow-white":"arrow-white","ROAM - arrow-yellow":"arrow-yellow","ROAM - circle-blue":"arrow-blue","ROAM - circle-green":"arrow-green","ROAM - circle-orange":"arrow-orange","ROAM - circle-red":"arrow-red","ROAM - dot-blue":"dot-blue","ROAM - dot-green":"dot-green","ROAM - dot-orange":"dot-orange","ROAM - dot-red":"dot-red","ROAM - rect-arrow-blue":"arrow-blue","ROAM - rect-arrow-green":"arrow-green","ROAM - rect-blue-circle-green-arrow":"arrow-blue","ROAM - rect-blue-circle-orange-arrow":"arrow-orange","Generator - arrow-blue":"generator-arrow-blue","Generator - arrow-green":"generator-arrow-green","Generator - arrow-dark-blue":"generator-arrow-dark-blue","Generator - arrow-maroon":"generator-arrow-maroon","Pump - arrow-brown":"pump-arrow-brown","Pump - arrow-light-blue":"pump-arrow-light-blue","Pump - arrow-light-purple":"pump-arrow-light-purple","Pump - arrow-magenta":"pump-arrow-magenta","arrow-red":"arrow-red"},q={"ROAM - arrow-beige":["#a49480","#000000"],"ROAM - arrow-black":["#000000","#ffffff"],"ROAM - arrow-blue":["#0000ff","#ffffff"],"ROAM - arrow-brown":["#a52a2a","#ffffff"],"ROAM - arrow-dark-blue":["#00008b","#ffffff"],"ROAM - arrow-dark-green":["#006400","#ffffff"],"ROAM - arrow-gray":["#808080","#ffffff"],"ROAM - arrow-green":["#008000","#ffffff"],"ROAM - arrow-light-blue":["#add8e6","#000000"],"ROAM - arrow-light-green":["#90ee90","#000000"],"ROAM - arrow-light-purple":["#d8bfd8","#000000"],"ROAM - arrow-magenta":["#ff00ff","#ffffff"],"ROAM - arrow-maroon":["#800000","#ffffff"],"ROAM - arrow-orange":["#ffa500","#ffffff"],"ROAM - arrow-pink":["#ffc0cb","#000000"],"ROAM - arrow-purple":["#800080","#ffffff"],"ROAM - arrow-red":["#ff0000","#ffffff"],"ROAM - arrow-silver":["#c0c0c0","#000000"],"ROAM - arrow-white":["#ffffff","#000000"],"ROAM - arrow-yellow":["#ffff00","#000000"],"ROAM - circle-blue":["#0000ff","#ffffff"],"ROAM - circle-green":["#008000","#ffffff"],"ROAM - circle-orange":["#ffa500","#ffffff"],"ROAM - circle-red":["#ff0000","#ffffff"],"ROAM - dot-blue":["#0000ff","#ffffff"],"ROAM - dot-green":["#008000","#ffffff"],"ROAM - dot-orange":["#ffa500","#ffffff"],"ROAM - dot-red":["#ff0000","#ffffff"],"ROAM - rect-arrow-blue":["#0000ff","#ffffff"],"ROAM - rect-arrow-green":["#008000","#ffffff"],"ROAM - rect-blue-circle-green-arrow":["#0000ff","#ffffff"],"ROAM - rect-blue-circle-orange-arrow":["#ffa500","#ffffff"],"Generator - arrow-blue":["#0000ff","#ffffff"],"Generator - arrow-green":["#008000","#ffffff"],"Generator - arrow-dark-blue":["#00008b","#ffffff"],"Generator - arrow-maroon":["#800000","#ffffff"],"Pump - arrow-brown":["#a52a2a","#ffffff"],"Pump - arrow-light-blue":["#add8e6","#000000"],"Pump - arrow-light-purple":["#d8bfd8","#ffffff"],"Pump - arrow-magenta":["#ff00ff","#ffffff"],"arrow-red":["#ff0000","#ffffff"]},r={geofence:{fillOpacity:.5,strokeWeight:2},geofenceExclusive:{fillColor:"#ff0000",strokeColor:"#dd2222"},geofenceInclusive:{fillColor:"#00dd00",strokeColor:"#22dd22"},geofenceWaypoint:{fillColor:"#0000ff",strokeColor:"#000000"},geofenceUnknown:{fillColor:"#f9ef0c",strokeColor:"#f9870c"},eventsConnector:{strokeWeight:4,arrows:{fillColor:"#ffffff",fillOpacity:.75}},animationPath:{fillColor:"#ff0000",strokeColor:"#0000ff",strokeWeight:3},editableObject:{fillColor:"#dddddd",fillOpacity:.4,strokeColor:"#666666",strokeWeight:2},routeLine:{strokeColor:"#0000dd",strokeOpacity:.63,strokeWeight:5,arrows:{frequency:4,length:1.6,width:1}}},s={getRoamIcon:function(a,b){var c=a.domainObjectType,d=w[c];if(!_.isFunction(d))throw new Error("Invalid ROAM object type: "+c+".");return d(a,b)},getIconsBaseDir:function(){return i},getDirectionIcon:function(a,b){var c=a.mapCurrentSymbol,d=a.mapHistorySymbol,e=a.isAlertEvent,f=a.isLatestEvent,g=a.highlighted,h=a.heading,i=c||d;e&&(i="ROAM - arrow-red"),f&&(i="ROAM - arrow-blue"),g&&(i="ROAM - arrow-orange");var j=h;return b||(j>=360&&(j%=360),j=15*Math.round(j/15)),b?s.getDirectionSvgIcon(i,j):s.getDirectionBitmapIcon(i,j)},getDirectionSvgIcon:function(a,b){var c=q[a],d=e;return a.match(/dot/i)?d=f:a.match(/generator/i)?d=g:a.match(/pump/i)&&(d=h),d.replace("${backgroundColor}",c[0]).replace("${color}",c[1]).replace("${rotation}",b)},getDirectionBitmapIcon:function(a,b){var c=p[a]+"/",d=b;return""+l+c+d+".png"},getObjectCategoryIcon:function(a){var b=a.locationType,c=a.fenceType,d="";return b?d=s.getLocationIcon(a):c&&(d=s.getGeofenceIcon(a)),d},getClusterIconsDir:function(){return m},getLocationIcon:function(a){var b=a.locationType,c=b.replace(/ /g,"").toLowerCase();return""+n+c+".png"},getGeofenceIcon:function(a){var b=a.fenceType,c=b.replace(/ /g,"").toLowerCase();return""+o+c+".png"},getShapeStyles:function(){return r},hexToRgba:function(a,b){var c=kendo.parseColor(a).toRGB(),d=c.r,e=c.g,f=c.b;return kendo.Color.fromRGB(d,e,f,b).toCssRgba()}},t=s.getDirectionIcon,u=s.getLocationIcon,v=s.getGeofenceIcon,w={assetmessageevent:t,location:u,geofence:v},x={getInstance:function(){return s}};b["default"]=x,b.Styler=x},function(a,b,c){"use strict";var d=c(24);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){"use strict";a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b,c){"use strict";var d=c(2),e=c(22);a.exports=c(11)?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b){"use strict";var c={}.toString;a.exports=function(a){return c.call(a).slice(8,-1)}},function(a,b){"use strict";var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){"use strict";var d=c(17);a.exports=function(a){return Object(d(a))}},function(a,b){"use strict";a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a,b){a.exports=function(a){"undefined"!=typeof execScript?execScript(a):eval.call(null,a)}},function(a,b){"use strict";a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b,c){"use strict";var d=c(5)("unscopables"),e=Array.prototype;void 0==e[d]&&c(18)(e,d,{}),a.exports=function(a){e[d][a]=!0}},function(a,b){"use strict";var c=0,d=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={bbox:{left:55,bottom:25,right:56,top:25.5},roamLayers:{ROAM_ASSETS:{name:"ROAM_ASSETS",type:"ROAM_LAYER",visible:!0,clusteringSupported:!0,serviceUrls:{create:"",read:"geoposition/current",update:"","delete":""}},ROAM_ASSETS_HISTORY:{name:"ROAM_ASSETS_HISTORY",type:"ROAM_LAYER",visible:!0,clusteringSupported:!0,serviceUrls:{create:"",read:"geoposition/assetHistory",update:"","delete":""}},ROAM_LOCATIONS:{name:"ROAM_LOCATIONS",type:"ROAM_LAYER",visible:!1,serviceUrls:{create:"caesarLocation/post",read:"caesarLocation/locations",update:"","delete":""}},ROAM_GEOFENCES:{name:"ROAM_GEOFENCES",type:"ROAM_LAYER",visible:!1,serviceUrls:{create:"caesarGeofence/post",read:"caesarGeofence/geofences",update:"","delete":""}},ROAM_ASSETS_ANIMATION:{name:"ROAM_ASSETS_ANIMATION",type:"ROAM_LAYER",visible:!1,serviceUrls:{create:"",read:"",update:"","delete":""}}},serviceUrls:{locationConfig:{read:"caesarLocation/config"},geoPositionObjects:{read:"geoPositionObjects/resources"},routing:{create:"routing/create"},legend:{read:"geoposition/legend"}}};b["default"]=c,b.project=c},function(a,b){"use strict";function c(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(b,"__esModule",{value:!0});var d=stampit().init(function(a){function b(a,b){var c=a+"-"+b.domainObjectTypeId;return j.getMapObjectFactory().create({layerName:a,roamObject:b,viewer:j,id:c})}var d,e=a.instance,f=a.stamp,g=f.ROAM_LAYERS,h=g.ROAM_LOCATIONS,i=g.ROAM_GEOFENCES,j=void 0,k={},l={},m={},n="",o=void 0,p={assetmessageevent:function(){return n},location:function(){return h},geofence:function(){return i}},q=(d={},c(d,h,"location"),c(d,i,"geofence"),d),r=void 0;_.assign(e,{setViewer:_.once(function(a){return j=a}),getLayers:function(){return _.map(k)},getLayer:function(a){return k[a]},addLayer:function(a){var b=a.name,c=e.getLayer(b);if(!c){var d=j.getLayerFactory();a.clusteringSupported&&(d=j.getClusteringLayerFactory()),c=d.create({layerProperties:a,viewer:j,name:b}),k[b]=c,j.addOverlay(c)}},getLayerVisibility:function(a){var b=e.getLayer(a);return Boolean(b&&b.isVisible())},setLayerVisibility:function(a,b){var c=e.getLayer(a);c&&c.setVisible(b)},getPositionLayerName:function(){return n},setPositionLayerName:function(a){n=a},testIsPositionLayerName:function(a){return j.getLayerDataFetcher().testIsPositionLayerName(a)},getLayerName:function(a){var b=p[a];if(!_.isFunction(b))throw new Error("Invalid ROAM object type: "+a+".");return b()},getObject:function(a,b){return l[a+"-"+b]},getObjects:function(a,b){return _(b).map(function(b){return e.getObject(a,b)}).compact().value()},getObjectsByLayer:function(a){return k[a].getObjects()},getCachedRoamObject:function(a){return m[a]},getCachedRoamObjects:function(a){return _.map(a,function(a){return m[a]})},getCachedRoamObjectsByLayer:function(a){var b=q[a]||"assetmessageevent";return _(m).filter(["domainObjectType",b]).compact().value()},addCachedRoamObject:function(a){m[a.domainObjectTypeId]=a},markLatestPositionRoamObject:function(a,b){_.forEach(a,function(a){return a.id.toString()===b.toString()?(a.isLatestEvent=!0,!1):void 0})},loadObjects:function(a,c){var d=e.getLayerName(a),f=e.getLayer(d);if(f){var g=j.lazyLoadingEnabled&&!e.testIsPositionLayerName(d);if(e.clearObjects(d),g)_.forEach(c,function(a){return e.addCachedRoamObject(a)});else{var h=_(c).map(function(a){return b(d,a)}).compact().forEach(function(a){return l[a.id]=a});f.add(h)}j.getControls().onObjectsLoaded(d,c)}},addObject:function(a,b){e.addObjects(a,[b])},addObjects:function(a,c){var d=e.getLayer(a);if(d){var f=_(c).map(function(c){var d=void 0;return e.getObject(a,c.domainObjectTypeId)||(d=b(a,c)),d}).compact().forEach(function(a){return l[a.id]=a});d.add(f),1===f.length&&j.getControls().onObjectAdded(a,f[0].roamObject)}},removeObject:function(a,b){e.removeObject(a,[b])},removeObjects:function(a,b){var c=e.getLayer(a);if(c){var d=_(b).map(function(b){return e.getObject(a,b.domainObjectTypeId)}).compact().forEach(function(a){delete l[a.id],a.destroyLabel()});c.remove(d),1===d.length&&j.getControls().onObjectRemoved(a,d[0].roamObject)}},clearObjects:function(a){var b=e.getLayer(a);b&&(_(e.getObjectsByLayer(a)).compact().forEach(function(a){delete l[a.id],a.destroyLabel()}),b.clear(),j.getControls().onObjectsLoaded(a,[]))},copyObjects:function(a,b){var c=_.map(e.getObjectsByLayer(b),"roamObject");e.clearObjects(a),e.addObjects(a,c)},getObjectVisibility:function(a,b,c){var d=e.getObject(a,b);return Boolean(d&&d.isVisible(c))},setObjectVisibility:function(a,b,c){e.setObjectsVisibility(a,[b],c)},setObjectsVisibility:function(a,b,c){var d=e.getLayer(a);if(d){var f=_(b).map(function(b){return e.getObject(a,b)}).compact().value();_.forEach(f,function(a){return a.setVisible(c)}),d.isClusteringSupported()&&(d.initTimeGuard?d.performClustering():d.initTimeGuard=!0),e.setObjectLabelsVisibility(a,e.getObjectLabelsVisibility(a)),j.getControls().onObjectsVisibilityChanged(a,b,c)}},setAllObjectsVisibility:function(a,b){var c=e.getLayer(a);if(c){var d=_.map(e.getObjectsByLayer(a),"roamObject.domainObjectTypeId");e.setObjectsVisibility(a,d,b)}},setObjectHighlighted:function(a,b,c){if(e.testIsPositionLayerName(a)){var d=e.getObject(a,b);if(d){var f=d.roamObject;c?f.highlighted||(f.highlighted=!0,d.updateIcon()):(delete f.highlighted,d.revertIcon())}o&&o!==d&&(delete o.roamObject.highlighted,o.revertIcon()),o=d,j.getControls().onPositionHighlightChanged(b,c)}},setPositionHighlighted:function(a,b){e.setObjectHighlighted(e.getPositionLayerName(),a,b)},getObjectLabelsVisibility:function(a){var b=e.getLayer(a);return Boolean(b&&b.isLabelsVisible())},setObjectLabelsVisibility:function(a,b){var c=e.getLayer(a);c&&!function(){var d=c.getData("labelsVisibilityListenerAdded"),e=function(){j.isAutoLabelingActivated()&&c.isLabelsVisible()&&c.resolveClustering().done(function(){return j.getMapObjectLabelFactory().runAutomaticLabelPlacement(c.getLabels())})};d||(j.addEventListener("mapviewchange",_.throttle(function(){return c.updateLabelsPosition()},20)),j.addEventListener("mapviewchangeend",function(){return _.defer(function(){c.setLabelsVisible(c.isLabelsVisible()),e()})}),c.setData("labelsVisibilityListenerAdded",!0)),c.setLabelsVisible(b),e(),j.getControls().onObjectLabelsVisibilityChanged(a,b)}()},setClusteringEnabled:function(a,b){var c=e.getLayer(a);c&&c.isClusteringSupported()&&c.setClusteringEnabled(b)},setEventsConnectorVisibility:function(a){var b=!0;if(!r){var c=_.map(e.getObjectsByLayer(e.getPositionLayerName()),"roamObject");b=e.drawEventsConnector(c)}b&&r.setVisible(a)},drawEventsConnector:function(a){var b=a.length>=2;if(b){var c=j.getMapObjectFactory(),d=c.toCoordinates(_.map(a,function(a){var b=a.latitude,c=a.longitude;return{lat:b,lng:c}}));r?r.setCoordinates(d):r=c.create({viewer:j,objectModel:{coordinates:d,shapeType:"line",options:{styleName:"eventsConnector"}}}),j.addObject(r)}else r&&(j.removeObject(r),r=void 0);return b}})})["static"]({ROAM_LAYERS:{ROAM_ASSETS:"ROAM_ASSETS",ROAM_ASSETS_HISTORY:"ROAM_ASSETS_HISTORY",ROAM_ASSETS_ANIMATION:"ROAM_ASSETS_ANIMATION",ROAM_LOCATIONS:"ROAM_LOCATIONS",ROAM_GEOFENCES:"ROAM_GEOFENCES",ROAM_GEOREFERENCES:"ROAM_GEOREFERENCES"}});b["default"]=d,b.LayerManager=d},function(a,b,c){"use strict";var d=c(16),e=c(74),f=c(71),g=c(4),h=c(10),i=c(85);a.exports=function(a,b,c,j){var k,l,m,n=i(a),o=d(c,j,b?2:1),p=0;if("function"!=typeof n)throw TypeError(a+" is not iterable!");if(f(n))for(k=h(a.length);k>p;p++)b?o(g(l=a[p])[0],l[1]):o(a[p]);else for(m=n.call(a);!(l=m.next()).done;)e(m,o,l.value,b)}},function(a,b){"use strict";a.exports={}},function(a,b,c){"use strict";var d=c(2).setDesc,e=c(9),f=c(5)("toStringTag");a.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(a,b,c){"use strict";var d=c(33),e=Math.max,f=Math.min;a.exports=function(a,b){return a=d(a),0>a?e(a+b,0):f(a,b)}},function(a,b){"use strict";var c=Math.ceil,d=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},,,function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),window.MAPS_DEBUG_ENABLED=!1;var c={time:function(a){window.MAPS_DEBUG_ENABLED&&void 0},timeEnd:function(a){window.MAPS_DEBUG_ENABLED&&void 0}};window.easterEgg=function(){},b["default"]=c,b.mapsDebugger=c},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=stampit().props({viewer:void 0,name:"",layerProperties:void 0}).methods({getNativeObject:function(){throw new Error(".getNativeObject() method not implemented.")},getData:function(a){throw new Error(".getData() method not implemented.")},setData:function(a,b){throw new Error(".setData() method not implemented.")},isVisible:function(){throw new Error(".isVisible() method not implemented.")},setVisible:function(a){throw new Error(".setVisible() method not implemented.")},getObjects:function(){throw new Error(".getObjects() method not implemented.")},add:function(a){throw new Error(".add() method not implemented.")},remove:function(a){throw new Error(".remove() method not implemented.")},clear:function(){throw new Error(".clear() method not implemented.")},getBounds:function(){throw new Error(".getBounds() method not implemented.")},getLabels:function(){return _(this.getObjects()).map(function(a){var b=void 0;return a.isVisible(!0)&&(b=a.getLabel()),b}).compact().value()},isLabelsVisible:function(){return this.getData("labelsVisible")},setLabelsVisible:function(a){this.setData("labelsVisible",a),_.forEach(this.getLabels(),function(b){return b.setVisible(a)})},updateLabelsPosition:function(){_.forEach(this.getLabels(),function(a){return a.updatePosition()})},isClusteringSupported:function(){return!1},isClusteringEnabled:function(){return Boolean(this.getData("clusteringEnabled"))},setClusteringEnabled:function(a){if(this.isClusteringSupported()){var b=this.isClusteringEnabled()!==a;b&&(this.setData("clusteringEnabled",a),this.performClustering(),this.viewer.refresh())}},resolveClustering:function(){return $.Deferred().resolve().promise()}});b["default"]=c,b.Layer=c},function(a,b,c){"use strict";var d=c(16),e=c(43),f=c(21),g=c(10),h=c(114);a.exports=function(a){var b=1==a,c=2==a,i=3==a,j=4==a,k=6==a,l=5==a||k;return function(m,n,o){for(var p,q,r=f(m),s=e(r),t=d(n,o,3),u=g(s.length),v=0,w=b?h(m,u):c?h(m,0):void 0;u>v;v++)if((l||v in s)&&(p=s[v],q=t(p,v,r),a))if(b)w[v]=q;else if(q)switch(a){case 3:return!0;case 5:return p;case 6:return v;case 2:w.push(p)}else if(j)return!1;return k?-1:i||j?j:w}}},function(a,b,c){"use strict";var d=c(19),e=c(5)("toStringTag"),f="Arguments"==d(function(){return arguments}());a.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}},function(a,b,c){"use strict";var d=c(6),e=c(1),f=c(13),g=c(44),h=c(29),i=c(46),j=c(3),k=c(7),l=c(51),m=c(31);a.exports=function(a,b,c,n,o,p){var q=d[a],r=q,s=o?"set":"add",t=r&&r.prototype,u={},v=function(a){var b=t[a];f(t,a,"delete"==a?function(a){return p&&!j(a)?!1:b.call(this,0===a?0:a)}:"has"==a?function(a){return p&&!j(a)?!1:b.call(this,0===a?0:a)}:"get"==a?function(a){return p&&!j(a)?void 0:b.call(this,0===a?0:a)}:"add"==a?function(a){return b.call(this,0===a?0:a),this}:function(a,c){return b.call(this,0===a?0:a,c),this})};if("function"==typeof r&&(p||t.forEach&&!k(function(){(new r).entries().next()}))){var w,x=new r,y=x[s](p?{}:-0,1)!=x,z=k(function(){x.has(1)}),A=l(function(a){new r(a)});A||(r=b(function(b,c){i(b,r,a);var d=new q;return void 0!=c&&h(c,o,d[s],d),d}),r.prototype=t,t.constructor=r),p||x.forEach(function(a,b){w=1/b===-(1/0)}),(z||w)&&(v("delete"),v("has"),o&&v("get")),(w||y)&&v(s),p&&t.clear&&delete t.clear}else r=n.getConstructor(b,a,o,s),g(r.prototype,c);return m(r,a),u[a]=r,e(e.G+e.W+e.F*(r!=q),u),p||n.setStrong(r,a,o),r}},function(a,b,c){"use strict";var d=c(18),e=c(13),f=c(7),g=c(17),h=c(5);a.exports=function(a,b,c){var i=h(a),j=""[a];f(function(){var b={};return b[i]=function(){return 7},7!=""[a](b)})&&(e(String.prototype,a,c(g,i,j)),d(RegExp.prototype,i,2==b?function(a,b){return j.call(a,this,b)}:function(a){return j.call(a,this)}))}},function(a,b){"use strict";a.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},function(a,b,c){"use strict";var d=c(19);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(a,b,c){"use strict";var d=c(13);a.exports=function(a,b){for(var c in b)d(a,c,b[c]);return a}},function(a,b,c){"use strict";var d=c(6),e=c(2),f=c(11),g=c(5)("species");a.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.setDesc(b,g,{configurable:!0,get:function(){return this}})}},function(a,b){"use strict";a.exports=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a}},function(a,b,c){"use strict";var d=c(1),e=c(17),f=c(7),g="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",h="["+g+"]",i="​",j=RegExp("^"+h+h+"*"),k=RegExp(h+h+"*$"),l=function(a,b){var c={};c[a]=b(m),d(d.P+d.F*f(function(){return!!g[a]()||i[a]()!=i}),"String",c)},m=l.trim=function(a,b){return a=String(e(a)),1&b&&(a=a.replace(j,"")),2&b&&(a=a.replace(k,"")),a};a.exports=l},function(a,b,c){"use strict";var d=c(5)("match");a.exports=function(a){var b=/./;try{"/./"[a](b)}catch(c){try{return b[d]=!1,!"/./"[a](b)}catch(e){}}return!0}},function(a,b,c){"use strict";var d=c(19);a.exports=Array.isArray||function(a){return"Array"==d(a)}},function(a,b,c){"use strict";var d=c(52),e=c(1),f=c(13),g=c(18),h=c(9),i=c(30),j=c(75),k=c(31),l=c(2).getProto,m=c(5)("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};a.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w}},function(a,b,c){"use strict";var d=c(5)("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(g){}a.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){c=!0},f[d]=function(){return g},a(f)}catch(h){}return c}},function(a,b){"use strict";a.exports=!1},function(a,b){"use strict";a.exports=Math.expm1||function(a){return 0==(a=+a)?a:a>-1e-6&&1e-6>a?a+a*a/2:Math.exp(a)-1}},function(a,b){"use strict";a.exports=Math.sign||function(a){return 0==(a=+a)||a!=a?a:0>a?-1:1}},function(a,b,c){"use strict";var d=c(2).getDesc,e=c(3),f=c(4),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,b,e){try{e=c(16)(Function.call,d(Object.prototype,"__proto__").set,2),e(a,[]),b=!(a instanceof Array)}catch(f){b=!0}return function(a,c){return g(a,c),b?a.__proto__=c:e(a,c),a}}({},!1):void 0),check:g}},function(a,b,c){"use strict";var d=c(33),e=c(17);a.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return 0>i||i>=j?a?"":void 0:(f=h.charCodeAt(i),55296>f||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}},function(a,b,c){"use strict";var d=c(73),e=c(17);a.exports=function(a,b,c){if(d(b))throw TypeError("String#"+c+" doesn't accept regex!");return String(e(a))}},,function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AnimationManager=b["default"]=void 0;var d=c(28),e=d.LayerManager.ROAM_LAYERS,f=e.ROAM_ASSETS_ANIMATION,g=e.ROAM_ASSETS_HISTORY,h=stampit().init(function(a){function b(a){var b=d.getLayerManager();b.setLayerVisibility(o.name,!a),b.setLayerVisibility(p.name,a)}var c=a.instance,d=void 0,e=0,i=0,j="",k=NaN,l=500,m=3,n=void 0,o=void 0,p=void 0,q=[],r=void 0,s=void 0,t=void 0;_.assign(c,{setViewer:_.once(function(a){return d=a}),loadAnimationObjects:function(){var a=d.getLayerManager();p=a.getLayer(f),o=a.getLayer(g),a.copyObjects(p.name,o.name),c.setAnimationObjects(p.getObjects()),c.stopAnimation()},setAnimationObjects:function(a){_.isArray(a)&&(q=a,c.setMaxStep(a.length))},setCurrentStep:function(a){e=a,d.getControls().onAnimationCurrentStepChanged(a)},getMaxStep:function(){return i},setMaxStep:function(a){i=a,d.getControls().onAnimationMaxStepChanged(a)},setAnimationInfo:function(a){j=a,d.getControls().onAnimationInfoChanged(a)},setAnimationSpeed:function(a){var b=.1;b>=a&&(a=b),l=1e3*a,c.isAnimating()&&(c.pauseAnimation(),c.startAnimation()),d.getControls().onAnimationSpeedChanged(a)},setTrailLength:function(a){a>=0&&(m=a,d.getControls().onAnimationTrailLengthChanged(a))},doStep:function(){r=q[e-1];for(var a=c.getMaxStep(),b=0;m>=b;b++){var f=b+1,g=e-f;if(g>=0&&a>g){var h=q[g],i=(m-b)/m;h.setVisible(i>0),h.setOpacity(i)}}var j=r.getPosition();d.isAutoFocus()&&d.setCenter(j),s.setMapObject(r).setText(c.getCurrentAnimationObjectInfo()).updatePosition().setVisible(!0)},stepTo:function(a){a>0&&i>=a?(c.setCurrentStep(a),c.isAnimating()||c.beforeAnimation(),c.doStep(),c.setAnimationInfo(c.getCurrentAnimationObjectInfo())):c.stopAnimation()},step:function(){c.stepTo(e+1)},isAnimating:function(){return _.isFinite(k)},pauseAnimation:function(){clearInterval(k),k=NaN,d.getControls().onAnimationStateChanged(h.ANIMATION_STATES.PAUSE)},stopAnimation:function(){_.isBoolean(n)&&(d.setAutoRefresh(n),n=void 0),c.isAnimating()&&(clearInterval(k),k=NaN),c.afterAnimation(),d.getControls().onAnimationStateChanged(h.ANIMATION_STATES.STOP)},startAnimation:function(){_.isUndefined(n)&&(n=d.isAutoRefresh(),d.setAutoRefresh(!1)),c.isAnimating()||(c.beforeAnimation(),k=setInterval(function(){c.step()},l)),d.getControls().onAnimationStateChanged(h.ANIMATION_STATES.START)},beforeAnimation:function(){d.getLayerManager().setAllObjectsVisibility(p.name,!1),b(!0),s||(s=d.getMapObjectLabelFactory().create()),s.setVisible(!1)},afterAnimation:function(){c.setCurrentStep(0),b(!1),s&&s.setVisible(!1),c.setAnimationInfo(c.getMaxStep()>0?"Ready.":"Inactive.")},getCurrentAnimationObjectInfo:function(){var a="";return r&&(a=r.getData("description")),a},drawAnimationPathLineObject:function(a){var b=[];if(t)b=t.objectModel.coordinates,b.push(a.latitude,a.longitude),t.setCoordinates(b);else{var c=q[0].getPosition();b=[c.longitude,c.latitude,a.longitude,a.latitude],t=d.getMapObjectFactory().create({objectModel:{coordinates:b,shapeType:"line",options:{styleName:"animationPath"}}}),d.addObject(t)}},removeAnimationPathLineObject:function(){t&&(d.removeObject(t),t=void 0)}})})["static"]({ANIMATION_STATES:{PAUSE:0,STOP:1,START:2}});b["default"]=h,b.AnimationManager=h},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.MapObject=b["default"]=void 0;var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=c(8),g=d(f),h=c(28),i=c(15),j=h.LayerManager.ROAM_LAYERS,k=j.ROAM_ASSETS_HISTORY,l=j.ROAM_ASSETS_ANIMATION,m=i.Styler.getInstance(),n=stampit().props({objectModel:void 0,viewer:void 0,id:"",layerName:"",roamObject:void 0}).methods({getFactory:function(){return this.viewer.getMapObjectFactory()},getFactoryMethod:function(a){var b=this.getFactory(),c=b.createMarker,d=b.createPolygon,e=b.createRectangle,f=b.createCircle,g=b.createPolyline,h={marker:c,area:d,rectangle:d,circle:d,pass:d,point:c,polygon:d,rectangle2:e,circle2:f,line:g},i=h[a];if(!_.isFunction(i))throw new Error("Invalid shape type: "+a+".");return i},getNativeObject:function(){throw new Error(".getNativeObject() method not implemented.")},addEventListener:function(a,b){throw new Error(".addEventListener() method not implemented.")},removeEventListener:function(a,b){throw new Error(".removeEventListener() method not implemented.")},createDefaultObjectModel:function(){var a=this.roamObject,b=(a.shapeType||"marker").toLowerCase(),c={shapeType:b},d="marker"===b,e=a.latitude,f=a.longitude;if(d)_.assign(c,{lat:e,lng:f,options:{icon:{model:m.getRoamIcon(a,!(this.viewer.moduleName.match(/googlemaps/i)&&kendo.support.browser.msie))}}});else{var g=a.fenceType||"Unknown";_.assign(c,{coordinates:this.getFactory().toLatLngArray(a.coordinates),options:{styleName:"geofence"+g}})}return c},createDefaultRoamData:function(){var a=this.roamObject,b=this.layerName,c=a.asset,d=c?c.name:a.name,e=d;b!==k&&b!==l||(d=c.name+" "+a.name,e=a.name+" "+g["default"].util.format.dateTime(a.eventTime));var f=a.fenceType;f&&(e=d+" ["+f+"]");var h=a.domainObjectType,i=a.domainObjectTypeId,j=a.id;return{domainObjectType:h,domainObjectTypeId:i,name:d,description:e,layerName:b,domainObjectId:j}},createDefaultClickListener:function(){var a=this;return function(b){b.stopPropagation=b.stopPropagation||b.stop,b.stopPropagation();var c=void 0;c=_.isFunction(a.getPosition)?a.getPosition():a.getCenterBounds();var d=a.viewer,e=d.geoToPixel(c),f=e.x,g=e.y;d.createMapInfoBox({parentElement:d.container,position:{top:g,left:f},domainObjectType:a.getData("domainObjectType"),domainObjectId:a.getData("domainObjectId"),objectName:a.getData("name")},function(a){a.setGeoPosition(c),a.show()})}},createDefaultMouseEnterListener:function(){var a=this;return function(){var b=a.getData("hoverLabel");b?b.updatePosition():(b=a.viewer.getMapObjectLabelFactory().create({mapObject:a}),b.setText(a.getData("name")),a.setData("hoverLabel",b)),b.setVisible(!0)}},createDefaultMouseLeaveListener:function(){var a=this;return function(){var b=a.getData("hoverLabel");b&&b.setVisible(!1)}},createDefaultVisibilityChangedListener:function(){var a=this;return function(){var b=a.viewer,c=a.layerName,d=b.getLayerManager().getObjectLabelsVisibility(c);a.setLabelVisible(d)}},getData:function(a){throw new Error(".getData() method not implemented.")},setData:function(a,b){throw new Error(".setData() method not implemented.")},isVisible:function(a){throw new Error(".isVisible() method not implemented.")},setVisible:function(a){throw new Error(".setVisible() method not implemented.")},getLabel:function(){return this.getData("objectLabel")},isLabelVisible:function(){var a=this.getLabel();return Boolean(a&&a.isVisible())},setLabelVisible:function(a){var b=this.getLabel();b?this.updateLabelPosition():(b=this.viewer.getMapObjectLabelFactory().create({mapObject:this}),this.setData("objectLabel",b)),b.setVisible(a)},updateLabelPosition:function(){var a=this.getLabel();a&&a.updatePosition()},destroyLabel:function(){var a=this.getLabel();a&&(a.destroy(),this.setData("objectLabel",void 0))},isWithinViewBounds:function(){throw new Error(".isWithinViewBounds() method not implemented.")}})["static"]({createMarker:function(a,b){throw new Error(".createMarker() method not implemented.")},createPolyline:function(a,b){throw new Error(".createPolyline() method not implemented.")},createPolygon:function(a,b){throw new Error(".createPolygon() method not implemented.")},createRectangle:function(a,b){throw new Error(".createRectangle() method not implemented.")},createCircle:function(a,b){throw new Error(".createCircle() method not implemented.")},createNormalizedShapeStyle:function(a,b){var c=m.getShapeStyles(),d=e({},c[a]);return a.match(/geofence/i)&&_.assign(d,c.geofence),d=b.getMapObjectFactory().normalizeShapeStyle(d)},normalizeShapeStyle:function(a){throw new Error(".normalizeShapeStyle() method not implemented.")},toLatLngArray:function(a){return _.map(a,function(a,b,c){var d=b+1,e=c[b+1];return d%2===0&&(e=c[b-1]),e})},toPoints:function(a){return _(a).map(function(b,c){var d=c+1,e=void 0;if(d%2===0){var f=a[c-1],g=a[c];e={lat:f,lng:g}}return e}).compact().value()},toCoordinates:function(a){return _.transform(a,function(a,b){var c=b.lat,d=b.lng;c=_.isFinite(parseFloat(c))?c:b.lat(),d=_.isFinite(parseFloat(d))?d:b.lng(),a.push(c,d)})}});b["default"]=n,b.MapObject=n},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=stampit().props({routingManager:void 0,viewer:void 0}).methods({searchPlaces:function(a){throw new Error(".searchPlaces() method not implemented.")},calculateRoute:function(){throw new Error(".calculateRoute() method not implemented.")}});b["default"]=c,b.RoutingEngine=c},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.Viewer=b["default"]=void 0;var e=c(8),f=d(e),g=c(28),h=c(59),i=c(108),j=c(109),k=c(110),l=f["default"].config,m=f["default"].widget,n=c(240),o=g.LayerManager.ROAM_LAYERS,p=o.ROAM_ASSETS,q=o.ROAM_ASSETS_HISTORY,r=stampit().props({moduleName:"",name:"",container:void 0,domainObjectType:"",domainObjectId:"",alarmEventIds:void 0,
autoRefresh:!1,autoFocus:!1,rememberLastViewportEnabled:!1,lazyLoadingEnabled:!1}).methods({getFriendlyName:function(){return _.startCase(this.moduleName.replace(/maps/i," maps"))},getLogo:function(){return"images/maps/logos/"+this.moduleName.replace(/maps/i,"")+"-logo.png"},addEventListener:function(a,b){throw new Error(".addEventListener() method not implemented.")},removeEventListener:function(a,b){throw new Error(".removeEventListener() method not implemented.")},onceEventListener:function(a,b){throw new Error(".onceEventListener() method not implemented.")},createDefaultClickListener:function(){var a=this;return function(){var b=a.getMapInfoBox();b&&b.isVisible()&&b.hide()}},createDefaultMapViewChangeEndListener:function(){var a=this;return function(){var b=a.getMapInfoBox();if(b&&b.isVisible()){var c=a.geoToPixel(b.getGeoPosition()),d=c.x,e=c.y,f=a.container.offset(),g=f.top,h=f.left;b.setPosition({top:e+g,left:d+h})}}},createDefaultMouseMoveListener:function(){var a=this,b=function c(b){var d=a.getCoordinatesDisplay();if(d){var e=b.currentPointer,f=b.latLng,g=e.viewportX,h=e.viewportY,i=void 0;e?i=a.pixelToGeo({x:g,y:h}):f&&_.assign(i,{lat:f.lat(),lng:f.lng()});var j=i,k=j.lat,l=j.lng;d.setCoordinates(l,k)}else a.removeEventListener("mousemove",c)};return b},addOverlay:function(a){throw new Error(".addOverlay() method not implemented.")},addObject:function(a){this.addObjects([a])},addObjects:function(a){throw new Error(".addObjects() method not implemented.")},removeObject:function(a){this.removeObjects([a])},removeObjects:function(a){throw new Error(".removeObjects() method not implemented.")},getLayerFactory:function(){throw new Error(".getLayerFactory() method not implemented.")},getClusteringLayerFactory:function(){throw new Error(".getClusteringLayerFactory() method not implemented.")},getMapObjectFactory:function(){throw new Error(".getMapObjectFactory() method not implemented.")},getMapObjectLabelFactory:function(){return k.MapObjectLabel},getRoutingEngineFactory:function(){throw new Error(".getRoutingEngineFactory() method not implemented.")},pixelToGeo:function(a){throw new Error(".pixelToGeo() method not implemented.")},geoToPixel:function(a){throw new Error(".geoToPixel() method not implemented.")},getBoundingBox:function(){throw new Error(".getBoundingBox() method not implemented.")},setBoundingBox:function(a){throw new Error(".setBoundingBox() method not implemented.")},getCenter:function(){throw new Error(".getCenter() method not implemented.")},setCenter:function(a){throw new Error(".setCenter() method not implemented.")},getZoom:function(){throw new Error(".getZoom() method not implemented.")},getScale:function(){var a=this.getZoom()>19?19:this.getZoom();return _.round(this.getScales()[a])},zoomToLevel:function(a){throw new Error(".zoomToLevel() method not implemented.")},zoomToScale:function(a){if(a>=0){var b=_.findIndex(this.getScales(),function(b){return a>=b});this.zoomToLevel(b)}},zoomToLayer:function(a){var b=this.getLayerManager().getLayer(a);b&&this.setBoundingBox(b.getBounds())},zoomToObject:function(a,b){var c=this,d=this.getLayerManager(),e=d.getObject(a,b);if(e){if(this.onceEventListener("mapviewchangeend",function(){!d.testIsPositionLayerName(a)||c.isAssetCategoryFilterEnabled()?d.setObjectVisibility(a,b,!0):d.setAllObjectsVisibility(a,!0)}),_.isFunction(e.getPosition)){var f=e.getPosition(),g=f.lat,h=f.lng,i=_.parseInt(localStorage.getItem("SINGLE_ASSET_PREFERRED_ZOOM_LEVEL")),j=i||16;this.panTo(h,g),this.zoomToLevel(j)}else this.setBoundingBox(e.getBounds());_.isFunction(this.shake)&&this.shake()}},zoomToAll:function(){throw new Error(".zoomToAll() method not implemented.")},panTo:function(a,b){this.setCenter({lat:b,lng:a})},panBy:function(a,b){var c=this.geoToPixel(this.getCenter()),d={x:c.x+a,y:c.y+b};this.setCenter(this.pixelToGeo(d))},refresh:function(){throw new Error(".refresh() method not implemented.")},resize:function(){throw new Error(".resize() method not implemented.")},resolveProjection:function(){return $.Deferred().resolve().promise()},print:function(a){var b=this,c=document,d=c.title,e=$("body"),f=e.css("background-color"),g=$(n);document.title=this.getFriendlyName()+" Print",e.css("background-color","transparent").prepend(g);var h=$(".mp-logo"),i=$(".mp-screenshot"),j=$.Deferred(),k=$.Deferred();h.attr("src",this.getLogo()).on("load error",function(){return j.resolve()}),a?!function(){_.forEach($(".mp-directions"),function(b){var c=$(b),d=_.template(_.unescape(c.html()));c.html(d({directions:a})).toggleClass("hidden",!1)});var c=$(".mp-maneuver-icon"),d=0;_.forEach(c,function(a){var e=$(a);e.attr("src",e.data("iconpath")).on("load error",function(a){"error"===a.type&&$(b).remove(),d+=1,d===c.length&&k.resolve()})})}():k.resolve(),$.when(j,k).then(function(){var a=b.container,c=a.parent(),h=function(a){_(b.getExtensions()).compact().forEach(function(b){return b.setVisible(a)})};i.height(a.height()).append(a),h(!1);var j=e.children().not("script").not(g).detach(),k=$("<style>").attr("media","print").text('\n              img { max-width: none !important; }\n              a[href]:after { content: ""; }\n              ').appendTo("head");window.print(),document.title=d,e.css("background-color",f).prepend(j),c.prepend(a),h(!0),g.remove(),k.remove()})},isModernBrowser:function(){var a=document.documentMode,b=!a;return b||a>=11}}).init(function(a){var b=a.instance,c=void 0,d=g.LayerManager.create(),e=h.AnimationManager.create(),k=i.EditManager.create(),n=j.RoutingManager.create(),o=void 0,r=!1,s=NaN,t=!1,u=[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722],v={latest:!0,from:void 0,to:void 0},w={TODAY:function(a,b){a.setHours(0,0,0,0),b.setHours(23,59,0,0)},YESTERDAY:function(a,b){a.setDate(b.getDate()-1),a.setHours(0,0,0,0),b.setDate(b.getDate()-1),b.setHours(23,59,0,0)},LAST_24H:function(a,b){a.setDate(b.getDate()-1)},LAST_48H:function(a,b){a.setDate(b.getDate()-2)}},x=!1,y=!1,z=[],A=!1,B=void 0,C=void 0,D=void 0,E=void 0;_.assign(b,{getLayerManager:function(){return d},getAnimationManager:function(){return e},getEditManager:function(){return k},getRoutingManager:function(){return n},getControls:function(){return c},setControls:function(a){c=a},setListener:function(a){b.setControls(a)},getLayerDataFetcher:function(){return o},setLayerDataFetcher:function(a){o=a},getMapInfoBox:function(){return B},createMapInfoBox:function(a,b){B?B.init(a,b):B=new m.MapInfo(a,b)},getLegend:function(){return C},setLegend:function(a){C=a},getDateRangeSlider:function(){return D},setDateRangeSlider:function(a){D=a},getCoordinatesDisplay:function(){return E},setCoordinatesDisplay:function(a){E=a},getExtensions:function(){return[C,D,E]},isSingleAssetModeEnabled:function(){return r},setSingleAssetModeEnabled:function(a){r=a;var b=r?q:p;d.setPositionLayerName(b),c.onSingleAssetModeStatusChanged(a)},setViewBehavior:function(a){var c=a.autoRefresh,d=a.autoFocus,e=a.rememberLastViewportEnabled;b.setAutoRefresh(c),b.setAutoFocus(d),b.setRememberLastViewportEnabled(e)},isAutoRefresh:function(){return b.autoRefresh},setAutoRefresh:function(a){b.autoRefresh=a,b.setPollingActivated(a),c.onAutoRefreshChanged(a)},setPollingActivated:function(a){a?_.isFinite(s)||(s=setInterval(function(){c.onPositionsFetchingRequested(!0)},l.pollInterval)):(clearInterval(s),s=NaN)},isAutoFocus:function(){return b.autoFocus},setAutoFocus:function(a){b.autoFocus=a,a&&b.zoomToLayer(d.getPositionLayerName()),c.onAutoFocusChanged(a)},isAutoLabelingActivated:function(){return t},setAutoLabelingActivated:function(a){t=a,_.forEach(d.getLayers(),function(a){return d.setObjectLabelsVisibility(a.name,a.isLabelsVisible())}),c.onAutoLabelingStatusChanged(a)},setRememberLastViewportEnabled:function(a){b.rememberLastViewportEnabled=a,a?b.setBoundingBox(JSON.parse(localStorage.getItem("USER_BBOX"))):localStorage.removeItem("USER_BBOX")},getScales:function(){return u},getDataSelectionOptions:function(){return v},updateDataSelectionOptions:function(a){_.assign(v,a),D&&D.onDataSelectionOptionsChanged(v),c.onDataSelectionOptionsChanged(v)},selectPresetInterval:function(a){var b=new Date(l.map.now()),c={min:new Date(new Date(b).setHours(0,0,0,0)),max:new Date(new Date(b).setHours(23,59,0,0))},d=864e5,e=a.min,f=a.max,g=e,h=f,i="-";return g.getTime()===c.min.getTime()&&h.getTime()===c.max.getTime()?i="TODAY":c.max-h===d&&c.min-g===d?i="YESTERDAY":h.getTime()===b.getTime()&&h-g===d?i="LAST_24H":h.getTime()===b.getTime()&&h-g===2*d&&(i="LAST_48H"),i},selectIntervalRange:function(a){var b=w[a];if(!_.isFunction(b))throw new Error("Invalid preset interval: "+a+".");var c={min:new Date(l.map.now()),max:new Date(l.map.now())},d=c.min,e=c.max;return b(d,e),c},setUseClustersActivated:function(a){x=a,d.setClusteringEnabled(d.getPositionLayerName(),a),c.onUseClustersStatusChanged(a)},isConnectHistoryPositionsActivated:function(){return y},setConnectHistoryPositionsActivated:function(a){y=a,d.setEventsConnectorVisibility(a),c.onConnectHistoryPositionsStatusChanged(a)},getUniqueAssetStatusFiltersValues:function(){return _(d.getObjectsByLayer(d.getPositionLayerName())).map("roamObject").flatMap("assetStatus").uniq().sortBy().value()},getSelectedAssetStatusFilters:function(){return z},setSelectedAssetStatusFilters:function(a){z=a,c.onAssetStatusFiltersChanged(a)},isAnimationFeatureActivated:function(){return A},setAnimationFeatureActivated:function(a){A=a,a&&e.loadAnimationObjects(),c.onAnimationFeatureStatusChanged(a)},isAssetCategoryFilterEnabled:function(){return l.map.assetCategoryFilter&&!b.isSingleAssetModeEnabled()},testIsAssetConfigurationFilterEnabled:function(a){return f["default"].config.map.assetConfigurationFilter&&!this.isSingleAssetModeEnabled()&&d.testIsPositionLayerName(a)},isAssetStatusFiltersEnabled:function(){return f["default"].config.map.assetStatusFilters&&!this.isSingleAssetModeEnabled()}}),d.setViewer(b),e.setViewer(b),k.setViewer(b),n.setViewer(b)});b["default"]=r,b.Viewer=r},function(a,b,c){"use strict";var d=c(14),e=c(10),f=c(32);a.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k;return!a&&-1}}},function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=c(2),f=c(18),g=c(44),h=c(16),i=c(46),j=c(17),k=c(29),l=c(50),m=c(76),n=c(26)("id"),o=c(9),p=c(3),q=c(45),r=c(11),s=Object.isExtensible||p,t=r?"_s":"size",u=0,v=function(a,b){if(!p(a))return"symbol"==("undefined"==typeof a?"undefined":d(a))?a:("string"==typeof a?"S":"P")+a;if(!o(a,n)){if(!s(a))return"F";if(!b)return"E";f(a,n,++u)}return"O"+a[n]},w=function(a,b){var c,d=v(b);if("F"!==d)return a._i[d];for(c=a._f;c;c=c.n)if(c.k==b)return c};a.exports={getConstructor:function(a,b,c,d){var f=a(function(a,g){i(a,f,b),a._i=e.create(null),a._f=void 0,a._l=void 0,a[t]=0,void 0!=g&&k(g,c,a[d],a)});return g(f.prototype,{clear:function(){for(var a=this,b=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a._f=a._l=void 0,a[t]=0},"delete":function(a){var b=this,c=w(b,a);if(c){var d=c.n,e=c.p;delete b._i[c.i],c.r=!0,e&&(e.n=d),d&&(d.p=e),b._f==c&&(b._f=d),b._l==c&&(b._l=e),b[t]--}return!!c},forEach:function(a){for(var b,c=h(a,arguments.length>1?arguments[1]:void 0,3);b=b?b.n:this._f;)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!w(this,a)}}),r&&e.setDesc(f.prototype,"size",{get:function(){return j(this[t])}}),f},def:function(a,b,c){var d,e,f=w(a,b);return f?f.v=c:(a._l=f={i:e=v(b,!0),k:b,v:c,p:d=a._l,n:void 0,r:!1},a._f||(a._f=f),d&&(d.n=f),a[t]++,"F"!==e&&(a._i[e]=f)),a},getEntry:w,setStrong:function(a,b,c){l(a,b,function(a,b){this._t=a,this._k=b,this._l=void 0},function(){for(var a=this,b=a._k,c=a._l;c&&c.r;)c=c.p;return a._t&&(a._l=c=c?c.n:a._t._f)?"keys"==b?m(0,c.k):"values"==b?m(0,c.v):m(0,[c.k,c.v]):(a._t=void 0,m(1))},c?"entries":"values",!c,!0),q(b)}}},function(a,b,c){"use strict";var d=c(29),e=c(39);a.exports=function(a){return function(){if(e(this)!=a)throw TypeError(a+"#toJSON isn't generic");var b=[];return d(this,!1,b.push,b),b}}},function(a,b,c){"use strict";var d=c(18),e=c(44),f=c(4),g=c(3),h=c(46),i=c(29),j=c(38),k=c(9),l=c(26)("weak"),m=Object.isExtensible||g,n=j(5),o=j(6),p=0,q=function(a){return a._l||(a._l=new r)},r=function(){this.a=[]},s=function(a,b){return n(a.a,function(a){return a[0]===b})};r.prototype={get:function(a){var b=s(this,a);return b?b[1]:void 0},has:function(a){return!!s(this,a)},set:function(a,b){var c=s(this,a);c?c[1]=b:this.a.push([a,b])},"delete":function(a){var b=o(this.a,function(b){return b[0]===a});return~b&&this.a.splice(b,1),!!~b}},a.exports={getConstructor:function(a,b,c,d){var f=a(function(a,e){h(a,f,b),a._i=p++,a._l=void 0,void 0!=e&&i(e,c,a[d],a)});return e(f.prototype,{"delete":function(a){return g(a)?m(a)?k(a,l)&&k(a[l],this._i)&&delete a[l][this._i]:q(this)["delete"](a):!1},has:function(a){return g(a)?m(a)?k(a,l)&&k(a[l],this._i):q(this).has(a):!1}}),f},def:function(a,b,c){return m(f(b))?(k(b,l)||d(b,l,{}),b[l][a._i]=c):q(a).set(b,c),a},frozenStore:q,WEAK:l}},function(a,b,c){"use strict";var d=c(3),e=c(6).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){"use strict";var d=c(4);a.exports=function(){var a=d(this),b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),a.unicode&&(b+="u"),a.sticky&&(b+="y"),b}},function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=c(14),f=c(2).getNames,g={}.toString,h="object"==("undefined"==typeof window?"undefined":d(window))&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(a){try{return f(a)}catch(b){return h.slice()}};a.exports.get=function(a){return h&&"[object Window]"==g.call(a)?i(a):f(e(a))}},function(a,b,c){"use strict";a.exports=c(6).document&&document.documentElement},function(a,b,c){"use strict";var d=c(30),e=c(5)("iterator"),f=Array.prototype;a.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},function(a,b,c){"use strict";var d=c(3),e=Math.floor;a.exports=function(a){return!d(a)&&isFinite(a)&&e(a)===a}},function(a,b,c){"use strict";var d=c(3),e=c(19),f=c(5)("match");a.exports=function(a){var b;return d(a)&&(void 0!==(b=a[f])?!!b:"RegExp"==e(a))}},function(a,b,c){"use strict";var d=c(4);a.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(f){var g=a["return"];throw void 0!==g&&d(g.call(a)),f}}},function(a,b,c){"use strict";var d=c(2),e=c(22),f=c(31),g={};c(18)(g,c(5)("iterator"),function(){return this}),a.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")}},function(a,b){"use strict";a.exports=function(a,b){return{value:b,done:!!a}}},function(a,b){"use strict";a.exports=Math.log1p||function(a){return(a=+a)>-1e-8&&1e-8>a?a-a*a/2:Math.log(1+a)}},function(a,b,c){"use strict";var d=c(2),e=c(14),f=d.isEnum;a.exports=function(a){return function(b){for(var c,g=e(b),h=d.getKeys(g),i=h.length,j=0,k=[];i>j;)f.call(g,c=h[j++])&&k.push(a?[c,g[c]]:g[c]);return k}}},function(a,b,c){"use strict";var d=c(2),e=c(4),f=c(6).Reflect;a.exports=f&&f.ownKeys||function(a){var b=d.getNames(e(a)),c=d.getSymbols;return c?b.concat(c(a)):b}},function(a,b){"use strict";a.exports=Object.is||function(a,b){return a===b?0!==a||1/a===1/b:a!=a&&b!=b}},function(a,b,c){"use strict";var d=c(6),e="__core-js_shared__",f=d[e]||(d[e]={});a.exports=function(a){return f[a]||(f[a]={})}},function(a,b,c){"use strict";var d=c(10),e=c(83),f=c(17);a.exports=function(a,b,c,g){var h=String(f(a)),i=h.length,j=void 0===c?" ":String(c),k=d(b);if(i>=k)return h;""==j&&(j=" ");var l=k-i,m=e.call(j,Math.ceil(l/j.length));return m.length>l&&(m=m.slice(0,l)),g?m+h:h+m}},function(a,b,c){"use strict";var d=c(33),e=c(17);a.exports=function(a){var b=String(e(this)),c="",f=d(a);if(0>f||f==1/0)throw RangeError("Count can't be negative");for(;f>0;(f>>>=1)&&(b+=b))1&f&&(c+=b);return c}},function(a,b,c){"use strict";var d,e,f,g=c(16),h=c(42),i=c(70),j=c(67),k=c(6),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==c(19)(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),a.exports={set:m,clear:n}},function(a,b,c){"use strict";var d=c(39),e=c(5)("iterator"),f=c(30);a.exports=c(20).getIteratorMethod=function(a){return void 0!=a?a[e]||a["@@iterator"]||f[d(a)]:void 0}},function(a,b,c){"use strict";var d=c(25),e=c(76),f=c(30),g=c(14);a.exports=c(50)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):"keys"==b?e(0,c):"values"==b?e(0,a[c]):e(0,[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.Controller=b["default"]=void 0;var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=c(8),h=d(g),i=c(27),j=c(36),k=h["default"].util,l=h["default"].config,m=i.project.roamLayers,n=i.project.serviceUrls,o=stampit().props({controls:void 0,viewer:void 0}).init(function(a){var b=a.instance,c=b.controls,d=b.viewer;_.assign(b,{logError:function(a,b){},onMapMvcComponentsInitialized:function(a,e){var f=d.getLayerDataFetcher(),i=d.getLayerManager(),o=function(){_.forEach(f.getWorkingLayersProperties(),function(a){return i.addLayer(a)});var a=f.getRequestPromises(),c=a.length,d=0,e=$.Deferred();return _.forEach(a,function(a){a.done(function(a,f,g){0===d&&j.mapsDebugger.time("Map data loading time"),a.dataType=g.dataType,b.onObjectsDataFetchingSucceeded(a),d+=1,d===c&&(j.mapsDebugger.timeEnd("Map data loading time"),e.resolve())})}),e.promise()},p=function(){j.mapsDebugger.time("Map default state initialization time");var b=a.autoRefresh,e=a.autoFocus,f=a.rememberLastViewportEnabled;d.setViewBehavior({autoRefresh:b,autoFocus:e,rememberLastViewportEnabled:f}),c.setAutoLabelingCheckboxHidden(l.map.autoLabelingCheckboxHidden),h["default"].config.map.now=function(){var a=l.map.originalNow,b=new Date(a.getTime()+6e4*a.getTimezoneOffset());return k.dateFromGMT(b)};var g=d.selectIntervalRange("TODAY"),o={min:new Date(new Date(g.min).setDate(g.min.getDate()+1))},p=d.selectIntervalRange("LAST_24H");c.setDateTimePickerMaxDate(o.min),d.updateDataSelectionOptions({latest:!0,from:p.min,to:p.max});var q=d.name,r=m[i.getPositionLayerName()],s=r.clusteringSupported,t=/no([^A-Za-z0-9])?cluster/i;q&&q.match(t)&&(s=!1),c.setUseClustersCheckboxEnabled(s),d.setUseClustersActivated(s),c.setAssetStatusFiltersValues(d.getUniqueAssetStatusFiltersValues());var u=d.currentObject;if(u){var v=u.domainObjectType,w=u.domainObjectTypeId,x=i.getLayerName(v);i.addObject(x,u),d.zoomToObject(x,w)}var y=d.domainObjectType,z=d.domainObjectId;return $.ajax({url:""+l.serviceUrl+n.locationConfig.read,data:{domainObjectType:y,domainObjectId:z},success:function(a){c.setLocationConfigNames(_.map(a.data,function(a){return{text:a,value:a}})),j.mapsDebugger.timeEnd("Map default state initialization time")}})};try{d.setSingleAssetModeEnabled(f.testIsSingleAssetModeEnabled(d.domainObjectType)),d.resolveProjection().then(o,function(a,b,c){return g("Error resolving map projection.",new Error(c))}).then(p,function(a,b,c){return g("Error initializing ROAM layers.",new Error(c))}).then(e,function(a,b,c){return g("Error initializing default state of map viewer.",new Error(c))})}catch(q){g("Error initializing map.",q)}},onObjectsDataFetchingSucceeded:function(a){var e=d.getLayerManager();try{var f=a.dataType,i=a.latestPositionEventId,j=a.currentObject,k=e.getLayerName(f),l=a.data;i&&e.markLatestPositionRoamObject(l,i),e.loadObjects(f,l),e.setAllObjectsVisibility(k,e.getLayerVisibility(k)),d.isAutoFocus()&&e.testIsPositionLayerName(k)&&(1===l.length?d.zoomToObject(k,_.first(l).domainObjectTypeId):d.zoomToLayer(k)),j&&(d.currentObject=j);var m=a.metadata||{};m&&e.testIsPositionLayerName(k)&&(h["default"].config.map.assetStatusFilters=m.assetStatusAvailable,d.isAssetStatusFiltersEnabled()&&(c.setAssetStatusFiltersVisible(!0),c.setAssetStatusFiltersValues(d.getUniqueAssetStatusFiltersValues()),b.onAssetStatusFiltersChanged(d.getSelectedAssetStatusFilters())))}catch(n){g("Error loading ROAM objects.",n)}},onAutoRefreshToggled:function(a){try{d.setAutoRefresh(a)}catch(b){g("Error toggling auto-refresh state.",b)}},onPositionsFetchingRequested:function(a,e){try{!function(){var f=d.getDataSelectionOptions(),h={};if(!e&&!f.latest){var i=new Date(f.from),j=new Date(f.to);i=kendo.toString(k.dateToGMT(i),l.dateTimeFormat),j=kendo.toString(k.dateToGMT(j),l.dateTimeFormat),_.assign(h,{from:i,to:j})}var n=m[a],o=d.domainObjectType,p=d.domainObjectId,q=d.alarmEventIds,r=d.getDateRangeSlider();$.ajax({url:""+l.serviceUrl+n.serviceUrls.read,data:_.assign(h,{domainObjectType:o,domainObjectId:p,eventIds:JSON.stringify(q)}),beforeSend:function(){r?r.setEnabled(!1):c.setProgressOverlayEnabled(!0)},success:function(a){if(a.dataType="assetmessageevent",b.onObjectsDataFetchingSucceeded(a),d.isSingleAssetModeEnabled()&&(d.isAnimationFeatureActivated()&&b.onAnimationPositionsLoadingRequested(),d.isConnectHistoryPositionsActivated())){var c=a.data;b.onEventsConnectorDrawingRequested(c)}},error:function(a,b,c){g("Error fetching asset positions.",new Error(c))},complete:function(){r?r.setEnabled(!0):c.setProgressOverlayEnabled(!1),d.refresh()}})}()}catch(f){g("Error fetching asset positions.",f)}},onAutoFocusToggled:function(a){try{d.setAutoFocus(a)}catch(b){g("Error toggling auto-focus state.",b)}},onAutoLabelingToggled:function(a){try{d.setAutoLabelingActivated(a)}catch(b){g("Error toggling auto-labeling state.",b)}},onViewportSaved:function(a){try{localStorage.setItem("USER_BBOX",JSON.stringify(a)),h["default"].view.toast.showNotificationSimple("Info",h["default"].translate(""),h["default"].translate("The viewport has been successfully saved."))}catch(b){g("Error saving viewport to local storage.",b)}},onViewportRestored:function(a){try{d.setBoundingBox(JSON.parse(a)),h["default"].view.toast.showNotificationSimple("Info",h["default"].translate(""),h["default"].translate("The viewport has been successfully restored."))}catch(b){g("Error restoring viewport from local storage.",b)}},onScaleZoomingSelected:function(a){try{d.zoomToScale(_.parseInt(a))}catch(b){g("Error zooming to selected scale.",b)}},onLevelZoomingSelected:function(a){try{d.zoomToLevel(_.parseInt(a))}catch(b){g("Error zooming to selected level.",b)}},onDataSelectionOptionsUpdated:function(a){try{d.updateDataSelectionOptions(a)}catch(b){g("Error updating data selection options.",b)}},onObjectZoomingRequested:function(a,b){try{if(d.lazyLoadingEnabled){var c=d.getLayerManager();c.testIsPositionLayerName(a)||c.addObject(a,c.getCachedRoamObject(b))}d.zoomToObject(a,b)}catch(e){g("Error zooming to map object.",e)}},onLayerZoomingRequested:function(a){var b=d.getLayerManager();try{a=a||b.getPositionLayerName(),d.zoomToLayer(a)}catch(c){g("Error zooming to layer.",c)}},onObjectsVisibilityToggled:function(a,b,c){var e=d.getLayerManager();try{var f=e.testIsPositionLayerName(a);if(f&&d.setSelectedAssetStatusFilters([]),d.lazyLoadingEnabled&&!f){var h=e.getCachedRoamObjects(b);e.addObjects(a,h)}e.setObjectsVisibility(a,b,c)}catch(i){g("Error toggling objects visibility.",i)}},onObjectLabelsVisibilityToggled:function(a,b){var c=d.getLayerManager();try{c.setObjectLabelsVisibility(a,b)}catch(e){g("Error toggling object labels visibility.",e)}},onPositionSelectionToggled:function(a,b){var c=d.getLayerManager();try{c.setPositionHighlighted(a,b)}catch(e){g("Error toggling selected position highlight.",e)}},onUseClustersStatusToggled:function(a){try{d.setUseClustersActivated(a)}catch(b){g('Error toggling "Use clusters" status.',b)}},onEventsConnectorDrawingRequested:function(a){var b=d.getLayerManager();try{b.drawEventsConnector(a)}catch(c){g("Error drawing the events connector.",c)}},onConnectHistoryPositionsStatusToggled:function(a){try{d.setConnectHistoryPositionsActivated(a)}catch(b){g('Error toggling "Connect history positions" status.',b)}},onAssetStatusFiltersChanged:function(a){var b=d.getLayerManager();try{var e=b.getPositionLayerName();if(c.setProgressOverlayEnabled(!0),_.isEmpty(a))b.setAllObjectsVisibility(e,!0);else{var f=_(b.getObjectsByLayer(e)).map("roamObject").partition(function(b){var c=b.assetStatus,d=[];return d=_.isArray(b.assetStatus)?c:[c],d.some(function(b){return _.includes(a,b)})}).map(function(a){return _.map(a,"domainObjectTypeId")}).value();b.setObjectsVisibility(e,f[0],!0),b.setObjectsVisibility(e,f[1],!1)}c.setProgressOverlayEnabled(!1),d.setSelectedAssetStatusFilters(a)}catch(h){g("Error filtering assets based on status.",h)}},onAnimationPositionsLoadingRequested:function(){try{d.setAnimationFeatureActivated(!0)}catch(a){g("Error loading animation objects.",a)}},onAnimationPaused:function(){var a=d.getAnimationManager();try{a.pauseAnimation()}catch(b){g("Error pausing animation.",b)}},onAnimationStopped:function(){var a=d.getAnimationManager();try{a.stopAnimation()}catch(b){g("Error stopping animation.",b)}},onAnimationStarted:function(){var a=d.getAnimationManager();try{a.startAnimation()}catch(b){g("Error starting animation.",b)}},onAnimationStepSelected:function(a){var b=d.getAnimationManager();try{b.stepTo(a)}catch(c){g("Error doing step-to animation.",c)}},onAnimationSpeedSelected:function(a){var b=d.getAnimationManager();try{b.setAnimationSpeed(a)}catch(c){g("Error setting animation speed.",c)}},onAnimationTrailLengthSelected:function(a){var b=d.getAnimationManager();try{b.setTrailLength(a)}catch(c){g("Error setting animation trail length.",c)}},onEditModeDeactivated:function(){var a=d.getEditManager();try{a.destroy()}catch(b){g("Error destroying edit manager.",b)}},onEditableObjectTypeSelected:function(a){var b=d.getEditManager();try{b.setEditableObjectType(a)}catch(c){g("Error setting edit object type.",c)}},onEditableObjectShapeTypeSelected:function(a){var b=d.getEditManager();try{b.setEditableObjectShapeType(a)}catch(c){g("Error setting edit object shape type.",c)}},onEditableObjectLatLngEntered:function(a){var b=d.getEditManager();try{var c=_.map(a.split(","),function(a){return parseFloat(parseFloat(a).toFixed(8))}),e=f(c,2),h=e[0],i=e[1];_.isFinite(h)&&_.isFinite(i)&&b.setEditableObjectLatLng(h,i)}catch(j){g("Error setting edit object coordinates.",j)}},onEditableObjectBufferDistanceEntered:function(a){var b=d.getEditManager();try{var c=parseFloat(a);_.isFinite(c)&&b.setEditableObjectBufferDistance(c)}catch(e){g("Error setting edit object buffer distance.",e)}},onEditableObjectNameEntered:function(a){var b=d.getEditManager();try{b.setEditableObjectName(a)}catch(c){g("Error setting edit object name.",c)}},onEditableObjectConfigNameSelected:function(a){var b=d.getEditManager();try{b.setEditableObjectConfigName(a)}catch(c){g("Error setting edit object config name.",c)}},onObjectCreationRequested:function(a,c){var f=d.getLayerManager();try{var i=d.domainObjectType,j=d.domainObjectId;$.ajax({url:""+l.serviceUrl+m[a].serviceUrls.create,type:"POST",data:e({},c,{domainObjectType:i,domainObjectId:j}),success:function(b){var c=_.first(b.data);f.addObject(a,c),d.lazyLoadingEnabled&&!f.testIsPositionLayerName(a)&&f.addCachedRoamObject(c),f.setObjectVisibility(a,c.domainObjectTypeId,!0)},error:function(a){var b=_.first(a.responseJSON.messages);h["default"].view.toast.showNotificationSimple("Error",h["default"].translate("The object creation failed."),b),g("Error creating ROAM object.",new Error(b))},complete:function(){b.onEditModeDeactivated()}})}catch(k){g("Error creating ROAM object.",k)}},onWaypointItemAdditionRequested:function(a){var b=d.getRoutingManager();try{b.addWaypoint({},a)}catch(c){g("Error adding waypoint item.",c)}},onWaypointItemRemovalRequested:function(a){var b=d.getRoutingManager();try{b.removeWaypoint(a)}catch(c){g("Error removing waypoint item.",c)}},onWaypointItemReorderingRequested:function(a,b){var c=d.getRoutingManager();try{c.reorderWaypoint(a,b)}catch(e){g("Error reordering waypoint item.",e)}},onWaypointItemSelected:function(a,b){var c=d.getRoutingManager();try{c.updateWaypoint(a,b)}catch(e){g("Error setting waypoint item.",e)}},onPlacesSearchRequested:function(a){var b=d.getRoutingManager();try{!function(){var c=b.getRoutingControls();c.setProgressOverlayEnabled(!0),b.clearPlaces(),b.searchPlaces(a).done(function(a){return b.addPlaces(a)}).fail(function(a){g("Could not retrieve nearby places from "+d.getFriendlyName()+" service.",new Error(a.message))}).always(function(){return c.setProgressOverlayEnabled(!1)});var e=d.domainObjectType,f=d.domainObjectId;$.ajax({url:""+l.serviceUrl+n.geoPositionObjects.read,type:"GET",data:{domainObjectType:e,domainObjectId:f,name:a},success:function(a){b.addPlaces(_.map(a.results,function(a){var b=a.latitude,c=a.longitude,d=a.name,e=a.domainObjectType,f=a.id;return{name:d,domainObjectType:e,icon:"mc-icon-routing-type"+e,lat:b,lng:c,domainObjectId:f}}))},error:function(a,b,c){g("Could not retrieve geo position objects from ROAM Caesar service.",new Error(c))},complete:function(){c.setProgressOverlayEnabled(!1)}})}()}catch(c){g("Error retrieving place suggestions.",c)}},onRouteFeatureToggled:function(a,b){var c=d.getRoutingManager();try{c.setRouteFeatureAvoided(a,!b)}catch(e){g("Error toggling route feature.",e)}},onRouteCalculationRequested:function(){var a=d.getRoutingManager();try{!function(){var b=a.getRoutingControls();b.expandRoutingPanel(),b.setProgressOverlayEnabled(!0),a.calculateRoute().done(function(b){return a.setRoutingResult(b)}).fail(function(a){g(d.getFriendlyName()+" routing service could not calculate route.",new Error(a.message))}).always(function(){b.setProgressOverlayEnabled(!1),b.updateSaveRouteButton(),b.duckPunchWaypoints()})}()}catch(b){h["default"].view.toast.showNotificationSimple("Error",h["default"].translate("The routing failed."),b.message),g("Error calculating route.",b)}},onRouteSavingRequested:function(){var a=d.getRoutingManager();$.when(h["default"].dialog.input({title:h["default"].translate("Save Route"),message:h["default"].translate("Choose a name for this new route:"),labelOK:h["default"].translate("Save Route"),required:!0})).done(function(b){if("OK"===b.button){var c=a.yieldSaveRouteRequestData();if(c.waypoints.length>=2){var e=d.domainObjectType,f=d.domainObjectId;$.ajax({url:l.serviceUrl+n.routing.create,
data:{domainObjectType:e,domainObjectId:f,name:b.input,route:JSON.stringify(c)},success:function(){h["default"].view.toast.showNotificationSimple("Info",h["default"].translate(""),h["default"].translate("The route has been successfully saved."))},error:function(a,b,c){g("Error saving the route.",new Error(c))}})}}})},onMapsPrintRequested:function(a){try{d.print(a?d.getRoutingManager().getRouteDirections():void 0)}catch(b){g("Error printing the maps.",b)}},onResize:function(){try{d.resize()}catch(a){g("Error resizing the map viewer.",a)}},onDestroy:function(){try{var a=d.getMapInfoBox();c&&c.destroy(),a&&a.destroy(),d.rememberLastViewportEnabled&&b.onViewportSaved(d.getBoundingBox()),d.container.empty()}catch(e){g("Error destroying the controller.",e)}}});var g=b.logError});b["default"]=o,b.Controller=o},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=void 0},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.Initializer=b["default"]=void 0;var e=c(8),f=d(e),g=c(90),h=c(96),i=c(91),j=c(87),k=c(95),l=c(94),m=c(93),n=c(92),o=c(36),p=stampit().props({options:void 0}).init(function(a){var b=a.instance,c=b.options,d=void 0,e=void 0,p=void 0,q=void 0;_.assign(b,{startInitialization:function(a){var b=c.domainObjectType,r=c.domainObjectId,s=c.eventIds,t=g.LayerDataFetcher.create({domainObjectType:b,domainObjectId:r,alarmEventIds:s});c.layerDataFetcher=t,t.prefetch(),o.mapsDebugger.time("Map MVC components initialization time"),d=h.ViewerFactory.create(),d.createViewer(c,function(b){var d=c.mapDisplay.children(".map-controls");e=b,p=i.Controls.create({controlsView:d,viewer:e}),q=j.Controller.create({controls:p,viewer:e}),p.setController(q),e.setControls(p),o.mapsDebugger.timeEnd("Map MVC components initialization time"),q.onMapMvcComponentsInitialized(c,function(){o.mapsDebugger.time("Map extensions installation time");var b=l.Legend.create({viewer:e});if(b.setController(q),e.setLegend(b),f["default"].config.map.routing){var g=e.getRoutingManager(),h=k.RoutingControls.create({controlsView:d,routingManager:g});h.setController(q),g.setRoutingControls(h),g.initRoutingEngine();var i=c.reconstructingWaypoints,j=[{},{}];_.isArray(i)&&i.length>=2&&(j=i),_.forEach(j,function(a,b){q.onWaypointItemAdditionRequested(),q.onWaypointItemSelected(a,b)}),g.canCalculateRoute()&&q.onRouteCalculationRequested()}if(f["default"].config.map.dateRangeSlider&&e.isModernBrowser()){var p=m.DateRangeSlider.create({viewer:e});p.setController(q),e.setDateRangeSlider(p)}if(f["default"].config.map.coordinatesDisplay){var r=n.CoordinatesDisplay.create({viewer:e});r.setController(q),e.setCoordinatesDisplay(r)}o.mapsDebugger.timeEnd("Map extensions installation time"),a(q)})})}})});b["default"]=p,b.Initializer=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0}),b.LayerDataFetcher=b["default"]=void 0;var f=c(8),g=d(f),h=c(27),i=c(36),j=c(28),k=j.LayerManager.ROAM_LAYERS,l=k.ROAM_ASSETS,m=k.ROAM_ASSETS_HISTORY,n=stampit().props({serviceUrl:g["default"].config.serviceUrl,domainObjectType:"",domainObjectId:"",alarmEventIds:void 0}).methods({testIsSingleAssetModeEnabled:function(a){return!_.includes(["customer","group","location","geofence"],a)},testIsPositionLayerName:function(a){return a===l||a===m}}).init(function(a){var b=a.instance,c=b.serviceUrl,d=b.domainObjectType,f=b.domainObjectId,g=b.alarmEventIds,j=[],k=[],n=[];_.assign(b,{getWorkingLayersProperties:function(){return j},addDataUrl:function(a){k.push(a)},getRequestPromises:function(){return n},prefetch:function(){k=_(b.getWorkingLayersProperties()).map(function(a){return a.serviceUrls.read}).compact().value(),b.fetch()},fetch:function(){var a;return i.mapsDebugger.time("Map data ajax requests time"),n=_.map(k,function(a){return $.ajax({url:c+a,data:{domainObjectType:d,domainObjectId:f,eventIds:JSON.stringify(g)},beforeSend:function(b){var c="";c=a.match(/locations/i)?"location":a.match(/geofences/i)?"geofence":"assetmessageevent",b.dataType=c},success:function(a,b,c){}})}),(a=$).when.apply(a,e(n)).always(function(){return i.mapsDebugger.timeEnd("Map data ajax requests time")}),b.getRequestPromises()}});var o=b.testIsSingleAssetModeEnabled(d)?m:l;j=_.filter(h.project.roamLayers,function(a,c){return c===o||!b.testIsPositionLayerName(c)})});b["default"]=n,b.LayerDataFetcher=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(b,"__esModule",{value:!0}),b.Controls=b["default"]=void 0;var g=c(8),h=d(g),i=c(28),j=c(59),k=c(15),l=c(239),m=i.LayerManager.ROAM_LAYERS,n=m.ROAM_ASSETS,o=m.ROAM_ASSETS_HISTORY,p=m.ROAM_LOCATIONS,q=m.ROAM_GEOFENCES,r=m.ROAM_ASSETS_ANIMATION,s=j.AnimationManager.ANIMATION_STATES,t=s.PAUSE,u=s.STOP,v=k.Styler.getInstance(),w=stampit().props({controlsView:void 0,viewer:void 0}).methods({setProgressOverlayEnabled:function(a){kendo.ui.progress(this.controlsView,a)},destroy:function(){var a=this.controlsView;a&&(kendo.destroy(a),a.empty())}}).init(function(a){function b(){var a,b,c,d,e=D.onPositionsLoaded,g=D.onLocationsLoaded,h=D.onGeofencesLoaded,i=D.onLocationAdded,j=D.onGeofenceAdded,k=D.onPositionsVisibilityChanged,l=D.onLocationsVisibilityChanged,m=D.onGeofencesVisibilityChanged,s=D.onAssetLabelsVisibilityChanged,t=D.onLocationLabelsVisibilityChanged,u=D.onGeofenceLabelsVisibilityChanged;a={},f(a,n,e),f(a,o,e),f(a,p,g),f(a,q,h),f(a,r,_.noop),H=a,b={},f(b,n,_.noop),f(b,o,_.noop),f(b,p,i),f(b,q,j),f(b,r,_.noop),I=b,c={},f(c,n,k),f(c,o,k),f(c,p,l),f(c,q,m),f(c,r,_.noop),J=c,d={},f(d,n,s),f(d,o,s),f(d,p,t),f(d,q,u),f(d,r,_.noop),K=d}function c(){L=E.find("select:not([multiple])"),M=E.find(".datetime-picker"),O=E.find(".object-tree"),P=E.find(".object-editor"),Q=P.prev(".editmode-activator"),R=P.find(".editableobject-objectname"),S=P.find(".editableobject-configname"),T=P.find(".confirm-object-creation"),U=P.find(".cancel-object-creation"),N=$("<span>").addClass("mc-icon mc-icon-goto").attr("title",h["default"].translate("Go to this map object")),L.kendoDropDownList({dataTextField:"text",dataValueField:"value"}),M.kendoDateTimePicker({format:h["default"].config.user.dateTimeFormat}),O.kendoTreeView({loadOnDemand:!0,checkboxes:{checkChildren:!0}}),N.on("click",function(a){a.stopPropagation();var b=$(a.target),c=b.data("layerName"),d=b.data("id");G.onObjectZoomingRequested(c,d)}),O.on({mouseenter:function(a){var b=$(a.currentTarget),c=b.closest(".object-tree").data("kendoTreeView").dataItem(b);if(c.leaf){var d=c.layerName,e=c.id;N.data({layerName:d,id:e}).appendTo(b.find("div > .k-in"))}},mouseleave:function(){N.detach()}},".k-item"),_.forEach(O,function(a){var b=$(a),c=b.data("kendoTreeView");c.bind("check",function(a){var b=a.sender,c=b.dataItem(a.node),d=c.layerName,e=c.objectIds,f=c.checked;G.onObjectsVisibilityToggled(d,e,f)}),b.hasClass("position-tree")&&c.bind("select",function(a){var b=a.sender;G.onPositionSelectionToggled(b.dataItem(a.node).id,!0)})}),Q.on("click",function(a){var b=$(a.currentTarget),c=b.next(".object-editor"),d=F.getEditManager();G.onEditableObjectTypeSelected(c.data("objecttype")),G.onEditableObjectShapeTypeSelected(d.getEditableObjectShapeType())}),R.on("blur",function(a){G.onEditableObjectNameEntered($(a.target).val())}),S.on("change",function(a){G.onEditableObjectConfigNameSelected($(a.target).val())}),T.on("click",function(){var a=F.getEditManager(),b=a.getTargetLayerName();if(a.isEditableObjectPropertiesValid()){var c=a.getSanitizedEditableObjectProperties();G.onObjectCreationRequested(b,c)}}),U.on("click",function(){return G.onEditModeDeactivated()})}function d(){var a=E.find(".mc-panel-viewbehavior"),b=E.find(".mc-panel-viewarea");V=a.find('[name="auto-refresh"]'),W=a.find('[name="auto-focus"]'),X=a.find('[name="auto-labeling"]'),Y=a.find('[name="save-viewport"]'),Z=a.find('[name="restore-viewport"]'),aa=b.find('[name="zoom-to-scale"]'),ba=b.find('[name="zoom-to-level"]'),_.forEach(aa.children("option"),function(a){var b=$(a),c=/1 : (\d+)/i;if(b.text().match(c)){var d=_.parseInt(b.val()),e="1 : "+kendo.toString(d,"n0");b.text(e)}}),aa.kendoDropDownList({dataTextField:"text",dataValueField:"value"}),V.on("click",function(a){G.onAutoRefreshToggled($(a.target).is(":checked"))}),W.on("click",function(a){G.onAutoFocusToggled($(a.target).is(":checked"))}),X.on("click",function(a){G.onAutoLabelingToggled($(a.target).is(":checked"))}),Y.on("click",function(){return G.onViewportSaved(F.getBoundingBox())}),Z.on("click",function(){return G.onViewportRestored(localStorage.getItem("USER_BBOX"))}),aa.on("change",function(a){G.onScaleZoomingSelected($(a.target).val())}),ba.on("change",function(a){G.onLevelZoomingSelected($(a.target).val())})}function g(){var a=E.find(".mc-panel-intervals");ca=a.find('[name="history-mode"]'),da=a.find('[name="preset-intervals"]'),ea=a.find('[name="interval-selection"]'),fa=a.find('[name="datetime-from"]'),ga=a.find('[name="datetime-to"]'),ha=a.find('[name="fetch-positions"]'),ca.on("click",function(a){var b=$(a.target).val(),c="CURRENT"===b;G.onDataSelectionOptionsUpdated({latest:c})});var b=fa.data("kendoDateTimePicker"),c=ga.data("kendoDateTimePicker");da.on("change",function(a){var b=$(a.target).val();if(b&&"-"!==b){var c=F.selectIntervalRange(b),d=c.min,e=c.max;G.onDataSelectionOptionsUpdated({from:d,to:e})}}),b.bind("change",function(a){var b=a.sender,c=b.value()||b.max();G.onDataSelectionOptionsUpdated({from:c})}),c.bind("change",function(a){var b=a.sender,c=b.value()||b.min();G.onDataSelectionOptionsUpdated({to:c})}),ha.on("click",function(){D.onPositionsFetchingRequested()})}function i(){var a=E.find(".mc-panel-navigation");ia=a.find(".position-list"),ja=a.find('[name="positions-visibility"]'),ka=a.find(".position-tree"),la=a.find(".position-count"),ma=a.find('[name="asset-labels"]'),na=a.find('[name="use-clusters"]'),oa=a.find('[name="positions-connector"]'),pa=a.find('[name="status-filters"]'),qa=a.find('[name="animation"]'),ia.on({click:function(a){var b=$(a.currentTarget);b.toggleClass("active"),G.onPositionSelectionToggled(b.data("id"),b.is(".active"))},mouseenter:function(a){var b=$(a.currentTarget);N.data({layerName:b.data("layerName"),id:b.data("id")}).appendTo(b)},mouseleave:function(){N.detach()}},".list-group-item");var b=F.getLayerManager();ja.on("click",function(a){var c=b.getPositionLayerName(),d=_.map(b.getObjectsByLayer(c),"roamObject.domainObjectTypeId");G.onObjectsVisibilityToggled(c,d,$(a.target).is(":checked"))}),ma.on("click",function(a){G.onObjectLabelsVisibilityToggled(b.getPositionLayerName(),$(a.target).is(":checked"))}),na.on("click",function(a){G.onUseClustersStatusToggled($(a.target).is(":checked"))}),oa.on("click",function(a){G.onConnectHistoryPositionsStatusToggled($(a.target).is(":checked"))}),pa.kendoMultiSelect().data("kendoMultiSelect").bind("change",function(a){G.onAssetStatusFiltersChanged(a.sender.value())}),qa.on("click",function(){return G.onAnimationPositionsLoadingRequested()})}function j(){ra=E.find(".mc-panel-animation"),sa=ra.find(".step-current"),ta=ra.find(".step-max"),ua=ra.find(".animation-info"),va=ra.find('[name="animation-pause"]'),wa=ra.find('[name="animation-stop"]'),xa=ra.find('[name="animation-play"]'),ya=ra.find('[name="animation-slider"]'),za=ra.find('[name="animation-speed"]'),Aa=ra.find('[name="trail-length"]'),y(),va.on("click",function(){return G.onAnimationPaused()}),wa.on("click",function(){return G.onAnimationStopped()}),xa.on("click",function(){return G.onAnimationStarted()}),za.on("change",function(a){G.onAnimationSpeedSelected($(a.target).val())}),Aa.on("change",function(a){G.onAnimationTrailLengthSelected($(a.target).val())})}function k(){var a=E.find(".mc-panel-locations");Ba=a.find(".location-tree"),Ca=a.find(".location-count"),Da=a.find('[name="location-labels"]'),Ea=a.find('[name="location-coordinates"]'),Fa=a.find('[name="location-objectname"]'),Ga=a.find('[name="location-configname"]'),Da.on("click",function(a){G.onObjectLabelsVisibilityToggled(p,$(a.target).is(":checked"))}),Ea.on("blur",function(a){G.onEditableObjectLatLngEntered($(a.target).val())})}function s(){var a=E.find(".mc-panel-geofences");Ha=a.find(".geofence-tree"),Ia=a.find(".geofence-count"),Ja=a.find('[name="geofence-labels"]'),Ka=a.find('[name="geofence-shapetype"]'),La=a.find('[name="geofence-bufferdistance"]'),Ma=a.find('[name="geofence-objectname"]'),Na=a.find('[name="geofence-configname"]'),Ja.on("click",function(a){G.onObjectLabelsVisibilityToggled(q,$(a.target).is(":checked"))}),Ka.on("click",function(a){var b=$(a.currentTarget).data("shapetype"),c=F.getEditManager().getEditableObjectShapeType();b!==c&&G.onEditableObjectShapeTypeSelected(b)}),La.on("blur",function(a){G.onEditableObjectBufferDistanceEntered($(a.target).val())})}function w(a,b){var c=E.find(a);c.prop("disabled",!b).find("input, select, button, fieldset").prop("disabled",!b),_(c.find("input.datetime-picker")).map(function(a){return $(a).data("kendoDateTimePicker")}).compact().forEach(function(a){return a.enable(b)}),_(c.find("select:not([multiple])")).map(function(a){return $(a).data("kendoDropDownList")}).compact().forEach(function(a){return a.enable(b)})}function x(a){va.prop("disabled",!a.pause),wa.prop("disabled",!a.stop),xa.prop("disabled",!a.play)}function y(){var a=ya.data("kendoSlider");if(a){var b=ya.closest(".animation-slider-container");a.destroy(),b.empty(),ya=$("<input>").attr("name","animation-slider").appendTo(b)}var c=F.getAnimationManager().getMaxStep(),d=c>0;a=ya.kendoSlider({tickPlacement:"none",max:c}).data("kendoSlider"),d&&a.bind("change",function(a){var b=a.value;G.onAnimationPaused(),G.onAnimationStepSelected(b)}),a.enable(d)}function z(a,b){var c=m["ROAM_"+a.toUpperCase()],d=[],f={layerName:c,root:!0,id:a.toLowerCase(),text:h["default"].translate(a),items:[],objectIds:[],expanded:!0},g=F.testIsAssetConfigurationFilterEnabled(c),i={},j={};_.forEach(b,function(a){var b=a.domainObjectTypeId,d=a.asset,e=a.name,f={layerName:c,leaf:!0,id:b,text:d?d.name:e,objectIds:[b]};c===o&&(f.text=d.name+" "+e);var k=a.locationType,l=a.fenceType,m=a.assetCategory,n=k||l||m||"Unknown",p=j[n];p||(p=j[n]={},_.assign(p,{layerName:c,category:!0,name:h["default"].translate(n),id:n.toLowerCase(),imageUrl:v.getObjectCategoryIcon(a),items:[],objectIds:[]}));var q=p.items;if(q.push(f),p.objectIds.push(f.id),p.text=p.name+" ("+q.length+")",g){var r=a.configurationName||"Unknown",s=i[r];s||(s=i[r]={},_.assign(s,{layerName:c,configuration:!0,name:h["default"].translate(r),items:[],objectIds:[]}));var t=s.items;_.find(t,{id:p.id})||(t.push(p),s.text=s.name+" ("+t.length+")"),s.objectIds.push(f.id)}});var k=_.isEmpty(i)?j:i;return f.items=_(k).map().compact().forEach(function(a){f.objectIds=[].concat(e(f.objectIds),e(a.objectIds))}),d.push(f),d}function A(a){var b=a.objectTree,c=a.objectTypeName,d=a.objects,e=a.countBadge,f=b.data("kendoTreeView");if(f){var g=new kendo.data.HierarchicalDataSource({data:z(c,d)});f.setDataSource(g)}e.text(d.length)}function B(a){var b=a.layerName;if(!F.getLayerManager().testIsPositionLayerName(b)){var c=a.objectTree,d=a.object,e=a.countBadge,f=c.data("kendoTreeView"),g=d.locationType,h=d.fenceType,i=g||h;if(f){var j=f.dataSource,k=j.get(i.toLowerCase()),l=void 0;k?l=f.findByUid(k.uid):(l=f.append({layerName:b,category:!0,name:i,id:i.toLowerCase(),imageUrl:v.getObjectCategoryIcon(d),items:[],objectIds:[]},c.find(".k-item:first")),k=f.dataItem(l)),k.loaded()||k.load();var m=k.items,n=d.domainObjectTypeId,o=d.name;if(!_.find(m,{id:n})){var p=j.at(0),q=f.append({layerName:b,leaf:!0,id:n,text:o,objectIds:[n]},l);p.objectIds.push(n),k.objectIds.push(n),f.expandTo(q),f.select(q),f.text(l,i+" ("+m.length+")"),e.text(_.parseInt(e.text())+1)}}}}function C(a){var b=a.objectIds,c=a.visibility,d=a.objectTree;if(!_.isEmpty(b)){var e=d.data("kendoTreeView");e&&!function(){var a=function g(a){if(_.isEmpty(_.difference(a.objectIds,b)))return void a.set("checked",c);f&&!a.loaded()&&a.load();var d=a.items;_.isEmpty(d)||_.forEach(d,function(a){return g(a)})},d=e.dataSource.at(0),f=F.isAssetStatusFiltersEnabled()&&F.getLayerManager().testIsPositionLayerName(d.layerName);a(d)}()}}var D=a.instance,E=D.controlsView,F=D.viewer,G=void 0,H={},I={},J={},K={},L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0;_.assign(D,{setController:function(a){G=a},setListener:function(a){D.setController(a)},setDateTimePickerMaxDate:function(a){_(M).map(function(a){return $(a).data("kendoDateTimePicker")}).compact().forEach(function(b){return b.max(a)})},setAutoLabelingCheckboxHidden:function(a){X.closest(".checkbox").toggleClass("hidden",a)},setUseClustersCheckboxEnabled:function(a){na.prop("disabled",!a).closest(".checkbox").toggleClass("disabled",!a)},setAssetStatusFiltersVisible:function(a){pa.closest(".status-filters-container").toggleClass("hidden",!a)},setAssetStatusFiltersValues:function(a){var b=pa.data("kendoMultiSelect");b&&b.setDataSource(new kendo.data.DataSource({data:_.compact(a)}))},setLocationConfigNames:function(a){var b=Ga.data("kendoDropDownList");b&&b.setDataSource(new kendo.data.DataSource({data:a}))},onObjectsLoaded:function(a,b){var c=H[a];if(!_.isFunction(c))throw new Error("Invalid layer name: "+a+".");c(b)},onPositionsLoaded:function(a){var b=F.getLayerManager().getPositionLayerName(),c=F.isAssetCategoryFilterEnabled();ka.parent().toggleClass("hidden",!c),ia.parent().toggleClass("hidden",c),ja.closest(".checkbox").toggleClass("hidden",c),c?A({objectTypeName:"Assets",objects:a,objectTree:ka,countBadge:la}):(ia.empty(),_.forEach(a,function(a){var c=a.asset,d=a.eventTime,e=a.name,f=a.domainObjectTypeId,g=c.name;d&&(a.formattedEventTime=h["default"].util.format.dateTime(d)),b===o&&(g=a.formattedEventTime+" "+e);var i=$("<a>").addClass("list-group-item").text(g).data({layerName:b,id:f});ia.append(i)})),la.text(a.length)},onLocationsLoaded:function(a){A({objectTypeName:"Locations",objects:a,objectTree:Ba,countBadge:Ca})},onGeofencesLoaded:function(a){A({objectTypeName:"Geofences",objects:a,objectTree:Ha,countBadge:Ia})},onObjectAdded:function(a,b){var c=I[a];if(!_.isFunction(c))throw new Error("Invalid layer name: "+a+".");c(b)},onLocationAdded:function(a){B({layerName:p,object:a,objectTree:Ba,countBadge:Ca})},onGeofenceAdded:function(a){B({layerName:q,object:a,objectTree:Ha,countBadge:Ia})},onObjectRemoved:function(a,b){_.noop()},onLocationRemoved:function(a){},onGeofenceRemoved:function(a){},onSingleAssetModeStatusChanged:function(a){ma.prop("disabled",a).closest(".checkbox").toggleClass("disabled",a),oa.prop("disabled",!a).closest(".checkbox").toggleClass("disabled",!a),qa.prop("disabled",!a);var b=a?"Asset Positions":"Assets";E.find('[data-phrase="Navigation"]').text(h["default"].translate(b)),D.setAssetStatusFiltersVisible(F.isAssetStatusFiltersEnabled()&&!a)},onAutoRefreshChanged:function(a){V.prop("checked",a)},onPositionsFetchingRequested:function(a){var b=F.getLayerManager().getPositionLayerName();G.onPositionsFetchingRequested(b,a)},onAutoFocusChanged:function(a){W.prop("checked",a)},onAutoLabelingStatusChanged:function(a){X.prop("checked",a)},onDataSelectionOptionsChanged:function(a){var b=a.latest,c=a.from,d=a.to,e=b?"CURRENT":"INTERVAL";ca.filter("[value="+e+"]").prop("checked",!0),w(ea,!b),ea.parent(".panel").toggleClass("hidden",b);var f=fa.data("kendoDateTimePicker"),g=ga.data("kendoDateTimePicker");f&&g&&(f.max(d),f.value(c),g.min(c),g.value(d));var h=F.selectPresetInterval({min:c,max:d}),i=da.data("kendoDropDownList");i&&i.value(h)},onObjectsVisibilityChanged:function(a,b,c){var d=J[a];if(!_.isFunction(d))throw new Error("Invalid layer name: "+a+".");d(b,c)},onPositionsVisibilityChanged:function(a,b){var c=F.isAssetCategoryFilterEnabled();c?C({objectIds:a,visibility:b,objectTree:ka}):ja.prop("checked",b)},onLocationsVisibilityChanged:function(a,b){C({objectIds:a,visibility:b,objectTree:Ba})},onGeofencesVisibilityChanged:function(a,b){C({objectIds:a,visibility:b,objectTree:Ha})},onObjectLabelsVisibilityChanged:function(a,b){var c=K[a];if(!_.isFunction(c))throw new Error("Invalid layer name: "+a+".");c(b)},onAssetLabelsVisibilityChanged:function(a){ma.prop("disabled")||ma.prop("checked",a)},onLocationLabelsVisibilityChanged:function(a){Da.prop("disabled")||Da.prop("checked",a)},onGeofenceLabelsVisibilityChanged:function(a){Ja.prop("disabled")||Ja.prop("checked",a)},onPositionHighlightChanged:function(a,b){if(a){var c=F.isAssetCategoryFilterEnabled();if(c){var d=ka.data("kendoTreeView"),e=d.dataSource.get(a).uid;d.select(d.findByUid(e))}else{var f=$(_.find(ia.children(".list-group-item"),function(b){return $(b).data("id")===a}));f.toggleClass("active",b)}}},onUseClustersStatusChanged:function(a){na.prop("disabled")||na.prop("checked",a)},onConnecinstancetoryPositionsStatusChanged:function(a){oa.prop("disabled")||oa.prop("checked",a)},onAssetStatusFiltersChanged:function(a){var b=pa.data("kendoMultiSelect");b&&b.value(a)},onAnimationFeatureStatusChanged:function(a){ra&&ra.fadeIn(1e3).toggleClass("hidden",!a)},onAnimationCurrentStepChanged:function(a){sa.text(a),ya.data("kendoSlider").value(a)},onAnimationMaxStepChanged:function(a){ta.text(a),y()},onAnimationInfoChanged:function(a){ua.text(a)},onAnimationSpeedChanged:function(a){za.data("kendoDropDownList").value(a)},onAnimationTrailLengthChanged:function(a){Aa.data("kendoDropDownList").value(a)},onAnimationStateChanged:function(a){x(a===t?{pause:!1,stop:!0,play:!0}:a===u?{pause:!1,stop:!1,play:!0}:{pause:!0,stop:!0,play:!1})},onEditableObjectTypeChanged:function(a){_.forEach(P,function(b){var c=$(b),d=c.prev(".editmode-activator"),e=c.find(".editor-fieldset"),f=c.data("objecttype")===a;d.toggleClass("hidden",f),c.toggleClass("hidden",!f),w(e,f),f||(c.find(".form-group").toggleClass("has-error",!1),c.find(".invalid-block").toggleClass("hidden",!0))})},onEditableObjectShapeTypeChanged:function(a){var b=F.getEditManager().getEditableObjectType(),c=P.filter('[data-objecttype="'+b+'"]'),d=c.find(".editableobject-shapetype"),e=c.find(".shapeparameter-fieldset");_.forEach(d,function(b){var c=$(b),d=c.data("shapetype")===a;c.toggleClass("active",d)}),_.forEach(e.children(".form-group"),function(b){var c=$(b),d=c.data("shapetype")===a;c.toggleClass("hidden",!d)})},onEditableObjectLatLngChanged:function(a,b){Ea.val(a+", "+b)},onEditableObjectCoordinatesChanged:function(a){var b=F.getEditManager().getEditableObjectType(),c=P.filter('[data-objecttype="'+b+'"]'),d=c.find(".editableobject-coordinates");if(d.val(""),!_.isEmpty(a)){var e=_.every(a,_.isFinite);e&&d.val(a.join(", "))}},onEditableObjectBufferDistanceChanged:function(a){var b=F.getEditManager().getEditableObjectType(),c=P.filter('[data-objecttype="'+b+'"]'),d=c.find(".editableobject-bufferdistance");d.val(_.round(a))},onEditableObjectNameChanged:function(a){var b=F.getEditManager().getEditableObjectType(),c=P.filter('[data-objecttype="'+b+'"]'),d=c.find(".editableobject-objectname");d.val(a)},onEditableObjectConfigNameChanged:function(a){var b=F.getEditManager().getEditableObjectType(),c=P.filter('[data-objecttype="'+b+'"]'),d=c.find("select.editableobject-configname");d.data("kendoDropDownList").value(a)},onEditableObjectPropertyValidityChanged:function(a,b){var c=F.getEditManager().getEditableObjectType(),d=P.filter('[data-objecttype="'+c+'"]'),e=a.toLowerCase(),f=d.find(".form-group:visible").has(".editableobject-"+e),g=f.find(".invalid-"+e),h=b.valid,i=b.invalidText;f.toggleClass("has-error",!h),g.toggleClass("hidden",h),i&&g.find(".invalid-text").text(i)}}),E.html(l),h["default"].i18n.translateContent(E),b(),c(),d(),g(),i(),j(),k(),s(),w("fieldset:disabled",!1)});b["default"]=w,b.Controls=w},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.CoordinatesDisplay=b["default"]=void 0;var e=c(8),f=d(e),g=stampit().props({viewer:void 0}).init(function(a){var b=a.instance,c=b.viewer,d=void 0,e=void 0;_.assign(b,{setController:function(a){e=a},setCoordinates:function(a,b){d.val(a.toFixed(8)+", "+b.toFixed(8))}});var g=c.getCenter(),h=g.lat,i=g.lng,j=[i.toFixed(8),h.toFixed(8)];d=$("<input>").addClass("form-control input-sm map-coordinatesdisplay").attr({type:"text",title:f["default"].translate('Enter "longitude, latitude" coordinates and press enter.'),"data-toggle":"tooltip",size:24}).on("keydown",function(a){if(13===a.which){var b=$(a.target),d=b.val(),e=d.split(","),f=parseFloat(e[0].trim()),g=parseFloat(e[1].trim());_.isFinite(f)&&_.isFinite(g)?(b.data("coordinatesString",d),c.panTo(f,g)):b.val(b.data("coordinatesString"))}}).val(j.join(", ")).appendTo(c.container)});b["default"]=g,b.CoordinatesDisplay=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.DateRangeSlider=b["default"]=void 0;var e=c(8),f=d(e),g=f["default"].config,h=f["default"].util,i=stampit().props({viewer:void 0}).init(function(a){function b(){k=$("<input>").attr({type:"checkbox"}).on("click",function(a){var b=$(a.target).is(":checked");p.onDataSelectionOptionsUpdated({latest:b}),p.onPositionsFetchingRequested(i.getLayerManager().getPositionLayerName())});var a=$("<div>").addClass("checkbox map-drs-latestevent").attr({title:f["default"].translate("Select this option to view the latest event(s)."),"data-toggle":"tooltip"}).append($("<label>").append(k).append($("<span>").addClass("checkbox-name").text(f["default"].translate("Latest"))));j.append(a)}function c(){l=$("<div>").addClass("map-drs-slider");var a=g.map.now(),b=i.selectIntervalRange("TODAY"),c={min:new Date(new Date(b.min).setDate(b.min.getDate()+1))},d=864e5,f=6e4,k=i.getDataSelectionOptions(),o=k.from,q=k.to,r=c.min,s={start:[o.getTime(),q.getTime()],connect:!0,behaviour:"tap-drag",step:f,range:{min:r.getTime()-g.map.dateRangeMinimum*d,"64%":r.getTime()-2*d,"82%":r.getTime()-d,max:a.getTime()},format:wNumb({decimals:0})};l.noUiSlider(s).noUiSlider_pips({mode:"range",density:6,format:{to:function(b){var c=h.format.date(h.dateToGMT(new Date(b)));return b===a.getTime()&&(c="now"),c}}});var t=function(a,b){var c=i.getDataSelectionOptions(),d=Math.abs(c.from-a),e=Math.abs(c.to-b),g=d>=f||e>=f;return g};l.on("change",function(a){var b=$(a.currentTarget).val(),c=new Date(_.parseInt(b[0])),d=new Date(_.parseInt(b[1]));t(c,d)&&(p.onDataSelectionOptionsUpdated({from:c,to:d}),p.onPositionsFetchingRequested(i.getLayerManager().getPositionLayerName()))});var u=function(a,b){var c=b.children(".map-drs-handlelabel");c.children(".map-drs-handlelabel-text").remove(),c.prepend($("<span>").addClass("map-drs-handlelabel-text").text(h.format.dateTime(h.dateToGMT(new Date(_.parseInt(a))),"g")))};_.forEach(["lower","upper"],function(a){return l.Link(a).to('-inline-\n          <div class="label label-default map-drs-handlelabel\n          map-drs-handlelabel-'+a+'"></div>',u)});var v=function(a,b){var c=a.find(".map-drs-handlelabel-"+b),d=$("<div>").addClass("map-drs-handlelabel-controls\n          map-drs-handlelabel-controls-"+b),f=$("<span>").addClass("glyphicon glyphicon-calendar map-drs-handlelabel-controls-icon"),g=$("<span>").addClass("glyphicon glyphicon-time map-drs-handlelabel-controls-icon"),h=$("<input>").addClass("map-drs-handlelabel-controls-datetimepicker invisible");"lower"===b?m=h:n=h,d.append([f,g,h]);var j=s.range,k=s.start,l=h.kendoDateTimePicker({min:"lower"===b?new Date(j.min):new Date(k[0]),max:"lower"===b?new Date(k[0]):new Date(j.max),value:"lower"===b?new Date(k[0]):new Date(k[1]),interval:1}).data("kendoDateTimePicker");l.bind("change",function(a){var c=a.sender,d=c.value();"lower"===b?(d||(d=c.max()),p.onDataSelectionOptionsUpdated({from:d})):(d||(d=c.min()),p.onDataSelectionOptionsUpdated({to:d})),p.onPositionsFetchingRequested(i.getLayerManager().getPositionLayerName())}),f.on("click",function(){e.isSliderEnabled()&&(l.close("time"),l.open("date"))}),g.on("click",function(){e.isSliderEnabled()&&(l.close("date"),l.open("time"))}),c.append(d)};v(l,"lower"),v(l,"upper"),j.append(l)}function d(){o=$("<select>").addClass("map-drs-presetintervals").on("change",function(a){var b=$(a.target).val();if(b&&"-"!==b){var c=i.selectIntervalRange(b),d=c.min,e=c.max;p.onDataSelectionOptionsUpdated({from:d,to:e}),p.onPositionsFetchingRequested(i.getLayerManager().getPositionLayerName())}}).kendoDropDownList({dataTextField:"text",dataValueField:"value",dataSource:[{text:f["default"].translate("Choose interval"),value:"-"},{text:f["default"].translate("Today"),value:"TODAY"},{text:f["default"].translate("Yesterday"),value:"YESTERDAY"},{text:f["default"].translate("Last 24 Hours"),value:"LAST_24H"},{text:f["default"].translate("Last 48 Hours"),value:"LAST_48H"}]}),j.append(o.data("kendoDropDownList").wrapper)}var e=a.instance,i=e.viewer,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0;if(_.assign(e,{setController:function(a){p=a},onDataSelectionOptionsChanged:function(a){var b=a.latest,c=a.from,d=a.to;k.prop("checked",b),e.setSliderVisible(!b),l.val([c.getTime(),d.getTime()]);var f=m.data("kendoDateTimePicker"),g=n.data("kendoDateTimePicker");f.max(d),f.value(c),g.min(c),g.value(d);var h=o.data("kendoDropDownList"),j=i.selectPresetInterval({min:c,max:d});h.value(j)},isSliderEnabled:function(){return!Boolean(l.attr("disabled"))},setSliderEnabled:function(a){a?l.removeAttr("disabled"):l.attr("disabled",!0)},setSliderVisible:function(a){l.toggleClass("hidden",!a),o.data("kendoDropDownList").wrapper.toggleClass("hidden",!a),a?j.css("right",0):j.css("right","auto")},setEnabled:function(a){k.prop("disabled",!a),e.setSliderEnabled(a),o.data("kendoDropDownList").enable(a),kendo.ui.progress(i.container.closest(".map-display"),!a)},setVisible:function(a){j.toggleClass("hidden",!a)}}),!$.fn.noUiSlider)throw new Error("$.noUiSlider plugin not exist.");j=$("<div>").addClass("map-drs"),b(),c(),d(),i.container.append(j),e.onDataSelectionOptionsChanged(i.getDataSelectionOptions())});b["default"]=i,b.DateRangeSlider=i},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.Legend=b["default"]=void 0;var e=c(8),f=d(e),g=c(27),h=c(15),i=f["default"].config,j=g.project.serviceUrls,k=h.Styler.getInstance(),l=stampit().props({viewer:void 0}).init(function(a){function b(){var a=$("<ul>").addClass("list-unstyled legend-list");_.forOwn(l,function(b,c){var d=!0,e=k.getDirectionIcon({mapCurrentSymbol:b,heading:45},d),g=$("<li>").addClass("row"),h=$("<div>").addClass("col-sm-8"),i=$("<div>").addClass("col-sm-4");h.text(f["default"].translate(c)).appendTo(g),i.append(d?e:$("<img>").attr("src",e)).appendTo(g),a.append(g)}),g=a[0].outerHTML;var b=d.container;e=$("<button>").addClass("btn btn-default map-legend").attr({title:f["default"].translate("Legend"),"data-toggle":"tooltip"}).popover({content:g,html:!0,placement:"bottom",template:'\n            <div class="popover map-legend-popover" role="tooltip">\n              <div class="arrow"></div>\n              <h3 class="popover-title"></h3>\n              <div class="popover-content"></div>\n            </div>\n          ',
viewport:b}).append($("<span>").addClass("glyphicon glyphicon-list-alt map-legend-icon")).appendTo(b)}var c=a.instance,d=c.viewer,e=void 0,g=void 0,h=[["Current","ROAM - arrow-blue"],["Historical","ROAM - arrow-green"],["Selected","ROAM - arrow-orange"],["Alarmed","ROAM - arrow-red"],["Engine On","ROAM - arrow-purple"],["Engine Off","ROAM - arrow-gray"]];f["default"].config.map.legend.isDEWA&&_.remove(h,function(a){return"Historical"===a[0]});var l=_.fromPairs(h),m=void 0;_.assign(c,{setController:function(a){m=a},setVisible:function(a){e.toggleClass("hidden",!a)}});var n=!1;if(n){var o=d.domainObjectType,p=d.domainObjectId;$.ajax({url:""+i.serviceUrl+j.legend.read,data:{domainObjectType:o,domainObjectId:p},success:function(a){var b=a.legendData;_.forEach(b,function(a){l[a.k]=f["default"].translate(a.v)})},error:function(a,b,c){m.logError("Error retrieving legend data.",new Error(c))},complete:function(){b()}})}else b()});b["default"]=l,b.Legend=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.RoutingControls=b["default"]=void 0;var e=c(8),f=d(e),g=c(241),h=f["default"].util,i=f["default"].i18n,j=stampit().props({routingView:void 0,controlsView:void 0,routingManager:void 0}).methods({setProgressOverlayEnabled:function(a){kendo.ui.progress(this.routingView,a)},expandRoutingPanel:function(){var a=this.controlsView,b=a.data("kendoPanelBar");b?b.expand(".mc-panel-routing"):a.children(".mc-panelbar").children(".mc-panel").removeClass("k-state-active").filter(".mc-panel-routing").addClass("k-state-active")}}).init(function(a){function b(a){var b=$("<li>").addClass("waypoint-item"),c=$("<span>").addClass("label label-primary waypoint-label").text(a.label),d=$("<input>").addClass("waypoint-input").val(a.name).on("input",_.debounce(function(a){var b=$(a.target),c=b.val(),d=b.siblings(".waypoint-input-clear");s=b.data("kendoAutoComplete"),0===c.length?(d.fadeOut(200),b.width("100%"),s.select(null),s.trigger("select")):c.length>=3?(b.width("85%"),d.fadeIn(200),k.onPlacesSearchRequested(c)):_.noop()},600)),e=$("<button>").addClass("btn btn-link waypoint-remover").attr("title",f["default"].translate("Remove stop over")).on("click",function(a){var b=$(a.target).parent(".waypoint-item");k.onWaypointItemRemovalRequested(b.index()),k.onRouteCalculationRequested()}).append($("<span>").addClass("glyphicon glyphicon-remove"));b.append([c,d,e]);var g=d.kendoAutoComplete({dataSource:j.getPlaces(),dataTextField:"name",delay:1200,minLength:3,placeholder:f["default"].translate("Select stop over..."),template:'<span class="mc-icon #=data.icon#"></span><span>#=data.name#</span>',filtering:function(a){a.filter.value=""},select:function(a){var b=a.item,c=a.sender,d=b,e=c,f={lat:NaN,lng:NaN,name:"",domainObjectType:"",domainObjectId:""},g=e.wrapper.parent(".waypoint-item").index();if(d){var h=d.index();c.dataSource.read();var i=e.dataItem(h),j=i.lat,l=i.lng,m=i.name,n=i.domainObjectType,o=i.domainObjectId;_.assign(f,{lat:j,lng:l,name:m,domainObjectType:n,domainObjectId:o})}k.onWaypointItemSelected(f,g),k.onRouteCalculationRequested()}}).data("kendoAutoComplete");return $("<span>").addClass("k-icon k-i-close waypoint-input-clear").on("click",function(a){var b=$(a.target),c=b.siblings(".waypoint-input");c.val("").trigger("input").data("kendoAutoComplete").close()}).appendTo(g.wrapper).hide(),b}var c=a.instance;c.routingView=$(g);var d=c.routingView,e=c.controlsView,j=c.routingManager,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;_.assign(c,{setController:function(a){k=a},updateSaveRouteButton:function(){r.prop("disabled",!j.routeExists())},duckPunchWaypoints:function(){if(!kendo.support.browser.msie){var a=$(window),b=a.scrollTop();l.children(".waypoint-item").find("input.waypoint-input").focus().blur(),a.scrollTop(b)}},onWaypointAdded:function(a,d){var e=l.children("li"),f=b(a),g=e.length;d>=g?l.append(f):e.eq(d).before(f);var h=0===d||d===g;f.children(".waypoint-remover").toggleClass("hidden",h),a.listItem=f,c.duckPunchWaypoints()},onWaypointRemoved:function(a){a.listItem.remove(),c.duckPunchWaypoints()},onWaypointReordered:function(a,b){var c=a.listItem,d=c.data(),e=d.toIndex===b;if(!e){c=c.detach();var f=l.children("li"),g=f.length;b>=g?(b=g,l.append(c)):f.eq(b).before(c),d.toIndex=b}},onWaypointChanged:function(a){var b=a.listItem;b&&b.find("input.waypoint-input").data("kendoAutoComplete").value(a.name)},onWaypointsLabelChanged:function(a){var b=a.length;_.forEach(a,function(a,c){var d=a.listItem;if(d){d.children(".waypoint-label").text(a.label);var e=0===c||c===b-1;d.children(".waypoint-remover").toggleClass("hidden",e)}})},onPlacesChanged:function(a){s&&(s.setDataSource(new kendo.data.DataSource({data:a})),s.dataSource.read())},onRouteFeatureChanged:function(a,b){n.find('[data-featurename="'+a+'"]').prop("checked",!b)},onRouteSummaryChanged:function(a){var b=a.distance,c=a.duration,d=Boolean(b&&c);d&&o.html(h.format.routeSummary(a)),o.closest(".route-summary").toggleClass("hidden",!d)},onManeuversChanged:function(a){p.empty(),_.forEach(a,function(a){var b=$("<li>").addClass("list-group-item").html(a.instruction),c=a.baseCssAction,d=a.action;c&&d&&b.prepend($("<span>").addClass(c).addClass(d)),p.append(b)}),p.closest(".route-directions").toggleClass("hidden",_.isEmpty(a))}}),e.find(".mc-panelbar:first").append(d),i.translateContent(d),l=d.find(".waypoint-list"),m=d.find('[name="add-waypoint"]'),n=d.find(".route-features"),o=d.find(".route-summary-text"),p=d.find(".maneuver-list"),q=d.find(".print-route"),r=d.find('[name="save-route"]'),l.sortable({cursor:"move",start:function(a,b){var c=b.item,d=c.data();d.fromIndex=c.index()},stop:function(a,b){var c=b.item,d=c.data();d.toIndex=c.index();var e=d.fromIndex,f=d.toIndex;k.onWaypointItemReorderingRequested(e,f),k.onRouteCalculationRequested()}}),m.on("click",function(){k.onWaypointItemAdditionRequested(j.getWaypoints().length-1)}),n.find(".route-feature").each(function(a){var b=$(a.target);if(j.getViewerModuleName().match(/googlemaps/i)){var c=b.data("featurename"),d=["tollroad","motorway","boatFerry"],e=_.includes(d,c);b.prop("disabled",!e).closest(".checkbox").toggleClass("disabled",!e)}}).on("click",function(a){var b=$(a.target);k.onRouteFeatureToggled(b.data("featurename"),b.is(":checked")),k.onRouteCalculationRequested()}),q.on("click",function(){return k.onMapsPrintRequested(!0)}),r.on("click",function(){return k.onRouteSavingRequested()})});b["default"]=j,b.RoutingControls=j},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=stampit().init(function(a){function b(a,b,c){var d=b.viewerModuleName,f=b.viewerName,g=b.mapDisplay,h=b.domainObjectType,i=b.domainObjectId,j=b.eventIds,k=b.autoRefresh,l=b.autoFocus,m=b.rememberLastViewportEnabled,n=b.lazyLoadingEnabled,o=b.layerDataFetcher;e=a.create({domainObjectType:h,domainObjectId:i,moduleName:d,name:f,container:g.children(".map-canvas"),alarmEventIds:j,autoRefresh:Boolean(k),autoFocus:Boolean(l),rememberLastViewportEnabled:Boolean(m),lazyLoadingEnabled:Boolean(n)}),e.setLayerDataFetcher(o),c(e)}var d=a.instance,e=void 0,f={heremaps:function(a,d){c.e(1,function(){window.H||(c(232),c(235),c(233),c(255),c(236),c(231),c(234)),b(c(107)["default"],a,d)})},googlemaps:function(a,d){c.e(2,function(){if(window.__google_maps_callback__=function(){c(230),b(c(58)["default"],a,d)},window.google&&window.google.maps)b(c(58)["default"],a,d);else{var e={v:"3.23",client:"gme-roamworks",libraries:"geometry,places",callback:"__google_maps_callback__"};$.getScript("https://maps.googleapis.com/maps/api/js?"+$.param(e))}})}};_.assign(d,{createViewer:function(a,b){var c=a.viewerModuleName=a.mapViewer.toLowerCase(),d=f[c];if(!_.isFunction(d))throw new Error("Invalid viewer module name: "+c+".");d(a,b)}})});b["default"]=d,b.ViewerFactory=d},,,,,function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StaticMap=b["default"]=void 0;var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=c(15),g=f.Styler.getInstance(),h="https://maps.googleapis.com/maps/api/staticmap?",i={show:function(a,b,c,d,e){d&&i.renderIcon(a,d,c,e),$("<img>").addClass("map-image").attr("src",b).appendTo(a)},renderIcon:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!d.noCentralIcon){var f=$("<img>").attr({src:g.getRoamIcon(b),title:b.name}).appendTo(a),h=d.left,i=d.top,j=e(c,2),k=j[0],l=j[1];f.css({position:"absolute",left:h||(k-f.width())/2,top:i||(l-f.height())/2})}},toLatLngString:function(a){return[].concat(a).reverse().join().replace(/([-+]?[0-9]*\.?[0-9]+,[-+]?[0-9]*\.?[0-9]+),/g,"$1|")},showStaticMap:function(a,b,c,d,e,f){var g={zoom:d,center:b[1]+","+b[0],size:c[0]+"x"+c[1]},j=""+h+$.param(g);i.show(a,j,c,e,f)},showStaticGeofenceMap:function(a,b,c,e){var f=i.toLatLngString(b),j=g.getShapeStyles(),k=d({},j.geofence,j["geofence"+e.fenceType]),l=k.strokeColor,m=k.strokeWeight,n=l.replace("#","0x"),o=k.fillColor.replace("#","0x"),p=o.fillColor,q=m,r={path:"color:"+n+"|fillcolor:"+p+"|weight:"+q+"|"+f,size:c[0]+"x"+c[1]},s=""+h+$.param(r);i.show(a,s)},showStaticRegionMap:function(a,b,c,d){_.noop()},showStaticAssetGroupMap:function(a,b,c,d,e){_.noop()}},j={getInstance:function(){return i}};b["default"]=j,b.StaticMap=j},,,,,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.StaticMap=b["default"]=void 0;var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=c(8),h=d(g),i=c(15),j=i.Styler.getInstance(),k=h["default"].config.map,l=k.appId,m=k.appCode,n=Boolean(window.location.protocol.match(/https/i))?"http":"https",o=n+"://image.maps.cit.api.here.com/mia/1.6/",p={show:function(a,b,c,d,e){d&&p.renderIcon(a,d,c,e),$("<img>").addClass("map-image").attr("src",b).appendTo(a)},renderIcon:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!d.noCentralIcon){var e=$("<img>").attr({src:j.getRoamIcon(b),title:b.name}).appendTo(a),g=d.left,h=d.top,i=f(c,2),k=i[0],l=i[1];e.css({position:"absolute",left:g||(k-e.width())/2,top:h||(l-e.height())/2})}},toLatLngString:function(a){return[].concat(a).reverse().join()},showStaticMap:function(a,b,c,d,e,g){b=p.toLatLngString(b);var h=f(c,2),i=h[0],j=h[1],k={w:i,h:j,app_id:l,app_code:m,c:b,ctr:b,nodot:!0,z:d},n=o+"mapview?"+$.param(k);p.show(a,n,c,e,g)},showStaticGeofenceMap:function(a,b,c,d){b=p.toLatLngString(b);var g=j.getShapeStyles(),h=e({},g.geofence,g["geofence"+d.fenceType]),i=h.strokeColor,k=h.strokeWeight,n=h.fillColor.replace("#",""),q=i.replace("#",""),r=k,s=f(c,2),t=s[0],u=s[1],v={w:t,h:u,app_id:l,app_code:m,a:b,sb:"mk",t:2,fc:"33"+n,lc:"ff"+q,lw:r},w=o+"region?"+$.param(v);p.show(a,w)},showStaticRegionMap:function(a,b,c,d){var e=f(c,2),g=e[0],h=e[1],i={w:g,h:h,app_id:l,app_code:m,nodot:!0};b&&(i.bbox=p.toLatLngString(b)),d&&d.center&&(i.ctr=p.toLatLngString(d.center));var j=o+"mapview?"+$.param(i);p.show(a,j,c,null,d)},showStaticAssetGroupMap:function(a,b,c,d,g){var h=f(d,2),i=h[0],k=h[1],n={w:i,h:k,app_id:l,app_code:m,sb:"mk",t:2},q=p.toLatLngString(b.coordinates),r=j.getShapeStyles(),s=e({},r.geofence,r["geofence"+b.fenceType]),t=s.strokeColor,u=s.strokeWeight,v=s.fillColor.replace("#",""),w=t.replace("#",""),x=u;_.assign(n,{a0:q,fc0:"33"+v,lc0:"ff"+w,lw0:x}),_.forEach(c,function(a,b){b+=1;var c=a.latitude,d=a.longitude;n["a"+b]=c+", "+d,n["rad"+b]=500});var y=o+"region?"+$.param(n);p.show(a,y)}},q={getInstance:function(){return p}};b["default"]=q,b.StaticMap=q},,function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EditManager=b["default"]=void 0;var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=c(15),g=f.Styler.getInstance(),h=stampit().init(function(a){function b(a,b){a.match(/rectangle|circle/i)?a+="2":a.match(/pass/i)&&(a="line");var c=i.getMapObjectFactory().create({viewer:i,objectModel:{coordinates:b,shapeType:a.toLowerCase(),options:{draggable:!0,editable:!0,icon:{model:g.getLocationIcon({locationType:"missing"})},styleName:"editableObject"}}});return c}function c(a,b){var c=o[a];if(!_.isFunction(c))throw new Error("Invalid property name: "+a+".");return c(b)}function f(a,b){var c=_(a).map(function(b,c){var d=c+1,e=void 0;return d%2===0&&(e=a[c-1].toFixed(8)+","+a[c].toFixed(8)),e}).compact().join(";");return b&&(c=c+";@"+b,"CIRCLE"===h.getEditableObjectShapeType()&&(c=c.replace(";@",","))),c}var h=a.instance,i=void 0,j=void 0,k={location:{objectName:"",configName:"Bank",latitude:NaN,longitude:NaN,shapeType:"POINT",coordinates:[]},geofence:{objectName:"",configName:"Exclusive Security",type:"",geometry:"",shapeType:"POLYGON",coordinates:[],bufferDistances:{CIRCLE:1e4,PASS:100}}},l=void 0,m=void 0,n=void 0,o={coordinates:function(a){var b=h.getEditableObjectShapeType(),c=p[b],d=void 0;if(_.isFunction(c)){var e=a;"POINT"!==b&&(e=_.floor(a.length/2)),d=c(e)}else d={valid:!1,invalidText:"Invalid shape type: "+b+"."};return d},bufferDistance:function(a){return{valid:_.isUndefined(a)||a>10}},objectName:function(a){return{valid:a.length>=3}}},p={POINT:function(a){var b=a.join(","),c=/^([-]?([1-8]?\d(\.\d+)?|90(\.0+)?)),\s*/,d=/([-]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?))$/,e=new RegExp(""+c.source+d.source);return{valid:Boolean(b.match(e))}},POLYGON:function(a){return{valid:a>=3,invalidText:"Polygon needs at least 3 points."}},RECTANGLE:function(a){return{valid:2===a,invalidText:"Rectangle needs 2 points."}},CIRCLE:function(a){return{valid:1===a,invalidText:"Circle needs a pair of coordinates."}},PASS:function(a){return{valid:a>=2,invalidText:"Pass needs at least 2 points."}}},q={POLYGON:"Wildcat.GeoArea",RECTANGLE:"Wildcat.GeoRectangle",CIRCLE:"Wildcat.GeoCircle",PASS:"Wildcat.GeoPass"};_.assign(h,{setViewer:_.once(function(a){return i=a}),getEditableObject:function(){return l},setEditableObject:function(a){h.setEditableObjectCoordinates(a.objectModel.coordinates),l&&i.removeObject(l),l=a,i.addObject(l)},getEditableObjectType:function(){return j},setEditableObjectType:function(a){j=a,m||(m=$("<span>").addClass("label label-primary editor-label").css({position:"absolute",left:4,top:4}).appendTo(i.container)),a&&m.text("Edit Mode: "+j.toUpperCase()),m.toggleClass("hidden",!a),i.getControls().onEditableObjectTypeChanged(a)},getTargetLayerName:function(){return i.getLayerManager().getLayerName(j)},getEditableObjectProperties:function(){var a=k[j];if(!_.isPlainObject(a))throw new Error("Edit mode for "+j.toUpperCase()+" object not supported");return a},getSanitizedEditableObjectProperties:function(){var a=h.getEditableObjectProperties(),b=h.getEditableObjectShapeType(),c=h.getEditableObjectCoordinates(),g=q[b];if(g){var i=h.getEditableObjectBufferDistance(),j=f(c,i);j&&_.assign(a,{geometry:j,type:g})}else{var k=e(c,2),l=k[0],m=k[1];_.assign(a,{latitude:l,longitude:m})}var n=d({},a);return delete n.shapeType,delete n.coordinates,delete n.bufferDistances,n},isEditableObjectPropertiesValid:function(){var a=h.getEditableObjectCoordinates(),b=h.getEditableObjectBufferDistance(),d=h.getEditableObjectName(),e={coordinates:a,bufferDistance:b,objectName:d},f=!0;return _.forOwn(e,function(a,b){var d=c(b,a);f&=d.valid,i.getControls().onEditableObjectPropertyValidityChanged(b,d)}),f},getEditableObjectShapeType:function(){return h.getEditableObjectProperties().shapeType},setEditableObjectShapeType:function(a){var c=h.getEditableObjectProperties();c.shapeType=a,h.reset(),n=function(a){var c=a.currentPointer,d=a.latLng,e=void 0;if(c){var f=c.viewportX,g=c.viewportY;e=i.pixelToGeo({x:f,y:g})}else d&&(e={lat:d.lat(),lng:d.lng()});var j=[e.lat,e.lng],k=h.getEditableObjectShapeType(),l=b(k,j);h.setEditableObject(l);var m=l.getData("auxObjects");m&&i.addObjects(m)},i.onceEventListener("click",n),i.getControls().onEditableObjectShapeTypeChanged(a)},getEditableObjectCoordinates:function(){return h.getEditableObjectProperties().coordinates},setEditableObjectCoordinates:function(a){a=_.map(a,function(a){return _.isFinite(a)&&(a=parseFloat(a.toFixed(8))),a});var b=h.getEditableObjectProperties();if(b.coordinates=a,l)if(_.isFunction(l.setPosition)){var d=a,f=e(d,2),g=f[0],j=f[1];l.setPosition({lat:g,lng:j})}else if(_.isFunction(l.setCoordinates))l.setCoordinates(a);else if(_.isFunction(l.setBounds)){var k=a,m=e(k,4),n=m[0],o=m[1],p=m[2],q=m[3];l.setBounds({left:o,bottom:p,right:q,top:n})}else if(_.isFunction(l.setRadius)){var r=a,s=e(r,3),t=s[0],u=s[1],v=s[2];l.setCenter({lat:t,lng:u}),l.setRadius(v)}var w=i.getControls();w.onEditableObjectCoordinatesChanged(a),w.onEditableObjectPropertyValidityChanged("coordinates",c("coordinates",a))},resetEditableObjectCoordinates:function(){var a=h.getEditableObjectProperties();if(a.coordinates=[],l){var b=l.getData("auxObjects");b&&i.removeObjects(b),i.removeObject(l),l=void 0}var c=i.getControls();c.onEditableObjectCoordinatesChanged([]),c.onEditableObjectPropertyValidityChanged("coordinates",{valid:!0});var d=h.getEditableObjectBufferDistance();d&&(c.onEditableObjectBufferDistanceChanged(d),c.onEditableObjectPropertyValidityChanged("bufferDistance",{valid:!0}))},setEditableObjectLatLng:function(a,c){var d=[a,c];l?h.setEditableObjectCoordinates(d):h.setEditableObject(b("POINT",d))},getEditableObjectBufferDistance:function(){var a=h.getEditableObjectProperties(),b=a.bufferDistances,c=h.getEditableObjectShapeType(),d=void 0;return b&&b[c]&&(d=b[c]),d},setEditableObjectBufferDistance:function(a){a=parseFloat(a.toFixed(8));var b=h.getEditableObjectProperties(),d=h.getEditableObjectShapeType();b.bufferDistances[d]=a,l&&"CIRCLE"===d&&l.setRadius(a);var e=i.getControls();e.onEditableObjectBufferDistanceChanged(a),e.onEditableObjectPropertyValidityChanged("bufferDistance",c("bufferDistance",a))},getEditableObjectName:function(){return h.getEditableObjectProperties().objectName},setEditableObjectName:function(a){var b=h.getEditableObjectProperties();b.objectName=a;var d=i.getControls();d.onEditableObjectNameChanged(a),d.onEditableObjectPropertyValidityChanged("objectName",c("objectName",a))},setEditableObjectConfigName:function(a){var b=h.getEditableObjectProperties();b.configName=a,i.getControls().onEditableObjectConfigNameChanged(a)},reset:function(){h.resetEditableObjectCoordinates(),n&&(i.removeEventListener("click",n),n=void 0)},destroy:function(){h.reset(),h.setEditableObjectType(void 0)}})});b["default"]=h,b.EditManager=h},function(a,b){"use strict";function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=stampit().init(function(a){var b=a.instance,d=void 0,e=void 0,f=[],g=[],h={routingType:"fastest",transportMode:"car",trafficMode:"default",features:{tollroad:0,motorway:0,boatFerry:0,tunnel:0,dirtRoad:0,park:0},path:[],line:void 0,legs:[],summary:{duration:NaN,distance:NaN},maneuvers:[]},i=void 0,j=void 0;_.assign(b,{getViewerModuleName:function(){return d.moduleName},setViewer:_.once(function(a){return d=a}),getRoutingControls:function(){return e},setRoutingControls:function(a){e=a},initRoutingEngine:_.once(function(){i=d.getRoutingEngineFactory().create({viewer:d,routingManager:b}),j=d.getLayerFactory().create({viewer:d}),d.addOverlay(j)}),getPlaces:function(){return f},addPlaces:function(a){f.push.apply(f,c(a)),e.onPlacesChanged(f)},clearPlaces:function(){var a;(a=_).pull.apply(a,[f].concat(f)),e.onPlacesChanged(f)},searchPlaces:function(a){return i.searchPlaces(a)},isWaypointValid:function(a){return Boolean(a&&_.isFinite(a.lat)&&_.isFinite(a.lng))},getValidWaypoints:function(){return _.filter(b.getWaypoints(),b.isWaypointValid)},getWaypoints:function(){return g},addWaypoint:function(a,c){var d=g.length,f=_.isFinite(c)?c:d;g.splice(f,0,a),a.pin=b.createWaypointPin(a),b.addWaypointPin(a.pin),b.updateWaypointLabels(),e.onWaypointAdded(a,f)},updateWaypoint:function(a,c){var d=_.assign(g[c],a);g.splice(c,1,d),b.updateWaypointPin(d),e.onWaypointChanged(d)},reorderWaypoint:function(a,c){var d=g.splice(a,1)[0];g.splice(c,0,d),b.updateWaypointLabels(),e.onWaypointReordered(d,c)},removeWaypoint:function(a){var c=g.splice(a,1)[0];b.removeWaypointPin(c.pin),b.updateWaypointLabels(),e.onWaypointRemoved(c)},updateWaypointLabels:function(){var a=g.length;_.forEach(g,function(c,d){0===d?c.label="A":d===a-1?c.label="B":c.label=d.toString(),b.updateWaypointPin(c)}),e.onWaypointsLabelChanged(g)},createWaypointPin:function(a){var c=void 0;if(b.isWaypointValid(a)){var e=a.lat,f=a.lng,g=a.label;c=d.getMapObjectFactory().create({viewer:d,objectModel:{shapeType:"marker",coordinates:[e,f],options:{label:g}}})}return c},addWaypointPin:function(a){a&&j.add(a)},updateWaypointPin:function(a){b.removeWaypointPin(a.pin),a.pin=b.createWaypointPin(a),b.addWaypointPin(a.pin)},removeWaypointPin:function(a){a&&j.remove(a)},getRoutingType:function(){return h.routingType},getTransportMode:function(){return h.transportMode},getTrafficMode:function(){return h.trafficMode},getRouteFeatures:function(){return h.features},setRouteFeatureAvoided:function(a,b){h.features[a]=b?-1:0,e.onRouteFeatureChanged(a,b)},routeExists:function(){return h.path.length>=2},canCalculateRoute:function(){return b.getValidWaypoints().length>=2},calculateRoute:function(){var a=$.Deferred(),c=a.promise();if(b.canCalculateRoute())c=i.calculateRoute();else{var d={path:[],legs:[],summary:{},maneuvers:[]};a.resolve(d)}return c},setRoutingResult:function(a){var c=a.path,d=a.legs,e=a.summary,f=a.maneuvers;b.setRoutePath(c),b.setRouteLegs(d),b.setRouteSummary(e),b.setRouteManeuvers(f)},setRoutePath:function(a){h.path=a,b.redrawRouteLine()},redrawRouteLine:function(){var a=d.getMapObjectFactory();if(b.clearRouteLine(),b.routeExists()){var c=a.create({viewer:d,objectModel:{shapeType:"line",coordinates:a.toCoordinates(h.path),options:{styleName:"routeLine"}}});h.line=c,j.add(c)}d.setBoundingBox(j.getBounds())},clearRouteLine:function(){var a=h.line;a&&(h.line=void 0,j.remove(a))},setRouteLegs:function(a){h.legs=a},setRouteSummary:function(a){h.summary=a,e.onRouteSummaryChanged(a)},setRouteManeuvers:function(a){h.maneuvers=a,e.onManeuversChanged(a)},getRouteDirections:function(){return{startingPoint:_.first(g).name,destination:_.last(g).name,maneuvers:h.maneuvers}},yieldSaveRouteRequestData:function(){var a={path:[],waypoints:[]};return b.routeExists()&&!function(){var c=h.path,d=h.legs,e=_.filter(g,b.isWaypointValid);_.assign(a,{path:_.map(c,function(a){return a.lat+","+a.lng}),waypoints:_.map(d,function(a,b){var c=e[b],d=c.name,f=c.domainObjectType,g=c.domainObjectId,h=a.firstPointIndex,i=a.length,j=a.traveltime;return{name:d,length:i,traveltime:j,domainObjectType:f||void 0,domainObjectId:g||void 0,index:h}})});var f=_.last(e),i=f.name,j=f.domainObjectType,k=f.domainObjectId;a.waypoints.push({name:i,domainObjectType:j||void 0,domainObjectId:k||void 0,index:c.length-1,length:0,traveltime:0})}(),a}})});b["default"]=d,b.RoutingManager=d},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=stampit().props({mapObject:void 0}).init(function(a){var b=a.instance,c=b.mapObject,d=void 0;_.assign(b,{getNativeObject:function(){return d},setMapObject:function(a){return c=b.mapObject=a,b},setText:function(a){return d.text(a),b},getPosition:function(){return d.data("position")},setPosition:function(a,c){return d.css({left:a,top:c}).data("position",{x:a,y:c}),b},shiftPosition:function(a,e){var f=d.data();if(f.shiftDirection=a,c){var g=c,h=g.viewer,i=g.getPosition,j=_.isFunction(i)?c.getPosition():c.getCenterBounds();f.origin=h.geoToPixel(j)}var k=f.origin,l=k.x,m=k.y,n=l,o=m,p=e||8,q={E:function(){return b.setPosition(n+p,o)}},r=q[a];if(!_.isFunction(r))throw new Error("Invalid direction: "+shapeType+".");return r(),b},updatePosition:function(){return b.shiftPosition(d.data("shiftDirection")),b},isWithinMapBounds:function(){var a=!1;if(c){var d=b.getPosition(),e=d.x,f=d.y,g=c.viewer.container[0],h=g.clientWidth,i=g.clientHeight;a=e>0&&f>0&&h>e&&i>f}return a},isVisible:function(){return d.data("visible")},setVisible:function(a){var e=d[0],f=e.parentNode;if(a&&c&&c.isVisible(!0)){var g=c,h=g.viewer;if(f=h.container[0],f.appendChild(e),h.isAutoLabelingActivated()&&!e.dimensionCached){var i=e.offsetWidth,j=e.offsetHeight;e.dimensionCached=!0,e.cachedWidth=i,e.cachedHeight=j}}else f&&f.removeChild(e);return d.data("visible",a),b},destroy:function(){d.remove()}}),d=$("<span>").addClass("label label-default").css({position:"absolute"}).text(c?c.getData("description"):"").data({origin:{x:0,y:0},position:{x:0,y:0},shiftDirection:"E",visible:!1}),b.shiftPosition(d.data("shiftDirection"))})["static"]({runAutomaticLabelPlacement:function(a){var b=function(a,b){var c=a.getNativeObject()[0],d=a.getPosition(),e=d.x,f=d.y,g=c.cachedWidth,h=c.cachedHeight,i=b.getNativeObject()[0],j=b.getPosition(),k=j.x,l=j.y,m=i.cachedWidth,n=i.cachedHeight;return k+m>e&&l+n>f&&e+g>k&&f+h>l},c=_(a).chain().orderBy(["mapObject.roamObject.id"],["desc"]).forEach(function(a){return a.setVisible(!1)}).filter(function(a){return a.mapObject.isWithinViewBounds()}).commit(),d=1/0;c.size().value()>d&&(c=c.sample(d).commit()),c.forEach(function(a){var d=c.every(function(c){var d=!1;return c!==a&&a.isWithinMapBounds()&&c.isVisible()&&(d=b(a,c)),!d}).value();d&&a.setVisible(!0)}).value()}});b["default"]=c,b.MapObjectLabel=c},function(a,b,c){(function(a){"use strict";if(c(226),c(227),a._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");a._babelPolyfill=!0}).call(b,function(){return this}())},function(a,b,c){"use strict";var d=c(21),e=c(32),f=c(10);a.exports=[].copyWithin||function(a,b){var c=d(this),g=f(c.length),h=e(a,g),i=e(b,g),j=arguments,k=j.length>2?j[2]:void 0,l=Math.min((void 0===k?g:e(k,g))-i,g-h),m=1;for(h>i&&i+l>h&&(m=-1,i+=l-1,h+=l-1);l-- >0;)i in c?c[h]=c[i]:delete c[h],h+=m,i+=m;return c}},function(a,b,c){"use strict";var d=c(21),e=c(32),f=c(10);a.exports=[].fill||function(a){for(var b=d(this),c=f(b.length),g=arguments,h=g.length,i=e(h>1?g[1]:void 0,c),j=h>2?g[2]:void 0,k=void 0===j?c:e(j,c);k>i;)b[i++]=a;return b}},function(a,b,c){"use strict";var d=c(3),e=c(49),f=c(5)("species");a.exports=function(a,b){var c;return e(a)&&(c=a.constructor,"function"!=typeof c||c!==Array&&!e(c.prototype)||(c=void 0),d(c)&&(c=c[f],null===c&&(c=void 0))),new(void 0===c?Array:c)(b)}},function(a,b,c){"use strict";var d=c(2);a.exports=function(a){var b=d.getKeys(a),c=d.getSymbols;if(c)for(var e,f=c(a),g=d.isEnum,h=0;f.length>h;)g.call(a,e=f[h++])&&b.push(e);return b}},function(a,b,c){"use strict";var d=c(2),e=c(14);a.exports=function(a,b){for(var c,f=e(a),g=d.getKeys(f),h=g.length,i=0;h>i;)if(f[c=g[i++]]===b)return c}},function(a,b,c){"use strict";var d,e,f,g=c(6),h=c(84).set,i=g.MutationObserver||g.WebKitMutationObserver,j=g.process,k=g.Promise,l="process"==c(19)(j),m=function(){var a,b,c;for(l&&(a=j.domain)&&(j.domain=null,a.exit());d;)b=d.domain,c=d.fn,b&&b.enter(),c(),b&&b.exit(),d=d.next;e=void 0,a&&a.enter()};if(l)f=function(){j.nextTick(m)};else if(i){var n=1,o=document.createTextNode("");new i(m).observe(o,{characterData:!0}),f=function(){o.data=n=-n}}else f=k&&k.resolve?function(){k.resolve().then(m)}:function(){h.call(g,m)};a.exports=function(a){var b={fn:a,next:void 0,domain:l&&j.domain};e&&(e.next=b),d||(d=b,f()),e=b}},function(a,b,c){"use strict";var d=c(2),e=c(21),f=c(43);a.exports=c(7)(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign},function(a,b,c){"use strict";var d=c(120),e=c(42),f=c(24);a.exports=function(){for(var a=f(this),b=arguments.length,c=Array(b),g=0,h=d._,i=!1;b>g;)(c[g]=arguments[g++])===h&&(i=!0);return function(){var d,f=this,g=arguments,j=g.length,k=0,l=0;if(!i&&!j)return e(a,c,f);if(d=c.slice(),i)for(;b>k;k++)d[k]===h&&(d[k]=g[l++]);for(;j>l;)d.push(g[l++]);return e(a,d,f)}}},function(a,b,c){"use strict";a.exports=c(6)},function(a,b){"use strict";a.exports=function(a,b){var c=b===Object(b)?function(a){return b[a]}:b;return function(b){return String(b).replace(a,c)}}},function(a,b,c){"use strict";var d=c(4),e=c(24),f=c(5)("species");a.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},function(a,b,c){"use strict";var d=c(3);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b,c){"use strict";var d,e=c(2),f=c(1),g=c(11),h=c(22),i=c(70),j=c(67),k=c(9),l=c(19),m=c(42),n=c(7),o=c(4),p=c(24),q=c(3),r=c(21),s=c(14),t=c(33),u=c(32),v=c(10),w=c(43),x=c(26)("__proto__"),y=c(38),z=c(63)(!1),A=Object.prototype,B=Array.prototype,C=B.slice,D=B.join,E=e.setDesc,F=e.getDesc,G=e.setDescs,H={};g||(d=!n(function(){return 7!=E(j("div"),"a",{get:function(){return 7}}).a}),e.setDesc=function(a,b,c){if(d)try{return E(a,b,c)}catch(e){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(o(a)[b]=c.value),a},e.getDesc=function(a,b){if(d)try{return F(a,b)}catch(c){}return k(a,b)?h(!A.propertyIsEnumerable.call(a,b),a[b]):void 0},e.setDescs=G=function(a,b){o(a);for(var c,d=e.getKeys(b),f=d.length,g=0;f>g;)e.setDesc(a,c=d[g++],b[c]);return a}),f(f.S+f.F*!g,"Object",{getOwnPropertyDescriptor:e.getDesc,defineProperty:e.setDesc,defineProperties:G});var I="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=I.concat("length","prototype"),K=I.length,L=function(){var a,b=j("iframe"),c=K,d=">";for(b.style.display="none",i.appendChild(b),b.src="javascript:",a=b.contentWindow.document,a.open(),a.write("<script>document.F=Object</script"+d),a.close(),L=a.F;c--;)delete L.prototype[I[c]];return L()},M=function(a,b){return function(c){var d,e=s(c),f=0,g=[];for(d in e)d!=x&&k(e,d)&&g.push(d);for(;b>f;)k(e,d=a[f++])&&(~z(g,d)||g.push(d));return g}},N=function(){};f(f.S,"Object",{getPrototypeOf:e.getProto=e.getProto||function(a){
return a=r(a),k(a,x)?a[x]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?A:null},getOwnPropertyNames:e.getNames=e.getNames||M(J,J.length,!0),create:e.create=e.create||function(a,b){var c;return null!==a?(N.prototype=o(a),c=new N,N.prototype=null,c[x]=a):c=L(),void 0===b?c:G(c,b)},keys:e.getKeys=e.getKeys||M(I,K,!1)});var O=function(a,b,c){if(!(b in H)){for(var d=[],e=0;b>e;e++)d[e]="a["+e+"]";H[b]=Function("F,a","return new F("+d.join(",")+")")}return H[b](a,c)};f(f.P,"Function",{bind:function(a){var b=p(this),c=C.call(arguments,1),d=function e(){var d=c.concat(C.call(arguments));return this instanceof e?O(b,d.length,d):m(b,d,a)};return q(b.prototype)&&(d.prototype=b.prototype),d}}),f(f.P+f.F*n(function(){i&&C.call(i)}),"Array",{slice:function(a,b){var c=v(this.length),d=l(this);if(b=void 0===b?c:b,"Array"==d)return C.call(this,a,b);for(var e=u(a,c),f=u(b,c),g=v(f-e),h=Array(g),i=0;g>i;i++)h[i]="String"==d?this.charAt(e+i):this[e+i];return h}}),f(f.P+f.F*(w!=Object),"Array",{join:function(a){return D.call(w(this),void 0===a?",":a)}}),f(f.S,"Array",{isArray:c(49)});var P=function(a){return function(b,c){p(b);var d=w(this),e=v(d.length),f=a?e-1:0,g=a?-1:1;if(arguments.length<2)for(;;){if(f in d){c=d[f],f+=g;break}if(f+=g,a?0>f:f>=e)throw TypeError("Reduce of empty array with no initial value")}for(;a?f>=0:e>f;f+=g)f in d&&(c=b(c,d[f],f,this));return c}},Q=function(a){return function(b){return a(this,b,arguments[1])}};f(f.P,"Array",{forEach:e.each=e.each||Q(y(0)),map:Q(y(1)),filter:Q(y(2)),some:Q(y(3)),every:Q(y(4)),reduce:P(!1),reduceRight:P(!0),indexOf:Q(z),lastIndexOf:function(a,b){var c=s(this),d=v(c.length),e=d-1;for(arguments.length>1&&(e=Math.min(e,t(b))),0>e&&(e=v(d+e));e>=0;e--)if(e in c&&c[e]===a)return e;return-1}}),f(f.S,"Date",{now:function(){return+new Date}});var R=function(a){return a>9?a:"0"+a};f(f.P+f.F*(n(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!n(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var a=this,b=a.getUTCFullYear(),c=a.getUTCMilliseconds(),d=0>b?"-":b>9999?"+":"";return d+("00000"+Math.abs(b)).slice(d?-6:-4)+"-"+R(a.getUTCMonth()+1)+"-"+R(a.getUTCDate())+"T"+R(a.getUTCHours())+":"+R(a.getUTCMinutes())+":"+R(a.getUTCSeconds())+"."+(c>99?c:"0"+R(c))+"Z"}})},function(a,b,c){"use strict";var d=c(1);d(d.P,"Array",{copyWithin:c(112)}),c(25)("copyWithin")},function(a,b,c){"use strict";var d=c(1);d(d.P,"Array",{fill:c(113)}),c(25)("fill")},function(a,b,c){"use strict";var d=c(1),e=c(38)(6),f="findIndex",g=!0;f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{findIndex:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),c(25)(f)},function(a,b,c){"use strict";var d=c(1),e=c(38)(5),f="find",g=!0;f in[]&&Array(1)[f](function(){g=!1}),d(d.P+d.F*g,"Array",{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),c(25)(f)},function(a,b,c){"use strict";var d=c(16),e=c(1),f=c(21),g=c(74),h=c(71),i=c(10),j=c(85);e(e.S+e.F*!c(51)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,k,l=f(a),m="function"==typeof this?this:Array,n=arguments,o=n.length,p=o>1?n[1]:void 0,q=void 0!==p,r=0,s=j(l);if(q&&(p=d(p,o>2?n[2]:void 0,2)),void 0==s||m==Array&&h(s))for(b=i(l.length),c=new m(b);b>r;r++)c[r]=q?p(l[r],r):l[r];else for(k=s.call(l),c=new m;!(e=k.next()).done;r++)c[r]=q?g(k,p,[e.value,r],!0):e.value;return c.length=r,c}})},function(a,b,c){"use strict";var d=c(1);d(d.S+d.F*c(7)(function(){function a(){}return!(Array.of.call(a)instanceof a)}),"Array",{of:function(){for(var a=0,b=arguments,c=b.length,d=new("function"==typeof this?this:Array)(c);c>a;)d[a]=b[a++];return d.length=c,d}})},function(a,b,c){"use strict";c(45)("Array")},function(a,b,c){"use strict";var d=c(2),e=c(3),f=c(5)("hasInstance"),g=Function.prototype;f in g||d.setDesc(g,f,{value:function(a){if("function"!=typeof this||!e(a))return!1;if(!e(this.prototype))return a instanceof this;for(;a=d.getProto(a);)if(this.prototype===a)return!0;return!1}})},function(a,b,c){"use strict";var d=c(2).setDesc,e=c(22),f=c(9),g=Function.prototype,h=/^\s*function ([^ (]*)/,i="name";i in g||c(11)&&d(g,i,{configurable:!0,get:function(){var a=(""+this).match(h),b=a?a[1]:"";return f(this,i)||d(this,i,e(5,b)),b}})},function(a,b,c){"use strict";var d=c(64);c(40)("Map",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){var b=d.getEntry(this,a);return b&&b.v},set:function(a,b){return d.def(this,0===a?0:a,b)}},d,!0)},function(a,b,c){"use strict";var d=c(1),e=c(77),f=Math.sqrt,g=Math.acosh;d(d.S+d.F*!(g&&710==Math.floor(g(Number.MAX_VALUE))),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:e(a-1+f(a-1)*f(a+1))}})},function(a,b,c){"use strict";function d(a){return isFinite(a=+a)&&0!=a?0>a?-d(-a):Math.log(a+Math.sqrt(a*a+1)):a}var e=c(1);e(e.S,"Math",{asinh:d})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}})},function(a,b,c){"use strict";var d=c(1),e=c(54);d(d.S,"Math",{cbrt:function(a){return e(a=+a)*Math.pow(Math.abs(a),1/3)}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{clz32:function(a){return(a>>>=0)?31-Math.floor(Math.log(a+.5)*Math.LOG2E):32}})},function(a,b,c){"use strict";var d=c(1),e=Math.exp;d(d.S,"Math",{cosh:function(a){return(e(a=+a)+e(-a))/2}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{expm1:c(53)})},function(a,b,c){"use strict";var d=c(1),e=c(54),f=Math.pow,g=f(2,-52),h=f(2,-23),i=f(2,127)*(2-h),j=f(2,-126),k=function(a){return a+1/g-1/g};d(d.S,"Math",{fround:function(a){var b,c,d=Math.abs(a),f=e(a);return j>d?f*k(d/j/h)*j*h:(b=(1+h/g)*d,c=b-(b-d),c>i||c!=c?f*(1/0):f*c)}})},function(a,b,c){"use strict";var d=c(1),e=Math.abs;d(d.S,"Math",{hypot:function(a,b){for(var c,d,f=0,g=0,h=arguments,i=h.length,j=0;i>g;)c=e(h[g++]),c>j?(d=j/c,f=f*d*d+1,j=c):c>0?(d=c/j,f+=d*d):f+=c;return j===1/0?1/0:j*Math.sqrt(f)}})},function(a,b,c){"use strict";var d=c(1),e=Math.imul;d(d.S+d.F*c(7)(function(){return-5!=e(4294967295,5)||2!=e.length}),"Math",{imul:function(a,b){var c=65535,d=+a,e=+b,f=c&d,g=c&e;return 0|f*g+((c&d>>>16)*g+f*(c&e>>>16)<<16>>>0)}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{log10:function(a){return Math.log(a)/Math.LN10}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{log1p:c(77)})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{log2:function(a){return Math.log(a)/Math.LN2}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{sign:c(54)})},function(a,b,c){"use strict";var d=c(1),e=c(53),f=Math.exp;d(d.S+d.F*c(7)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(a){return Math.abs(a=+a)<1?(e(a)-e(-a))/2:(f(a-1)-f(-a-1))*(Math.E/2)}})},function(a,b,c){"use strict";var d=c(1),e=c(53),f=Math.exp;d(d.S,"Math",{tanh:function(a){var b=e(a=+a),c=e(-a);return b==1/0?1:c==1/0?-1:(b-c)/(f(a)+f(-a))}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Math",{trunc:function(a){return(a>0?Math.floor:Math.ceil)(a)}})},function(a,b,c){"use strict";var d=c(2),e=c(6),f=c(9),g=c(19),h=c(123),i=c(7),j=c(47).trim,k="Number",l=e[k],m=l,n=l.prototype,o=g(d.create(n))==k,p="trim"in String.prototype,q=function(a){var b=h(a,!1);if("string"==typeof b&&b.length>2){b=p?b.trim():j(b,3);var c,d,e,f=b.charCodeAt(0);if(43===f||45===f){if(c=b.charCodeAt(2),88===c||120===c)return NaN}else if(48===f){switch(b.charCodeAt(1)){case 66:case 98:d=2,e=49;break;case 79:case 111:d=8,e=55;break;default:return+b}for(var g,i=b.slice(2),k=0,l=i.length;l>k;k++)if(g=i.charCodeAt(k),48>g||g>e)return NaN;return parseInt(i,d)}}return+b};l(" 0o1")&&l("0b1")&&!l("+0x1")||(l=function(a){var b=arguments.length<1?0:a,c=this;return c instanceof l&&(o?i(function(){n.valueOf.call(c)}):g(c)!=k)?new m(q(b)):q(b)},d.each.call(c(11)?d.getNames(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(a){f(m,a)&&!f(l,a)&&d.setDesc(l,a,d.getDesc(m,a))}),l.prototype=n,n.constructor=l,c(13)(e,k,l))},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{EPSILON:Math.pow(2,-52)})},function(a,b,c){"use strict";var d=c(1),e=c(6).isFinite;d(d.S,"Number",{isFinite:function(a){return"number"==typeof a&&e(a)}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{isInteger:c(72)})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{isNaN:function(a){return a!=a}})},function(a,b,c){"use strict";var d=c(1),e=c(72),f=Math.abs;d(d.S,"Number",{isSafeInteger:function(a){return e(a)&&f(a)<=9007199254740991}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{parseFloat:parseFloat})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Number",{parseInt:parseInt})},function(a,b,c){"use strict";var d=c(1);d(d.S+d.F,"Object",{assign:c(118)})},function(a,b,c){"use strict";var d=c(3);c(12)("freeze",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b,c){"use strict";var d=c(14);c(12)("getOwnPropertyDescriptor",function(a){return function(b,c){return a(d(b),c)}})},function(a,b,c){"use strict";c(12)("getOwnPropertyNames",function(){return c(69).get})},function(a,b,c){"use strict";var d=c(21);c(12)("getPrototypeOf",function(a){return function(b){return a(d(b))}})},function(a,b,c){"use strict";var d=c(3);c(12)("isExtensible",function(a){return function(b){return d(b)?a?a(b):!0:!1}})},function(a,b,c){"use strict";var d=c(3);c(12)("isFrozen",function(a){return function(b){return d(b)?a?a(b):!1:!0}})},function(a,b,c){"use strict";var d=c(3);c(12)("isSealed",function(a){return function(b){return d(b)?a?a(b):!1:!0}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Object",{is:c(80)})},function(a,b,c){"use strict";var d=c(21);c(12)("keys",function(a){return function(b){return a(d(b))}})},function(a,b,c){"use strict";var d=c(3);c(12)("preventExtensions",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b,c){"use strict";var d=c(3);c(12)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Object",{setPrototypeOf:c(55).set})},function(a,b,c){"use strict";var d=c(39),e={};e[c(5)("toStringTag")]="z",e+""!="[object z]"&&c(13)(Object.prototype,"toString",function(){return"[object "+d(this)+"]"},!0)},function(a,b,c){"use strict";var d,e=c(2),f=c(52),g=c(6),h=c(16),i=c(39),j=c(1),k=c(3),l=c(4),m=c(24),n=c(46),o=c(29),p=c(55).set,q=c(80),r=c(5)("species"),s=c(122),t=c(117),u="Promise",v=g.process,w="process"==i(v),x=g[u],y=function(a){var b=new x(function(){});return a&&(b.constructor=Object),x.resolve(b)===b},z=function(){function a(b){var c=new x(b);return p(c,a.prototype),c}var b=!1;try{if(b=x&&x.resolve&&y(),p(a,x),a.prototype=e.create(x.prototype,{constructor:{value:a}}),a.resolve(5).then(function(){})instanceof a||(b=!1),b&&c(11)){var d=!1;x.resolve(e.setDesc({},"then",{get:function(){d=!0}})),b=d}}catch(f){b=!1}return b}(),A=function(a,b){return f&&a===x&&b===d?!0:q(a,b)},B=function(a){var b=l(a)[r];return void 0!=b?b:a},C=function(a){var b;return k(a)&&"function"==typeof(b=a.then)?b:!1},D=function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=m(b),this.reject=m(c)},E=function(a){try{a()}catch(b){return{error:b}}},F=function(a,b){if(!a.n){a.n=!0;var c=a.c;t(function(){for(var d=a.v,e=1==a.s,f=0,h=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject;try{g?(e||(a.h=!0),c=g===!0?d:g(d),c===b.promise?i(TypeError("Promise-chain cycle")):(f=C(c))?f.call(c,h,i):h(c)):i(d)}catch(j){i(j)}};c.length>f;)h(c[f++]);c.length=0,a.n=!1,b&&setTimeout(function(){var b,c,e=a.p;G(e)&&(w?v.emit("unhandledRejection",d,e):(b=g.onunhandledrejection)?b({promise:e,reason:d}):(c=g.console)&&c.error&&c.error("Unhandled promise rejection",d)),a.a=void 0},1)})}},G=function J(a){var b,c=a._d,d=c.a||c.c,e=0;if(c.h)return!1;for(;d.length>e;)if(b=d[e++],b.fail||!J(b.promise))return!1;return!0},H=function(a){var b=this;b.d||(b.d=!0,b=b.r||b,b.v=a,b.s=2,b.a=b.c.slice(),F(b,!0))},I=function K(a){var b,c=this;if(!c.d){c.d=!0,c=c.r||c;try{if(c.p===a)throw TypeError("Promise can't be resolved itself");(b=C(a))?t(function(){var d={r:c,d:!1};try{b.call(a,h(K,d,1),h(H,d,1))}catch(e){H.call(d,e)}}):(c.v=a,c.s=1,F(c,!1))}catch(d){H.call({r:c,d:!1},d)}}};z||(x=function(a){m(a);var b=this._d={p:n(this,x,u),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{a(h(I,b,1),h(H,b,1))}catch(c){H.call(b,c)}},c(44)(x.prototype,{then:function(a,b){var c=new D(s(this,x)),d=c.promise,e=this._d;return c.ok="function"==typeof a?a:!0,c.fail="function"==typeof b&&b,e.c.push(c),e.a&&e.a.push(c),e.s&&F(e,!1),d},"catch":function(a){return this.then(void 0,a)}})),j(j.G+j.W+j.F*!z,{Promise:x}),c(31)(x,u),c(45)(u),d=c(20)[u],j(j.S+j.F*!z,u,{reject:function(a){var b=new D(this),c=b.reject;return c(a),b.promise}}),j(j.S+j.F*(!z||y(!0)),u,{resolve:function(a){if(a instanceof x&&A(a.constructor,this))return a;var b=new D(this),c=b.resolve;return c(a),b.promise}}),j(j.S+j.F*!(z&&c(51)(function(a){x.all(a)["catch"](function(){})})),u,{all:function(a){var b=B(this),c=new D(b),d=c.resolve,f=c.reject,g=[],h=E(function(){o(a,!1,g.push,g);var c=g.length,h=Array(c);c?e.each.call(g,function(a,e){var g=!1;b.resolve(a).then(function(a){g||(g=!0,h[e]=a,--c||d(h))},f)}):d(h)});return h&&f(h.error),c.promise},race:function(a){var b=B(this),c=new D(b),d=c.reject,e=E(function(){o(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e&&d(e.error),c.promise}})},function(a,b,c){"use strict";var d=c(1),e=Function.apply;d(d.S,"Reflect",{apply:function(a,b,c){return e.call(a,b,c)}})},function(a,b,c){"use strict";var d=c(2),e=c(1),f=c(24),g=c(4),h=c(3),i=Function.bind||c(20).Function.prototype.bind;e(e.S+e.F*c(7)(function(){function a(){}return!(Reflect.construct(function(){},[],a)instanceof a)}),"Reflect",{construct:function(a,b){f(a);var c=arguments.length<3?a:f(arguments[2]);if(a==c){if(void 0!=b)switch(g(b).length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3])}var e=[null];return e.push.apply(e,b),new(i.apply(a,e))}var j=c.prototype,k=d.create(h(j)?j:Object.prototype),l=Function.apply.call(a,k,b);return h(l)?l:k}})},function(a,b,c){"use strict";var d=c(2),e=c(1),f=c(4);e(e.S+e.F*c(7)(function(){Reflect.defineProperty(d.setDesc({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(a,b,c){f(a);try{return d.setDesc(a,b,c),!0}catch(e){return!1}}})},function(a,b,c){"use strict";var d=c(1),e=c(2).getDesc,f=c(4);d(d.S,"Reflect",{deleteProperty:function(a,b){var c=e(f(a),b);return c&&!c.configurable?!1:delete a[b]}})},function(a,b,c){"use strict";var d=c(1),e=c(4),f=function(a){this._t=e(a),this._i=0;var b,c=this._k=[];for(b in a)c.push(b)};c(75)(f,"Object",function(){var a,b=this,c=b._k;do if(b._i>=c.length)return{value:void 0,done:!0};while(!((a=c[b._i++])in b._t));return{value:a,done:!1}}),d(d.S,"Reflect",{enumerate:function(a){return new f(a)}})},function(a,b,c){"use strict";var d=c(2),e=c(1),f=c(4);e(e.S,"Reflect",{getOwnPropertyDescriptor:function(a,b){return d.getDesc(f(a),b)}})},function(a,b,c){"use strict";var d=c(1),e=c(2).getProto,f=c(4);d(d.S,"Reflect",{getPrototypeOf:function(a){return e(f(a))}})},function(a,b,c){"use strict";function d(a,b){var c,g,j=arguments.length<3?a:arguments[2];return i(a)===j?a[b]:(c=e.getDesc(a,b))?f(c,"value")?c.value:void 0!==c.get?c.get.call(j):void 0:h(g=e.getProto(a))?d(g,b,j):void 0}var e=c(2),f=c(9),g=c(1),h=c(3),i=c(4);g(g.S,"Reflect",{get:d})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Reflect",{has:function(a,b){return b in a}})},function(a,b,c){"use strict";var d=c(1),e=c(4),f=Object.isExtensible;d(d.S,"Reflect",{isExtensible:function(a){return e(a),f?f(a):!0}})},function(a,b,c){"use strict";var d=c(1);d(d.S,"Reflect",{ownKeys:c(79)})},function(a,b,c){"use strict";var d=c(1),e=c(4),f=Object.preventExtensions;d(d.S,"Reflect",{preventExtensions:function(a){e(a);try{return f&&f(a),!0}catch(b){return!1}}})},function(a,b,c){"use strict";var d=c(1),e=c(55);e&&d(d.S,"Reflect",{setPrototypeOf:function(a,b){e.check(a,b);try{return e.set(a,b),!0}catch(c){return!1}}})},function(a,b,c){"use strict";function d(a,b,c){var g,k,l=arguments.length<4?a:arguments[3],m=e.getDesc(i(a),b);if(!m){if(j(k=e.getProto(a)))return d(k,b,c,l);m=h(0)}return f(m,"value")?m.writable!==!1&&j(l)?(g=e.getDesc(l,b)||h(0),g.value=c,e.setDesc(l,b,g),!0):!1:void 0===m.set?!1:(m.set.call(l,c),!0)}var e=c(2),f=c(9),g=c(1),h=c(22),i=c(4),j=c(3);g(g.S,"Reflect",{set:d})},function(a,b,c){"use strict";var d=c(2),e=c(6),f=c(73),g=c(68),h=e.RegExp,i=h,j=h.prototype,k=/a/g,l=/a/g,m=new h(k)!==k;!c(11)||m&&!c(7)(function(){return l[c(5)("match")]=!1,h(k)!=k||h(l)==l||"/a/i"!=h(k,"i")})||(h=function(a,b){var c=f(a),d=void 0===b;return this instanceof h||!c||a.constructor!==h||!d?m?new i(c&&!d?a.source:a,b):i((c=a instanceof h)?a.source:a,c&&d?g.call(a):b):a},d.each.call(d.getNames(i),function(a){a in h||d.setDesc(h,a,{configurable:!0,get:function(){return i[a]},set:function(b){i[a]=b}})}),j.constructor=h,h.prototype=j,c(13)(e,"RegExp",h)),c(45)("RegExp")},function(a,b,c){"use strict";var d=c(2);c(11)&&"g"!=/./g.flags&&d.setDesc(RegExp.prototype,"flags",{configurable:!0,get:c(68)})},function(a,b,c){"use strict";c(41)("match",1,function(a,b){return function(c){var d=a(this),e=void 0==c?void 0:c[b];return void 0!==e?e.call(c,d):new RegExp(c)[b](String(d))}})},function(a,b,c){"use strict";c(41)("replace",2,function(a,b,c){return function(d,e){var f=a(this),g=void 0==d?void 0:d[b];return void 0!==g?g.call(d,f,e):c.call(String(f),d,e)}})},function(a,b,c){"use strict";c(41)("search",1,function(a,b){return function(c){var d=a(this),e=void 0==c?void 0:c[b];return void 0!==e?e.call(c,d):new RegExp(c)[b](String(d))}})},function(a,b,c){"use strict";c(41)("split",2,function(a,b,c){return function(d,e){var f=a(this),g=void 0==d?void 0:d[b];return void 0!==g?g.call(d,f,e):c.call(String(f),d,e)}})},function(a,b,c){"use strict";var d=c(64);c(40)("Set",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(this,a=0===a?0:a,a)}},d)},function(a,b,c){"use strict";var d=c(1),e=c(56)(!1);d(d.P,"String",{codePointAt:function(a){return e(this,a)}})},function(a,b,c){"use strict";var d=c(1),e=c(10),f=c(57),g="endsWith",h=""[g];d(d.P+d.F*c(48)(g),"String",{endsWith:function(a){var b=f(this,a,g),c=arguments,d=c.length>1?c[1]:void 0,i=e(b.length),j=void 0===d?i:Math.min(e(d),i),k=String(a);return h?h.call(b,k,j):b.slice(j-k.length,j)===k}})},function(a,b,c){"use strict";var d=c(1),e=c(32),f=String.fromCharCode,g=String.fromCodePoint;d(d.S+d.F*(!!g&&1!=g.length),"String",{fromCodePoint:function(a){for(var b,c=[],d=arguments,g=d.length,h=0;g>h;){if(b=+d[h++],e(b,1114111)!==b)throw RangeError(b+" is not a valid code point");c.push(65536>b?f(b):f(((b-=65536)>>10)+55296,b%1024+56320))}return c.join("")}})},function(a,b,c){"use strict";var d=c(1),e=c(57),f="includes";d(d.P+d.F*c(48)(f),"String",{includes:function(a){return!!~e(this,a,f).indexOf(a,arguments.length>1?arguments[1]:void 0)}})},function(a,b,c){"use strict";var d=c(56)(!0);c(50)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(a,b,c){"use strict";var d=c(1),e=c(14),f=c(10);d(d.S,"String",{raw:function(a){for(var b=e(a.raw),c=f(b.length),d=arguments,g=d.length,h=[],i=0;c>i;)h.push(String(b[i++])),g>i&&h.push(String(d[i]));return h.join("")}})},function(a,b,c){"use strict";var d=c(1);d(d.P,"String",{repeat:c(83)})},function(a,b,c){"use strict";var d=c(1),e=c(10),f=c(57),g="startsWith",h=""[g];d(d.P+d.F*c(48)(g),"String",{startsWith:function(a){var b=f(this,a,g),c=arguments,d=e(Math.min(c.length>1?c[1]:void 0,b.length)),i=String(a);return h?h.call(b,i,d):b.slice(d,d+i.length)===i}})},function(a,b,c){"use strict";c(47)("trim",function(a){return function(){return a(this,3)}})},function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=c(2),f=c(6),g=c(9),h=c(11),i=c(1),j=c(13),k=c(7),l=c(81),m=c(31),n=c(26),o=c(5),p=c(116),q=c(69),r=c(115),s=c(49),t=c(4),u=c(14),v=c(22),w=e.getDesc,x=e.setDesc,y=e.create,z=q.get,A=f.Symbol,B=f.JSON,C=B&&B.stringify,D=!1,E=o("_hidden"),F=e.isEnum,G=l("symbol-registry"),H=l("symbols"),I="function"==typeof A,J=Object.prototype,K=h&&k(function(){return 7!=y(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=w(J,b);d&&delete J[b],x(a,b,c),d&&a!==J&&x(J,b,d)}:x,L=function(a){var b=H[a]=y(A.prototype);return b._k=a,h&&D&&K(J,a,{configurable:!0,set:function(b){g(this,E)&&g(this[E],a)&&(this[E][a]=!1),K(this,a,v(1,b))}}),b},M=function(a){return"symbol"==("undefined"==typeof a?"undefined":d(a))},N=function(a,b,c){return c&&g(H,b)?(c.enumerable?(g(a,E)&&a[E][b]&&(a[E][b]=!1),c=y(c,{enumerable:v(0,!1)})):(g(a,E)||x(a,E,v(1,{})),a[E][b]=!0),K(a,b,c)):x(a,b,c)},O=function(a,b){t(a);for(var c,d=r(b=u(b)),e=0,f=d.length;f>e;)N(a,c=d[e++],b[c]);return a},P=function(a,b){return void 0===b?y(a):O(y(a),b)},Q=function(a){var b=F.call(this,a);return b||!g(this,a)||!g(H,a)||g(this,E)&&this[E][a]?b:!0},R=function(a,b){var c=w(a=u(a),b);return!c||!g(H,b)||g(a,E)&&a[E][b]||(c.enumerable=!0),c},S=function(a){for(var b,c=z(u(a)),d=[],e=0;c.length>e;)g(H,b=c[e++])||b==E||d.push(b);return d},T=function(a){for(var b,c=z(u(a)),d=[],e=0;c.length>e;)g(H,b=c[e++])&&d.push(H[b]);return d},U=function(a){if(void 0!==a&&!M(a)){for(var b,c,d=[a],e=1,f=arguments;f.length>e;)d.push(f[e++]);return b=d[1],"function"==typeof b&&(c=b),!c&&s(b)||(b=function(a,b){return c&&(b=c.call(this,a,b)),M(b)?void 0:b}),d[1]=b,C.apply(B,d)}},V=k(function(){var a=A();return"[null]"!=C([a])||"{}"!=C({a:a})||"{}"!=C(Object(a))});I||(A=function(){if(M(this))throw TypeError("Symbol is not a constructor");return L(n(arguments.length>0?arguments[0]:void 0))},j(A.prototype,"toString",function(){return this._k}),M=function(a){return a instanceof A},e.create=P,e.isEnum=Q,e.getDesc=R,e.setDesc=N,e.setDescs=O,e.getNames=q.get=S,e.getSymbols=T,h&&!c(52)&&j(J,"propertyIsEnumerable",Q,!0));var W={"for":function(a){return g(G,a+="")?G[a]:G[a]=A(a)},keyFor:function(a){return p(G,a)},useSetter:function(){D=!0},useSimple:function(){D=!1}};e.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(a){var b=o(a);W[a]=I?b:L(b)}),D=!0,i(i.G+i.W,{Symbol:A}),i(i.S,"Symbol",W),i(i.S+i.F*!I,"Object",{create:P,defineProperty:N,defineProperties:O,getOwnPropertyDescriptor:R,getOwnPropertyNames:S,getOwnPropertySymbols:T}),B&&i(i.S+i.F*(!I||V),"JSON",{stringify:U}),m(A,"Symbol"),m(Math,"Math",!0),m(f.JSON,"JSON",!0)},function(a,b,c){"use strict";var d=c(2),e=c(13),f=c(66),g=c(3),h=c(9),i=f.frozenStore,j=f.WEAK,k=Object.isExtensible||g,l={},m=c(40)("WeakMap",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{get:function(a){if(g(a)){if(!k(a))return i(this).get(a);if(h(a,j))return a[j][this._i]}},set:function(a,b){return f.def(this,a,b)}},f,!0,!0);7!=(new m).set((Object.freeze||Object)(l),7).get(l)&&d.each.call(["delete","has","get","set"],function(a){var b=m.prototype,c=b[a];e(b,a,function(b,d){if(g(b)&&!k(b)){var e=i(this)[a](b,d);return"set"==a?this:e}return c.call(this,b,d)})})},function(a,b,c){"use strict";var d=c(66);c(40)("WeakSet",function(a){return function(){return a(this,arguments.length>0?arguments[0]:void 0)}},{add:function(a){return d.def(this,a,!0)}},d,!1,!0)},function(a,b,c){"use strict";var d=c(1),e=c(63)(!0);d(d.P,"Array",{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),c(25)("includes")},function(a,b,c){"use strict";var d=c(1);d(d.P,"Map",{toJSON:c(65)("Map")})},function(a,b,c){"use strict";var d=c(1),e=c(78)(!0);d(d.S,"Object",{entries:function(a){return e(a)}})},function(a,b,c){"use strict";var d=c(2),e=c(1),f=c(79),g=c(14),h=c(22);e(e.S,"Object",{getOwnPropertyDescriptors:function(a){for(var b,c,e=g(a),i=d.setDesc,j=d.getDesc,k=f(e),l={},m=0;k.length>m;)c=j(e,b=k[m++]),b in l?i(l,b,h(0,c)):l[b]=c;return l}})},function(a,b,c){"use strict";var d=c(1),e=c(78)(!1);d(d.S,"Object",{values:function(a){return e(a)}})},function(a,b,c){"use strict";var d=c(1),e=c(121)(/[\\^$*+?.()|[\]{}]/g,"\\$&");d(d.S,"RegExp",{escape:function(a){return e(a)}})},function(a,b,c){"use strict";var d=c(1);d(d.P,"Set",{toJSON:c(65)("Set")})},function(a,b,c){"use strict";var d=c(1),e=c(56)(!0);d(d.P,"String",{at:function(a){return e(this,a)}})},function(a,b,c){"use strict";var d=c(1),e=c(82);d(d.P,"String",{padLeft:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0,!0)}})},function(a,b,c){"use strict";var d=c(1),e=c(82);d(d.P,"String",{padRight:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0,!1)}})},function(a,b,c){"use strict";c(47)("trimLeft",function(a){return function(){return a(this,1)}})},function(a,b,c){"use strict";c(47)("trimRight",function(a){return function(){return a(this,2)}})},function(a,b,c){"use strict";var d=c(2),e=c(1),f=c(16),g=c(20).Array||Array,h={},i=function(a,b){d.each.call(a.split(","),function(a){void 0==b&&a in g?h[a]=g[a]:a in[]&&(h[a]=f(Function.call,[][a],b))})};i("pop,reverse,shift,keys,values,entries",1),i("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),i("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),e(e.S,"Array",h)},function(a,b,c){"use strict";c(86);var d=c(6),e=c(18),f=c(30),g=c(5)("iterator"),h=d.NodeList,i=d.HTMLCollection,j=h&&h.prototype,k=i&&i.prototype,l=f.NodeList=f.HTMLCollection=f.Array;j&&!j[g]&&e(j,g,l),k&&!k[g]&&e(k,g,l)},function(a,b,c){"use strict";var d=c(1),e=c(84);d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},function(a,b,c){"use strict";var d=c(6),e=c(1),f=c(42),g=c(119),h=d.navigator,i=!!h&&/MSIE .\./.test(h.userAgent),j=function(a){return i?function(b,c){return a(f(g,[].slice.call(arguments,2),"function"==typeof b?b:Function(b)),c)}:a};e(e.G+e.B+e.F*i,{setTimeout:j(d.setTimeout),setInterval:j(d.setInterval)})},function(a,b,c){"use strict";c(124),c(207),c(162),c(170),c(174),c(175),c(163),c(173),c(172),c(168),c(169),c(167),c(164),c(166),c(171),c(165),c(133),c(132),c(152),c(153),c(154),c(155),c(156),c(157),c(158),c(159),c(160),c(161),c(135),c(136),c(137),c(138),c(139),c(140),c(141),c(142),c(143),c(144),c(145),c(146),c(147),c(148),c(149),c(150),c(151),c(200),c(203),c(206),c(202),c(198),c(199),c(201),c(204),c(205),c(129),c(130),c(86),c(131),c(125),c(126),c(128),c(127),c(191),c(192),c(193),c(194),c(195),c(196),c(176),c(134),c(197),c(208),c(209),c(177),c(178),c(179),c(180),c(181),c(184),c(182),c(183),c(185),c(186),c(187),c(188),c(190),c(189),c(210),c(217),c(218),c(219),c(220),c(221),c(215),c(213),c(214),c(212),c(211),c(216),c(222),c(225),c(224),c(223),a.exports=c(20)},function(a,b,c){(function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){function e(a,b,c,d){var e=Object.create((b||g).prototype),f=new p(d||[]);return e._invoke=m(a,c,f),e}function f(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(d){return{type:"throw",arg:d}}}function g(){}function h(){}function i(){}function j(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function k(a){this.arg=a}function l(a){function b(b,c){var d=a[b](c),e=d.value;return e instanceof k?Promise.resolve(e.arg).then(g,h):Promise.resolve(e).then(function(a){return d.value=a,d})}function e(a,c){function d(){return b(a,c)}return f=f?f.then(d,d):new Promise(function(a){a(d())})}"object"===("undefined"==typeof c?"undefined":d(c))&&c.domain&&(b=c.domain.bind(b));var f,g=b.bind(a,"next"),h=b.bind(a,"throw");b.bind(a,"return"),this._invoke=e}function m(a,b,c){var d=x;return function(e,g){if(d===z)throw new Error("Generator is already running");if(d===A){if("throw"===e)throw g;return r()}for(;;){var h=c.delegate;if(h){if("return"===e||"throw"===e&&h.iterator[e]===s){c.delegate=null;var i=h.iterator["return"];if(i){var j=f(i,h.iterator,g);if("throw"===j.type){e="throw",g=j.arg;continue}}if("return"===e)continue}var j=f(h.iterator[e],h.iterator,g);if("throw"===j.type){c.delegate=null,e="throw",g=j.arg;continue}e="next",g=s;var k=j.arg;if(!k.done)return d=y,k;c[h.resultName]=k.value,c.next=h.nextLoc,c.delegate=null}if("next"===e)c._sent=g,d===y?c.sent=g:c.sent=s;else if("throw"===e){if(d===x)throw d=A,g;c.dispatchException(g)&&(e="next",g=s)}else"return"===e&&c.abrupt("return",g);d=z;var j=f(a,b,c);if("normal"===j.type){d=c.done?A:y;var k={value:j.arg,done:c.done};if(j.arg!==B)return k;c.delegate&&"next"===e&&(g=s)}else"throw"===j.type&&(d=A,e="throw",g=j.arg)}}}function n(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function o(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function p(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(n,this),this.reset(!0)}function q(a){if(a){var b=a[u];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function e(){for(;++c<a.length;)if(t.call(a,c))return e.value=a[c],e.done=!1,e;return e.value=s,e.done=!0,e};return d.next=d}}return{next:r}}function r(){return{value:s,done:!0}}var s,t=Object.prototype.hasOwnProperty,u="function"==typeof Symbol&&Symbol.iterator||"@@iterator",v="object"===d(b),w=a.regeneratorRuntime;if(w)return void(v&&(b.exports=w));w=a.regeneratorRuntime=v?b.exports:{},w.wrap=e;var x="suspendedStart",y="suspendedYield",z="executing",A="completed",B={},C=i.prototype=g.prototype;h.prototype=C.constructor=i,i.constructor=h,h.displayName="GeneratorFunction",w.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return b?b===h||"GeneratorFunction"===(b.displayName||b.name):!1},w.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,i):a.__proto__=i,a.prototype=Object.create(C),a},w.awrap=function(a){return new k(a)},j(l.prototype),w.async=function(a,b,c,d){var f=new l(e(a,b,c,d));return w.isGeneratorFunction(b)?f:f.next().then(function(a){return a.done?a.value:f.next()})},j(C),C[u]=function(){return this},C.toString=function(){return"[object Generator]"},w.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function d(){for(;b.length;){var c=b.pop();if(c in a)return d.value=c,d.done=!1,d}return d.done=!0,d}},w.values=q,p.prototype={constructor:p,reset:function(a){if(this.prev=0,this.next=0,this.sent=s,this.done=!1,this.delegate=null,this.tryEntries.forEach(o),!a)for(var b in this)"t"===b.charAt(0)&&t.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=s)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=t.call(e,"catchLoc"),h=t.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);
}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&t.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?this.next=e.finallyLoc:this.complete(f),B},complete:function(a,b){if("throw"===a.type)throw a.arg;"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=a.arg,this.next="end"):"normal"===a.type&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),o(c),B}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;o(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:q(a),resultName:b,nextLoc:c},B}}}("object"===("undefined"==typeof a?"undefined":d(a))?a:"object"===("undefined"==typeof window?"undefined":d(window))?window:"object"===("undefined"==typeof self?"undefined":d(self))?self:void 0)}).call(b,function(){return this}(),c(237)(a),c(229))},,function(a,b){"use strict";function c(){l&&j&&(l=!1,j.length?k=j.concat(k):m=-1,k.length&&d())}function d(){if(!l){var a=g(c);l=!0;for(var b=k.length;b;){for(j=k,k=[];++m<b;)j&&j[m].run();m=-1,b=k.length}j=null,l=!1,h(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h,i=a.exports={};!function(){try{g=setTimeout}catch(a){g=function(){throw new Error("setTimeout is not defined")}}try{h=clearTimeout}catch(a){h=function(){throw new Error("clearTimeout is not defined")}}}();var j,k=[],l=!1,m=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];k.push(new e(a,b)),1!==k.length||l||g(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,,,,,function(a,b){"use strict";a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},,function(a,b){a.exports='<ul class=mc-panelbar> <li class="mc-panel mc-panel-mapview"> <span class="mc-icon mc-icon-panel mc-icon-mapview"></span> <span class=mc-panel-name data-phrase="Map View">Map View</span> <ul class=mc-panelbar> <li class="mc-panel mc-panel-viewbehavior k-state-active"> <span class="mc-icon mc-icon-panel mc-icon-viewbehavior"></span> <span class=mc-panel-name data-phrase="View Behavior">View Behavior</span> <div class=mc-panel-body> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=auto-refresh /> <span class=checkbox-name data-phrase="Auto Refresh">Auto Refresh</span> </label> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=auto-focus /> <span class=checkbox-name data-phrase="Auto Focus">Auto Focus</span> </label> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=auto-labeling /> <span class=checkbox-name data-phrase="Auto Labeling">Auto Labeling</span> </label> </div> <div class=text-right> <button class=k-button name=save-viewport data-phrase="Save View">Save View</button> <button class=k-button name=restore-viewport data-phrase="Restore View">Restore View</button> </div> </div> </li> <li class="mc-panel mc-panel-viewarea"> <span class="mc-icon mc-icon-panel mc-icon-viewarea"></span> <span class=mc-panel-name data-phrase="Map Area">Map Area</span> <div class=mc-panel-body> <div class=mc-control-group> <label><span data-phrase=Scale>Scale</span>:</label> <select name=zoom-to-scale> <option value=-1 data-phrase="Choose zoom scale">Choose zoom scale</option> <option value=50000>1 : 50000</option> <option value=100000>1 : 100000</option> <option value=500000>1 : 500000</option> <option value=1000000>1 : 1000000</option> <option value=1000000000 data-phrase=World>World</option> </select> </div> <div class=mc-control-group> <label><span data-phrase="Zoom level">Zoom level</span>:</label> <select name=zoom-to-level> <option value=-1 data-phrase="Choose zoom level">Choose zoom level</option> <option value=18 data-phrase=Street>Street</option> <option value=14 data-phrase=Town>Town</option> <option value=8 data-phrase=Region>Region</option> <option value=4 data-phrase=Country>Country</option> <option value=2 data-phrase=Continent>Continent</option> <option value=1 data-phrase=World>World</option> </select> </div> <div class="mc-control-group hidden"> <form> <fieldset disabled=disabled> <div class="form-group form-group-sm"> <label><span data-phrase=Region>Region</span>:</label> <select name=zoom-to-region> <option value=-1:-1:-1 data-phrase="Choose zoom region">Choose zoom region</option> <option value=-180,-90,180,90 data-phrase=World>World</option> <option value=-40.96,-34.16,79.63,39.23 data-phrase=Africa>Africa</option> <option value=43.12,-14.86,163.70,53.80 data-phrase=Asia>Asia</option> <option value=-45.97,25.48,74.62,71.97 data-phrase=Europe>Europe</option> <option value=-172.00,12.73,-51.42,67.27 data-phrase="North America">North America</option> <option value=-121.90,-52.27,-1.32,17.31 data-phrase="South America">South America</option> <option value=97.646,-53.12,218.23,15.96 data-phrase=Oceania>Oceania</option> </select> </div> <button type=button class=k-button name=save-region data-phrase="Save Region">Save Region</button> </fieldset> </form> </div> </div> </li> </ul> </li> <li class="mc-panel mc-panel-intervals"> <span class="mc-icon mc-icon-panel mc-icon-intervals"></span> <span class=mc-panel-name data-phrase=Intervals>Intervals</span> <div class=mc-panel-body> <form> <fieldset> <div class="form-group radio"> <label> <input type=radio name=history-mode value=CURRENT checked=checked /> <span class=radio-name data-phrase="All (Latest)">All (Latest)</span> </label> </div> <div class="form-group radio"> <label> <input type=radio name=history-mode value=INTERVAL /> <span class=radio-name data-phrase=Interval>Interval</span> </label> </div> <div class=mc-control-group> <div class="panel panel-default"> <div class=panel-heading data-phrase="Interval selection"> Interval selection </div> <fieldset class=panel-fieldset name=interval-selection disabled=disabled> <div class="form-group form-group-sm"> <label><span data-phrase=Presets>Presets</span>:</label> <select name=preset-intervals> <option value=- data-phrase="Choose interval">Choose interval</option> <option value=TODAY data-phrase=Today>Today</option> <option value=YESTERDAY data-phrase=Yesterday>Yesterday</option> <option value=LAST_24H data-phrase="Last 24 Hours" selected=selected>Last 24 Hours</option> <option value=LAST_48H data-phrase="Last 48 Hours">Last 48 Hours</option> </select> </div> <div class="form-group form-group-sm"> <label><span data-phrase=From>From</span>:</label> <input class=datetime-picker name=datetime-from value="1970-01-01 00:00 AM"/> </div> <div class="form-group form-group-sm"> <label><span data-phrase=To>To</span>:</label> <input class=datetime-picker name=datetime-to value="1970-01-01 01:00 AM"/> </div> </fieldset> </div> </div> <div class=text-right> <button type=button class=k-button name=fetch-positions title="Shows the positions for the selected time" data-toggle=tooltip data-phrase="Fetch Positions"> Fetch Positions </button> </div> </fieldset> </form> </div> </li> <li class="mc-panel mc-panel-navigation k-state-active"> <span class="mc-icon mc-icon-panel mc-icon-navigation"></span> <span class=mc-panel-name data-phrase=Navigation>Navigation</span> <span class="badge position-count">0</span> <div class=mc-panel-body> <div class="mc-control-group scrollable"> <div class="list-group position-list"></div> </div> <div class="mc-control-group scrollable scrollable-sm hidden"> <div class="object-tree position-tree">Positions Tree</div> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=positions-visibility /> <span class=checkbox-name data-phrase="Show/Hide all">Show/Hide all</span> </label> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=asset-labels /> <span class=checkbox-name data-phrase="Show Asset Labels">Show Asset Labels</span> </label> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=use-clusters disabled=disabled /> <span class=checkbox-name data-phrase="Use Clusters">Use Clusters</span> </label> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox name=positions-connector disabled=disabled /> <span class=checkbox-name data-phrase="Connect History Positions">Connect History Positions</span> </label> </div> <div class=mc-control-group> <label class="status-filters-container hidden"> <span class=status-filters-name data-phrase="Asset status filters">Asset status filters</span>: <select multiple=multiple name=status-filters data-placeholder="Select filters..."> </select> </label> </div> <div class=text-right> <button class=k-button name=animation data-phrase="Activate Animation Panel" disabled=disabled> Activate Animation Panel </button> </div> </div> </li> <li class="mc-panel mc-panel-animation hidden"> <span class="mc-icon mc-icon-panel mc-icon-animation"></span> <span class=mc-panel-name data-phrase=Animation>Animation</span> <div class=mc-panel-body> <div class=mc-control-group> <span class="label label-primary animation-label"> <span class=step-current>${stepCurrent}</span> / <span class=step-max>${stepMax}</span> </span> </div> <div class="mc-control-group text-center"> <span class=animation-info> <span class=event-time>${eventTime}</span> <span class=event-name>${eventName}</span> </span> </div> <div class="mc-control-group text-center"> <button class="btn btn-warning btn-xs btn-animation" name=animation-pause> <span class="glyphicon glyphicon-pause"></span> </button> <button class="btn btn-danger btn-xs btn-animation" name=animation-stop> <span class="glyphicon glyphicon-stop"></span> </button> <button class="btn btn-success btn-xs btn-animation" name=animation-play> <span class="glyphicon glyphicon-play"></span> </button> </div> <div class="mc-control-group text-center animation-slider-container"> <input name=animation-slider /> </div> <div class=mc-control-group> <label><span data-phrase="Animation Speed">Animation Speed</span>:</label> <select name=animation-speed> <option value=1 data-phrase=Slow>Slow</option> <option value=0.5 data-phrase=Medium selected=selected>Medium</option> <option value=0.2 data-phrase=Fast>Fast</option> </select> </div> <div class=mc-control-group> <label><span data-phrase="Trail Length">Trail Length</span>:</label> <select name=trail-length> <option value=1>1</option> <option value=3 selected=selected>3</option> <option value=5>5</option> <option value=7>7</option> <option value=11>11</option> </select> </div> </div> </li> <li class="mc-panel mc-panel-locations"> <span class="mc-icon mc-icon-panel mc-icon-locations"></span> <span class=mc-panel-name data-phrase=Locations>Locations</span> <span class="badge location-count">0</span> <div class=mc-panel-body> <div class="mc-control-group scrollable scrollable-sm"> <div class="object-tree location-tree">Locations Tree</div> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox class=toggle-labels name=location-labels /> <span class=checkbox-name data-phrase="Show Location Labels">Show Location Labels</span> </label> </div> <div class=mc-control-group> <div class="text-right editmode-activator"> <button type=button class=k-button name=location-editmode-activator data-phrase="Create Location"> Create Location </button> </div> <div class="panel panel-default object-editor location-editor hidden" data-objecttype=location> <div class="panel-heading form-name" data-phrase="Create Location"> Create Location </div> <form> <fieldset class="panel-fieldset editor-fieldset" disabled=disabled> <div class="form-group form-group-sm"> <label class=control-label data-phrase=Coordinates>Coordinates</label> <input type=text class="form-control editableobject-coordinates" name=location-coordinates placeholder="Enter (latitude, longitude)" title="Or click any position on the map." data-toggle=tooltip data-placement=bottom /> <span class="help-block hidden">Or click any position on the map.</span> <div class="alert alert-danger invalid-block invalid-coordinates hidden"> <span class="glyphicon glyphicon-exclamation-sign"></span> <span class=invalid-text>Latitude must be in the range of -90 to +90, and longitude must be in the range of -180 to 180.</span> </div> </div> <div class="form-group form-group-sm"> <label class=control-label data-phrase=Name>Name</label> <input type=text class="form-control editableobject-objectname" name=location-objectname placeholder="Enter name"/> <div class="alert alert-danger invalid-block invalid-objectname hidden"> <span class="glyphicon glyphicon-exclamation-sign"></span> <span class=invalid-text>Object name must have at least 3 characters.</span> </div> </div> <div class="form-group form-group-sm"> <label class=control-label data-phrase=Config>Config</label> <select class=editableobject-configname name=location-configname></select> </div> <div class=text-right> <button type=button class="k-button cancel-object-creation" name=cancel-location-creation data-phrase=Cancel disabled=disabled> Cancel </button> <button type=button class="k-button confirm-object-creation" name=confirm-location-creation data-phrase="Create location" disabled=disabled> Create location </button> </div> </fieldset> </form> </div> </div> </div> </li> <li class="mc-panel mc-panel-geofences"> <span class="mc-icon mc-icon-panel mc-icon-geofences"></span> <span class=mc-panel-name data-phrase=Geofences>Geofences</span> <span class="badge geofence-count">0</span> <div class=mc-panel-body> <div class="mc-control-group scrollable scrollable-sm"> <div class="object-tree geofence-tree">Geofences Tree</div> </div> <div class="mc-control-group checkbox"> <label> <input type=checkbox class=toggle-labels name=geofence-labels /> <span class=checkbox-name data-phrase="Show Geofence Labels">Show Geofence Labels</span> </label> </div> <div class=mc-control-group> <div class="text-right editmode-activator"> <button type=button class=k-button name=geofence-editmode-activator data-phrase="Create Geofence"> Create Geofence </button> </div> <div class="panel panel-default object-editor geofence-editor hidden" data-objecttype=geofence> <div class="panel-heading form-name" data-phrase="Create Geofence"> Create Geofence </div> <form> <fieldset class="panel-fieldset editor-fieldset" disabled=disabled> <div class="form-group form-group-sm"> <label class=control-label data-phrase=Shape>Shape</label> <div class=btn-group> <button type=button class="btn btn-default editableobject-shapetype active" name=geofence-shapetype title=Polygon data-shapetype=POLYGON> <span class="glyphicon glyphicon-tent" title=Polygon data-toggle=tooltip data-placement=top></span> <span class=hidden data-phrase=Polygon>Polygon</span> </button> <button type=button class="btn btn-default editableobject-shapetype" name=geofence-shapetype title=Rectangle data-shapetype=RECTANGLE> <span class="glyphicon glyphicon-unchecked" title=Rectangle data-toggle=tooltip data-placement=top></span> <span class=hidden data-phrase=Rectangle>Rectangle</span> </button> <button type=button class="btn btn-default editableobject-shapetype" name=geofence-shapetype title=Circle data-shapetype=CIRCLE> <span class="glyphicon glyphicon-cd" title=Circle data-toggle=tooltip data-placement=top></span> <span class=hidden data-phrase=Circle>Circle</span> </button> <button type=button class="btn btn-default editableobject-shapetype" name=geofence-shapetype title=Pass data-shapetype=PASS> <span class="glyphicon glyphicon-road" title=Pass data-toggle=tooltip data-placement=top></span> <span class=hidden data-phrase=Pass>Pass</span> </button> </div> <div class="editableobject-coordinates geofence-coordinates"></div> <div class="alert alert-danger invalid-block invalid-coordinates hidden"> <span class="glyphicon glyphicon-exclamation-sign"></span> <span class=invalid-text>${shapeType} needs at least ${pointCount}.</span> </div> </div> <fieldset class=shapeparameter-fieldset> <div class="form-group form-group-sm hidden" data-shapetype=CIRCLE> <label class=control-label data-phrase=Radius>Radius</label> <input type=text class="form-control editableobject-bufferdistance" name=geofence-bufferdistance value=10000 placeholder="Enter radius"/> <div class="alert alert-danger invalid-block invalid-bufferdistance hidden"> <span class="glyphicon glyphicon-exclamation-sign"></span> <span class=invalid-text>Radius must be > 10.</span> </div> </div> <div class="form-group form-group-sm hidden" data-shapetype=PASS> <label class=control-label data-phrase=Width>Width</label> <input type=text class="form-control editableobject-bufferdistance" name=geofence-bufferdistance value=100 placeholder="Enter width"/> <div class="alert alert-danger invalid-block invalid-bufferdistance hidden"> <span class="glyphicon glyphicon-exclamation-sign"></span> <span class=invalid-text>Pass distance must be > 10.</span> </div> </div> </fieldset> <div class="form-group form-group-sm"> <label class=control-label data-phrase=Name>Name</label> <input type=text class="form-control editableobject-objectname" name=geofence-objectname placeholder="Enter name"/> <div class="alert alert-danger invalid-block invalid-objectname hidden"> <span class="glyphicon glyphicon-exclamation-sign"></span> <span class=invalid-text>Object name must have at least 3 characters.</span> </div> </div> <div class="form-group form-group-sm"> <label class=control-label data-phrase=Config>Config</label> <select class=editableobject-configname name=geofence-configname> <option value="Exclusive Security" selected=selected>Exclusive Security</option> <option value="Inclusive Security">Inclusive Security</option> <option value=Waypoint>Waypoint</option> </select> </div> <div class=text-right> <button type=button class="k-button cancel-object-creation" name=cancel-geofence-creation data-phrase=Cancel disabled=disabled> Cancel </button> <button type=button class="k-button confirm-object-creation" name=confirm-geofence-creation data-phrase="Create geofence" disabled=disabled> Create geofence </button> </div> </fieldset> </form> </div> </div> </div> </li> </ul>'},function(a,b){a.exports='<div class=container> <div class="row mp-top-15"> <img class=mp-logo /> <span class="lead mp-directions hidden"> ${directions.startingPoint} to ${directions.destination} </span> </div> <div class="row mp-top-15"> <div class=mp-screenshot> </div> </div> <div class="row mp-top-15"> <div class="col-sm-6 mp-directions hidden"> <div class="row mp-top-15"> <h4>${directions.startingPoint}</h4> </div> <div class="row mp-top-15"> <div class="col-sm-12 maneuver-list"> <% _.forEach(directions.maneuvers, function (maneuver, i) { %> <div class="row mp-maneuver"> <div class=col-sm-12> <img class=mp-maneuver-icon data-iconpath=images/maps/icons/maneuver/${maneuver.baseCssAction}/${maneuver.action}.png /> ${i + 1}. ${maneuver.instruction} </div> </div> <% }); %> </div> </div> <div class="row mp-top-15"> <h4>${directions.destination}</h4> </div> </div> </div> </div>'},function(a,b){a.exports='<li class="mc-panel mc-panel-routing"> <span class="mc-icon mc-icon-panel mc-icon-routing"></span> <span class=mc-panel-name data-phrase=Routing>Routing</span> <div class=mc-panel-body> <div class=mc-control-group> <ul class=waypoint-list> </ul> </div> <button class="btn btn-link" name=add-waypoint> <span class="glyphicon glyphicon-plus"></span> <span data-phrase="add stop-over">add stop-over</span> </button> <div class=mc-control-group> <div class="panel panel-default route-features"> <div class=panel-heading> <span data-phrase="Include route features">Include route features</span>: </div> <div class="row route-features-body"> <div class="col-sm-6 col-route-features"> <div class=checkbox> <label> <input type=checkbox class=route-feature name=include-tollroads data-featurename=tollroad checked=checked /> <span class=checkbox-name data-phrase="Toll roads">Toll roads</span> </label> </div> <div class=checkbox> <label> <input type=checkbox class=route-feature name=include-motorways data-featurename=motorway checked=checked /> <span class=checkbox-name data-phrase=Highways>Highways</span> </label> </div> <div class=checkbox> <label> <input type=checkbox class=route-feature name=include-ferries data-featurename=boatFerry checked=checked /> <span class=checkbox-name data-phrase=Ferries>Ferries</span> </label> </div> </div> <div class="col-sm-6 col-route-features"> <div class=checkbox> <label> <input type=checkbox class=route-feature name=include-tunnels data-featurename=tunnel checked=checked /> <span class=checkbox-name data-phrase=Tunnels>Tunnels</span> </label> </div> <div class=checkbox> <label> <input type=checkbox class=route-feature name=include-dirtroads data-featurename=dirtRoad checked=checked /> <span class=checkbox-name data-phrase="Dirt roads">Dirt roads</span> </label> </div> <div class=checkbox> <label> <input type=checkbox class=route-feature name=include-parks data-featurename=park checked=checked /> <span class=checkbox-name data-phrase=Parks>Parks</span> </label> </div> </div> </div> </div> </div> <div class=mc-control-group> <div class="panel panel-default route-summary hidden"> <div class=panel-heading data-phrase="Route Summary">Route Summary</div> <div class=route-summary-text>-</div> </div> </div> <div class=mc-control-group> <div class="panel panel-default route-directions hidden"> <div class=panel-heading> <span data-phrase=Directions>Directions</span> <span class="glyphicon glyphicon-print pull-right print-route"></span> </div> <div class=scrollable> <ul class="list-group maneuver-list"> </ul> </div> </div> </div> <div class=text-right> <button class=k-button name=save-route disabled=disabled>Save Route</button> </div> </div> </li>'},,,,,,,,function(a,b){a.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 1560 1560" width="18" height="18">\r\n    <g transform="rotate(${rotation} 780 780)">\r\n        <circle fill="${backgroundColor}" stroke="none" cx="780" cy="780" r="770"/>\r\n        <path fill="${color}" stroke="none" d="m840,1292l-128,0q-26,0 -45,-19q-19,-19 -19,-45l0,-502l-189,189q-19,19 -45,19q-26,0 -45,-19l-91,-91q-18,-18 -18,-45q0,-27 18,-45l362,-362l91,-91q18,-18 45,-18q27,0 45,18l91,91l362,362q18,18 18,45q0,27 -18,45l-91,91q-18,18 -45,18q-27,0 -45,-18l-189,-189l0,502q0,26 -19,45q-19,19 -45,19z"/>\r\n    </g>\r\n</svg>\r\n'},function(a,b){a.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 1560 1560" width="18" height="18">\r\n    <circle fill="${backgroundColor}" stroke="none" cx="780" cy="780" r="770"/>\r\n</svg>\r\n'},function(a,b){a.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 1560 1560" width="18" height="18">\r\n    <g>\r\n        <circle fill="${backgroundColor}" stroke="none" cx="780" cy="780" r="770"/>\r\n        <path fill="${color}" stroke="none" d="m700,210l-380,600h380l-300,600l750,-750h-380l460,-450z"/>\r\n    </g>\r\n</svg>\r\n'},function(a,b){a.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 1560 1560" width="18" height="18">\r\n    <g>\r\n        <circle fill="${backgroundColor}" stroke="none" cx="780" cy="780" r="770"/>\r\n        <g style="fill: ${color}; stroke: none;">\r\n            <circle r="80" cy="780" cx="780"/>\r\n            <path d="m715.0296,176.51082c-82.49176,12.40086 -143.95697,31.27121 -204.8822,61.46432c-122.92953,62.00426 -225.90973,170.37581 -280.36548,295.4615c-33.96735,77.1004 -35.04546,71.16992 17.2532,71.16992l45.2901,0l15.0961,-35.58539c98.12784,-224.83075 342.36975,-348.29933 584.99268,-296.00058c136.4068,29.65402 263.64777,122.9295 336.43732,248.55429c2.1582,3.77423 -38.81689,22.64551 -90.58179,43.133c-51.7561,20.4884 -94.35181,38.28064 -94.35181,39.89868l339.13635,172.53204c22.10815,-82.49176 85.72864,-342.3689 85.19141,-342.90793c-0.54626,-0.53906 -33.98181,11.86093 -73.87317,28.03598c-39.8916,16.17523 -74.93896,29.11505 -78.17126,29.11505c-2.70422,0 -12.40186,-11.86182 -20.49646,-26.95795c-8.08594,-14.55792 -28.57349,-43.13297 -44.74487,-63.08234c-97.59326,-119.69431 -232.38281,-197.87277 -379.57318,-219.97833c-46.90723,-7.54849 -123.46857,-9.70471 -156.35693,-4.85236l0,0l0,0l0,0l0,0l0,0l0,0l0,0.00002l0,0.00003l0,0.00003z"/>\r\n            <path d="m91.21716,1120.04187c0.53914,0.54626 33.96727,-11.85559 73.86536,-28.03601c39.89771,-16.17139 74.94406,-29.11047 78.17836,-29.11047c2.69615,0 11.8618,11.8645 19.94936,25.87793c32.35019,57.69275 102.4411,132.09436 173.61102,183.85925c40.43686,29.64783 129.39902,71.7063 181.15866,86.26611c288.992,78.71741 593.61652,-65.77856 711.69733,-338.06079c33.96362,-77.09772 35.04736,-71.16724 -17.25488,-71.16724l-45.29126,0l-15.09692,35.5827c-118.07178,270.66156 -441.03387,386.04706 -706.30231,251.79474c-84.1098,-42.5957 -153.66165,-106.76245 -208.11655,-193.56555l-10.78369,-16.70801l94.35358,-37.2052c51.75961,-20.4884 94.35355,-38.28064 94.35355,-39.89868l-339.13359,-172.53204l-85.188,342.90326z"/>\r\n        </g>\r\n    </g>\r\n</svg>\r\n'}]);App.widget.Map=App.widget.Base.extend({elCanvas:null,elControls:null,splitter:null,init:function(a){"use strict";var b=this;b.config=$.extend({},a),b.setWidgetData();var c=b.getMapProject(b.widgetData.viewType),d=c.mapViewer;d.match(/googlemap/i)&&(d="googlemaps");var e={mapViewer:d,viewerName:c.name,domainObjectId:b.config.domainObjectId,domainObjectType:b.config.objectType,eventIds:b.config.ids||null,createRouteFromIds:b.config.createRouteFromIds||!1,autoRefresh:!1,autoFocus:!0,rememberLastViewportEnabled:!1,lazyLoadingEnabled:!0};if(e.mapViewer){b.elCanvas=$("<div>",{"class":"map-canvas"}),b.elControls=$("<div>",{"class":"map-controls"}),b.config.el.empty().addClass("map-display").append(b.elCanvas).append(b.elControls),e.mapDisplay=b.config.el,b.splitter=b.config.el.kendoSplitter({orientation:"horizontal",panes:[{collapsible:!1},{collapsible:!0,size:250,collapsed:b.config.displayMini}],resize:function(){b.controller&&b.controller.onResize()}}).data("kendoSplitter");var f=require("maps-initializer"),g=require("maps-debugger"),h=f.create({options:e});try{var i=e.mapDisplay,j=i.children(".map-controls"),k=function(a,c){a.data("pane")&&b.splitter.toggle(a,c)};k(j,!1),kendo.ui.progress(i,!0),g.time("Map initialization time"),h.startInitialization(function(a){g.timeEnd("Map initialization time"),kendo.ui.progress(i,!1),b.controller=a,j.children(".mc-panelbar").kendoPanelBar({expandMode:"multiple"}),k(j,!b.config.displayMini),a.viewer.currentObject||a.onLayerZoomingRequested()})}catch(l){}}},load:function(){},onDrop:function(){"use strict";switch(this.config.location){case App.config.locationSideBar:this.splitter.collapse(".map-controls");break;default:this.splitter.expand(".map-controls")}this.config.ids&&(App.config.locationAlarmMap=this.config.location)},resize:function(){"use strict";kendo.resize(this.config.el)},destroy:function(){"use strict";$(window).off("resize",this.resize),this.controller&&this.controller.onDestroy()}}),App.widget.OverviewMap=App.widget.Base.extend({init:function(a){"use strict";var b=this;b.config=$.extend({},a),b.el=b.config.el,b.setWidgetData();var c=b.getMapProject(b.widgetData.viewType),d=c.mapViewer.toLowerCase()||"heremaps";d.match(/googlemap/i)&&(d="googlemaps");var e=$("<div>").css({position:"relative",left:0,right:0}),f=b.config.zoomLevel||10,g=[b.el.width(),b.el.height()],h="";switch(b.config.objectType){case"location":h="caesarLocation/locations";break;case"geofence":h="caesarGeofence/geofences";break;default:h="geoposition/current"}$.ajax({url:App.config.serviceUrl+h,data:{domainObjectType:b.config.objectType,domainObjectId:b.config.domainObjectId},error:function(){App.log.error(App.translate("Could not load static map for {0}, {1}",b.config.objectType,b.config.domainObjectId),b.config,!0)},success:function(a){var c=a.data[0],h=require(d+"-static").getInstance();"geofence"===b.config.objectType?h.showStaticGeofenceMap(e,c.coordinates,g,c):h.showStaticMap(e,[c.longitude,c.latitude],g,f,c)}}),b.el.append(e)},showStaticAssetGroupMap:function(a){var b=this,c="",d=b.getMapProject(b.widgetData.viewType),e=d.mapViewer.toLowerCase()||"heremaps",f=[b.el.width(),b.el.height()];if(e.match(/googlemap/i)&&(e="googlemaps"),"geofence"===b.config.objectType||"location"===b.config.objectType){switch(b.config.objectType){case"location":c="caesarLocation/containedAssets";break;case"geofence":c="caesarGeofence/containedAssets"}$.ajax({url:App.config.serviceUrl+c,data:{domainObjectType:b.config.objectType,domainObjectId:b.config.domainObjectId},error:function(){App.log.error(App.translate("Could not load static map for {0}, {1}",b.config.objectType,b.config.domainObjectId),b.config,!0)},success:function(b){var c=b.data,d=b.location,g=b.geofence,h=null,i=null,j=null;if(g){var k=1.05;h=g.coordinates,i=App.maps.GeoUtils.minMax(h),j=App.maps.GeoUtils.scale(k,i)}var l=require(e+"-static").getInstance();g&&c&&c.length>0?l.showStaticRegionMap(a,g,c,f,j):g?l.showStaticGeofenceMap(a,h,f,g):d&&l.showStaticRegionMap(a,j,f,{zoom:12,center:[d.longitude,d.latitude]}),d&&l.renderIcon(a,d,f,{objectType:"location"})}})}},load:function(){},refresh:function(){}}),App.widget.MapInfo=kendo.Class.extend({config:{},widgetData:{},el:null,popover:null,visible:!1,onInitialized:$.noop,init:function(a,b){"use strict";var c=this;if(c.config=$.extend({domainObjectType:null,domainObjectId:null,objectName:null,dataView:"mapDetails",url:App.config.serviceUrl+"caesarObject/objectDataProvider3"},a),c.onInitialized=b,!c.el){var d=a.parentElement,e=a.position;c.el=$("<div>").css({top:e.top,left:e.left,position:"absolute"}).appendTo(d)}App.config.map.dataView[c.config.domainObjectType]?c.getView():$.ajax({url:App.config.serviceUrl+"caesarObject/availableValues",data:{domainDataView:c.config.dataView,domainObjectType:c.config.domainObjectType},success:function(a){App.config.map.dataView[c.config.domainObjectType]=a.domainObjectValues,c.getView()}})},show:function(){this.popover&&(this.el.popover("show"),this.visible=!0)},hide:function(){this.popover&&(this.el.popover("hide"),this.visible=!1)},setPosition:function(a){if(this.popover){this.el.css({top:a.top,left:a.left});var b=this.popover.tip();b.css({top:a.top,left:a.left-b.width()/2})}},isVisible:function(){return this.visible},getView:function(){var a=this;$.ajax({url:a.config.url,data:{domainObjectType:a.config.domainObjectType,domainObjectId:a.config.domainObjectId,domainDataView:a.config.dataView},success:$.proxy(a.buildContainer,a)})},buildContainer:function(a){var b,c=this,d="",e="",f="",g={},h=[],i="";for(b=0;b<a.ui.items[0].items.length;b++){var j=a.ui.items[0].items[b];""===j.section?h.push(j):(g[j.name]||(g[j.name]=[]),g[j.name].push(j.items))}$.isEmptyObject(g)||(b=0,$.each(g,function(a,d){var g="tab"+b;e+='<li class="'+(0===b?"active":"tab")+'"><a href=".'+g+'" data-toggle="tab">'+a+"</a></li>",f+='<div class="tab-pane '+g+" "+(0===b?"active":"")+'">'+c.getTabPaneContent(d[0])+"</div>",b++}),d+='<div class="tabbable">',d+='<ul class="nav nav-tabs">'+e+"</ul>",d+='<div class="tab-content">'+f+"</ul>",
d+="</div>"),h.length>0&&(d+=c.getTabPaneContent(h)),i=c.config.objectName+'<button class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>',c.popover?(c.popover.options.content=d,c.popover.options.title=i,c.setPosition(c.config.position)):(c.el.popover({container:"body",content:d,html:!0,placement:"bottom",trigger:"manual",title:i,template:'<div class="popover mapinfo" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.popover=c.el.data("bs.popover"),c.popover.tip().on("click","button.close",function(){c.hide()})),c.onInitialized(this)},getTabPaneContent:function(a){for(var b='<dl class="dl-horizontal dl-tab-content">',c=App.config.map.dataView[this.config.domainObjectType],d=0;d<a.length;d++)for(var e=a[d],f=0;f<c.length;f++){var g=c[f];g.domainObjectValueId===e.id&&(b+="<dt>"+App.translate(g.domainObjectValueName)+"</dt>",b+="<dd>"+App.util.format.item(e)+"</dd>")}return b+="</dl>"},geoPosition:null,getGeoPosition:function(){return this.geoPosition},setGeoPosition:function(a){this.geoPosition=a},destroy:function(){this.popover&&(this.el.popover("destroy"),this.el.remove(),this.visible=!1)}}),window.App||(window.App={}),App.config={version:"1.130 2016-04-12",domainObjectTypes:{},domainObjectTypesTree:[],domainDataViews:[],parentWidgetType:"widgetGroup",widgets:{},locationMainArea:"CENTER",locationSideBar:"RIGHT",locationNone:"NONE",locationAlarmMap:"RIGHT",locationEventHistoryMap:"RIGHT",theme:"default",copyrights:"Powered by ROAM&trade;. Copyright &copy; 2001&ndash;2015. All rights reserved.",user:{culture:"en",dataGridPageSize:15,geoReferenceSystem:"Global",id:-1,language:"en",loginName:null,measurementSystem:"metric",timeZone:"GMT",timeZoneOffset:0},sessionId:null,sessionName:"ROAMSESSIONKEY",appId:null,mailHelpdesk:"helpdesk@roamworks.com",dateFormat:"yyyy'-'MM'-'dd",dateTimeFormat:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",timeFormatShort:"HH:mm",blankSign:"&ndash;",breadcrumbSeparator:" - ",name:"ROAM",pollInterval:3e4,notificationThreshold:120,serviceUrl:"../service/",logUrl:"../service/logger/logerror",ajaxType:"POST",ajaxDataType:"json",ajaxTimeout:0,ajaxPingTimeout:2e4,idDivider:"_",routeLogin:"/login",debug_i18n:!0,errorLevel:2,icons:{"assetStateValue.normal":{url:"images/assetstatus/normal.png",description:"Normal"},"assetStateValue.notOperational":{url:"images/assetstatus/notoperational.png",description:"Not Operation"},"assetStateValue.notMoving":{url:"images/assetstatus/notmoving.png",description:"Not Moving"},"assetStateValue.idling":{url:"images/assetstatus/idling.png",description:"Idling"},"alarmStateValue.active":{url:"images/alarmstatus/active.png",description:"Active"},"alarmStateValue.acknowledged":{url:"images/alarmstatus/acknowledged.png",description:"Acknowledged"},"alarmStateValue.normal":{url:"images/alarmstatus/normal.png",description:"Normal"},"driverScoreStateValue.0":{url:"images/threshold/good.png",description:"Good"},"driverScoreStateValue.1":{url:"images/threshold/fair.png",description:"Fair"},"driverScoreStateValue.2":{url:"images/threshold/bad.png",description:"Bad"},"driverScoreStateValue.3":{url:"images/threshold/dangerous.png",description:"Dangerous"},"driverScoreStateValue.4":{url:"images/threshold/none.png",description:"None"},"thresholdValue.good":{url:"images/threshold/good.png",description:"Good"},"thresholdValue.fair":{url:"images/threshold/fair.png",description:"Fair"},"thresholdValue.bad":{url:"images/threshold/bad.png",description:"Bad"},"thresholdValue.dangerous":{url:"images/threshold/dangerous.png",description:"Dangerous"}},alertJustificationRequired:!1,lastTreeRefresh:null,map:{url:"js/config/dewa.map.json",controlsUrl:"js/ui/templates/map.controls.html",viewer:"HereMaps",appId:"MHkEpbjxdKCX0U1tn9yy",appCode:"uurLiQT0OyWEGUfQMBvjrw",projects:{},defaultId:null,dataView:{},now:null,originalNow:new Date((new Date).setSeconds(0,0)),assetCategoryFilter:!0,assetConfigurationFilter:!1,assetStatusFilters:!1,autoLabelingCheckboxHidden:!0,dateRangeSlider:!0,dateRangeMinimum:60,routing:!0,coordinatesDisplay:!1,legend:{isDEWA:!1},defaultMapTypeSatelliteEnabled:!1},isSmallDevice:!1,widgetHeight:500,scrollableGrid:!1,maxGridColumnSize:7};